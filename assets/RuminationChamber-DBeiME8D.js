import{r as ye,j as k}from"./index-t77T4Y0w.js";import"./vendor-j2mp3VYR.js";var gr={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let yr,vr;function _r(){return{geminiUrl:yr,vertexUrl:vr}}function Tr(e,t,n,o){var i,s;if(!(e!=null&&e.baseUrl)){const a=_r();return t?(i=a.vertexUrl)!==null&&i!==void 0?i:n:(s=a.geminiUrl)!==null&&s!==void 0?s:o}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class se{}function A(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(o,i)=>{if(Object.prototype.hasOwnProperty.call(t,i)){const s=t[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function l(e,t,n){for(let s=0;s<t.length-1;s++){const a=t[s];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in e))if(Array.isArray(n))e[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(e[u])){const d=e[u];if(Array.isArray(n))for(let c=0;c<d.length;c++){const f=d[c];l(f,t.slice(s+1),n[c])}else for(const c of d)l(c,t.slice(s+1),n)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in e||(e[u]=[{}]);const d=e[u];l(d[0],t.slice(s+1),n);return}(!e[a]||typeof e[a]!="object")&&(e[a]={}),e=e[a]}const o=t[t.length-1],i=e[o];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[o]=n}function r(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let o=0;o<t.length;o++){if(typeof e!="object"||e===null)return n;const i=t[o];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in e){const a=e[s];return Array.isArray(a)?a.map(u=>r(u,t.slice(o+1),n)):n}else return n}else e=e[i]}return e}catch(o){if(o instanceof TypeError)return n;throw o}}function Er(e,t){for(const[n,o]of Object.entries(t)){const i=n.split("."),s=o.split("."),a=new Set;let u=-1;for(let d=0;d<i.length;d++)if(i[d]==="*"){u=d;break}if(u!==-1&&s.length>u)for(let d=u;d<s.length;d++){const c=s[d];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&a.add(c)}gt(e,i,s,0,a)}}function gt(e,t,n,o,i){if(o>=t.length||typeof e!="object"||e===null)return;const s=t[o];if(s.endsWith("[]")){const a=s.slice(0,-2),u=e;if(a in u&&Array.isArray(u[a]))for(const d of u[a])gt(d,t,n,o+1,i)}else if(s==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const a=e,u=Object.keys(a).filter(c=>!c.startsWith("_")&&!i.has(c)),d={};for(const c of u)d[c]=a[c];for(const[c,f]of Object.entries(d)){const p=[];for(const h of n.slice(o))h==="*"?p.push(c):p.push(h);l(a,p,f)}for(const c of u)delete a[c]}}else{const a=e;s in a&&gt(a[s],t,n,o+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ut(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sr(e){const t={},n=r(e,["operationName"]);n!=null&&l(t,["operationName"],n);const o=r(e,["resourceName"]);return o!=null&&l(t,["_url","resourceName"],o),t}function Cr(e){const t={},n=r(e,["name"]);n!=null&&l(t,["name"],n);const o=r(e,["metadata"]);o!=null&&l(t,["metadata"],o);const i=r(e,["done"]);i!=null&&l(t,["done"],i);const s=r(e,["error"]);s!=null&&l(t,["error"],s);const a=r(e,["response","generateVideoResponse"]);return a!=null&&l(t,["response"],Ar(a)),t}function Ir(e){const t={},n=r(e,["name"]);n!=null&&l(t,["name"],n);const o=r(e,["metadata"]);o!=null&&l(t,["metadata"],o);const i=r(e,["done"]);i!=null&&l(t,["done"],i);const s=r(e,["error"]);s!=null&&l(t,["error"],s);const a=r(e,["response"]);return a!=null&&l(t,["response"],wr(a)),t}function Ar(e){const t={},n=r(e,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Rr(a))),l(t,["generatedVideos"],s)}const o=r(e,["raiMediaFilteredCount"]);o!=null&&l(t,["raiMediaFilteredCount"],o);const i=r(e,["raiMediaFilteredReasons"]);return i!=null&&l(t,["raiMediaFilteredReasons"],i),t}function wr(e){const t={},n=r(e,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Pr(a))),l(t,["generatedVideos"],s)}const o=r(e,["raiMediaFilteredCount"]);o!=null&&l(t,["raiMediaFilteredCount"],o);const i=r(e,["raiMediaFilteredReasons"]);return i!=null&&l(t,["raiMediaFilteredReasons"],i),t}function Rr(e){const t={},n=r(e,["video"]);return n!=null&&l(t,["video"],Ur(n)),t}function Pr(e){const t={},n=r(e,["_self"]);return n!=null&&l(t,["video"],Lr(n)),t}function Nr(e){const t={},n=r(e,["operationName"]);return n!=null&&l(t,["_url","operationName"],n),t}function Mr(e){const t={},n=r(e,["operationName"]);return n!=null&&l(t,["_url","operationName"],n),t}function kr(e){const t={},n=r(e,["name"]);n!=null&&l(t,["name"],n);const o=r(e,["metadata"]);o!=null&&l(t,["metadata"],o);const i=r(e,["done"]);i!=null&&l(t,["done"],i);const s=r(e,["error"]);s!=null&&l(t,["error"],s);const a=r(e,["response"]);return a!=null&&l(t,["response"],xr(a)),t}function xr(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&l(t,["sdkHttpResponse"],n);const o=r(e,["parent"]);o!=null&&l(t,["parent"],o);const i=r(e,["documentName"]);return i!=null&&l(t,["documentName"],i),t}function Qo(e){const t={},n=r(e,["name"]);n!=null&&l(t,["name"],n);const o=r(e,["metadata"]);o!=null&&l(t,["metadata"],o);const i=r(e,["done"]);i!=null&&l(t,["done"],i);const s=r(e,["error"]);s!=null&&l(t,["error"],s);const a=r(e,["response"]);return a!=null&&l(t,["response"],Dr(a)),t}function Dr(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&l(t,["sdkHttpResponse"],n);const o=r(e,["parent"]);o!=null&&l(t,["parent"],o);const i=r(e,["documentName"]);return i!=null&&l(t,["documentName"],i),t}function Ur(e){const t={},n=r(e,["uri"]);n!=null&&l(t,["uri"],n);const o=r(e,["encodedVideo"]);o!=null&&l(t,["videoBytes"],Ut(o));const i=r(e,["encoding"]);return i!=null&&l(t,["mimeType"],i),t}function Lr(e){const t={},n=r(e,["gcsUri"]);n!=null&&l(t,["uri"],n);const o=r(e,["bytesBase64Encoded"]);o!=null&&l(t,["videoBytes"],Ut(o));const i=r(e,["mimeType"]);return i!=null&&l(t,["mimeType"],i),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var jt;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(jt||(jt={}));var en;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(en||(en={}));var tn;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(tn||(tn={}));var Y;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(Y||(Y={}));var nn;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(nn||(nn={}));var on;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(on||(on={}));var rn;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(rn||(rn={}));var sn;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(sn||(sn={}));var ln;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(ln||(ln={}));var an;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(an||(an={}));var un;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(un||(un={}));var cn;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.MINIMAL="MINIMAL"})(cn||(cn={}));var dn;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(dn||(dn={}));var fn;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(fn||(fn={}));var pn;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(pn||(pn={}));var hn;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(hn||(hn={}));var mn;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(mn||(mn={}));var gn;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(gn||(gn={}));var yn;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(yn||(yn={}));var vn;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(vn||(vn={}));var _n;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(_n||(_n={}));var Oe;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(Oe||(Oe={}));var Tn;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Tn||(Tn={}));var En;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(En||(En={}));var Sn;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Sn||(Sn={}));var yt;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(yt||(yt={}));var Cn;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Cn||(Cn={}));var In;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",e.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(In||(In={}));var vt;(function(e){e.COLLECTION="COLLECTION"})(vt||(vt={}));var An;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(An||(An={}));var wn;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(wn||(wn={}));var Rn;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Rn||(Rn={}));var Pn;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(Pn||(Pn={}));var Nn;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(Nn||(Nn={}));var Mn;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Mn||(Mn={}));var kn;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(kn||(kn={}));var xn;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(xn||(xn={}));var Dn;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Dn||(Dn={}));var Un;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(Un||(Un={}));var Ln;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(Ln||(Ln={}));var bn;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(bn||(bn={}));var Fn;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(Fn||(Fn={}));var Gn;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING",e.DISTILLATION="DISTILLATION"})(Gn||(Gn={}));var Vn;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(Vn||(Vn={}));var $n;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})($n||($n={}));var zn;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED",e.REGISTERED="REGISTERED"})(zn||(zn={}));var qn;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(qn||(qn={}));var Hn;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(Hn||(Hn={}));var Bn;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Bn||(Bn={}));var Jn;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.ACTIVITY_START="ACTIVITY_START",e.ACTIVITY_END="ACTIVITY_END"})(Jn||(Jn={}));var On;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(On||(On={}));var Zn;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Zn||(Zn={}));var Wn;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(Wn||(Wn={}));var Kn;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Kn||(Kn={}));var Yn;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Yn||(Yn={}));var Xn;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(Xn||(Xn={}));var _e;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(_e||(_e={}));class _t{constructor(t){const n={};for(const o of t.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class Ne{get text(){var t,n,o,i,s,a,u,d;if(((i=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const p=[];for(const h of(d=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[m,g]of Object.entries(h))m!=="text"&&m!=="thought"&&m!=="thoughtSignature"&&(g!==null||g!==void 0)&&p.push(m);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,c+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var t,n,o,i,s,a,u,d;if(((i=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const p of(d=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[h,m]of Object.entries(p))h!=="inlineData"&&(m!==null||m!==void 0)&&f.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var t,n,o,i,s,a,u,d;if(((i=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(d=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var t,n,o,i,s,a,u,d,c;if(((i=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(d=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var t,n,o,i,s,a,u,d,c;if(((i=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(d=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class Qn{}class jn{}class br{}class Fr{}class Gr{}class Vr{}class eo{}class to{}class no{}class $r{}class Ze{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const o=new Ze;let i;const s=t;return n?i=Ir(s):i=Cr(s),Object.assign(o,i),o}}class oo{}class io{}class ro{}class so{}class zr{}class qr{}class Hr{}class Lt{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const o=new Lt,s=kr(t);return Object.assign(o,s),o}}class Br{}class Jr{}class Or{}class Zr{}class lo{}class Wr{get text(){var t,n,o;let i="",s=!1;const a=[];for(const u of(o=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[d,c]of Object.entries(u))d!=="text"&&d!=="thought"&&c!==null&&a.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;s=!0,i+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var t,n,o;let i="";const s=[];for(const a of(o=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,d]of Object.entries(a))u!=="inlineData"&&d!==null&&s.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(i+=atob(a.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class Kr{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class bt{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const o=new bt,s=Qo(t);return Object.assign(o,s),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function jo(e,t){const n=D(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function ei(e){return Array.isArray(e)?e.map(t=>We(t)):[We(e)]}function We(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function ti(e){const t=We(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function ni(e){const t=We(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function ao(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function oi(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>ao(t)):[ao(e)]}function Tt(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function uo(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function co(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function B(e){if(e==null)throw new Error("ContentUnion is required");return Tt(e)?e:{role:"user",parts:oi(e)}}function Ft(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const o=B(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(e.isVertexAI()){const n=B(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>B(n)):[B(t)]}function X(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(uo(e)||co(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[B(e)]}const t=[],n=[],o=Tt(e[0]);for(const i of e){const s=Tt(i);if(s!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)t.push(i);else{if(uo(i)||co(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return o||t.push({role:"user",parts:oi(n)}),t}function Yr(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(o=>o!=="null");if(n.length===1)t.type=Object.values(Y).includes(n[0].toUpperCase())?n[0].toUpperCase():Y.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const o of n)t.anyOf.push({type:Object.values(Y).includes(o.toUpperCase())?o.toUpperCase():Y.TYPE_UNSPECIFIED})}}function Se(e){const t={},n=["items"],o=["anyOf"],i=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=e.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(t.nullable=!0,e=s[1]):s[1].type==="null"&&(t.nullable=!0,e=s[0])),e.type instanceof Array&&Yr(e.type,t);for(const[a,u]of Object.entries(e))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;t.type=Object.values(Y).includes(u.toUpperCase())?u.toUpperCase():Y.TYPE_UNSPECIFIED}else if(n.includes(a))t[a]=Se(u);else if(o.includes(a)){const d=[];for(const c of u){if(c.type=="null"){t.nullable=!0;continue}d.push(Se(c))}t[a]=d}else if(i.includes(a)){const d={};for(const[c,f]of Object.entries(u))d[c]=Se(f);t[a]=d}else{if(a==="additionalProperties")continue;t[a]=u}return t}function Gt(e){return Se(e)}function Vt(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function $t(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Ae(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Se(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Se(t.response));return e}function we(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function Xr(e,t,n,o=1){const i=!t.startsWith(`${n}/`)&&t.split("/").length===o;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:i?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:i?`${n}/${t}`:t}function le(e,t){if(typeof t!="string")throw new Error("name must be a string");return Xr(e,t,"cachedContents")}function ii(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function ae(e){return Ut(e)}function Qr(e){return e!=null&&typeof e=="object"&&"name"in e}function jr(e){return e!=null&&typeof e=="object"&&"video"in e}function es(e){return e!=null&&typeof e=="object"&&"uri"in e}function ri(e){var t;let n;if(Qr(e)&&(n=e.name),!(es(e)&&(n=e.uri,n===void 0))&&!(jr(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function si(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function li(e){for(const t of["models","tunedModels","publisherModels"])if(ts(e,t))return e[t];return[]}function ts(e,t){return e!==null&&typeof e=="object"&&t in e}function ns(e,t={}){const n=e,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),t.behavior&&(o.behavior=t.behavior),{functionDeclarations:[o]}}function os(e,t={}){const n=[],o=new Set;for(const i of e){const s=i.name;if(o.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);o.add(s);const a=ns(i,t);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function ai(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(i>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function is(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function ui(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return e;let s=!1;for(const a of i){if(typeof a!="object"||a===null)continue;const d=a.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){s=!0;break}}return s&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Re(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function ci(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rs(e){const t={},n=r(e,["responsesFile"]);n!=null&&l(t,["fileName"],n);const o=r(e,["inlinedResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Vs(a))),l(t,["inlinedResponses"],s)}const i=r(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),l(t,["inlinedEmbedContentResponses"],s)}return t}function ss(e){const t={},n=r(e,["predictionsFormat"]);n!=null&&l(t,["format"],n);const o=r(e,["gcsDestination","outputUriPrefix"]);o!=null&&l(t,["gcsUri"],o);const i=r(e,["bigqueryDestination","outputUri"]);return i!=null&&l(t,["bigqueryUri"],i),t}function ls(e){const t={},n=r(e,["format"]);n!=null&&l(t,["predictionsFormat"],n);const o=r(e,["gcsUri"]);o!=null&&l(t,["gcsDestination","outputUriPrefix"],o);const i=r(e,["bigqueryUri"]);if(i!=null&&l(t,["bigqueryDestination","outputUri"],i),r(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(r(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function Be(e){const t={},n=r(e,["name"]);n!=null&&l(t,["name"],n);const o=r(e,["metadata","displayName"]);o!=null&&l(t,["displayName"],o);const i=r(e,["metadata","state"]);i!=null&&l(t,["state"],ci(i));const s=r(e,["metadata","createTime"]);s!=null&&l(t,["createTime"],s);const a=r(e,["metadata","endTime"]);a!=null&&l(t,["endTime"],a);const u=r(e,["metadata","updateTime"]);u!=null&&l(t,["updateTime"],u);const d=r(e,["metadata","model"]);d!=null&&l(t,["model"],d);const c=r(e,["metadata","output"]);return c!=null&&l(t,["dest"],rs(ui(c))),t}function Et(e){const t={},n=r(e,["name"]);n!=null&&l(t,["name"],n);const o=r(e,["displayName"]);o!=null&&l(t,["displayName"],o);const i=r(e,["state"]);i!=null&&l(t,["state"],ci(i));const s=r(e,["error"]);s!=null&&l(t,["error"],s);const a=r(e,["createTime"]);a!=null&&l(t,["createTime"],a);const u=r(e,["startTime"]);u!=null&&l(t,["startTime"],u);const d=r(e,["endTime"]);d!=null&&l(t,["endTime"],d);const c=r(e,["updateTime"]);c!=null&&l(t,["updateTime"],c);const f=r(e,["model"]);f!=null&&l(t,["model"],f);const p=r(e,["inputConfig"]);p!=null&&l(t,["src"],as(p));const h=r(e,["outputConfig"]);h!=null&&l(t,["dest"],ss(ui(h)));const m=r(e,["completionStats"]);return m!=null&&l(t,["completionStats"],m),t}function as(e){const t={},n=r(e,["instancesFormat"]);n!=null&&l(t,["format"],n);const o=r(e,["gcsSource","uris"]);o!=null&&l(t,["gcsUri"],o);const i=r(e,["bigquerySource","inputUri"]);return i!=null&&l(t,["bigqueryUri"],i),t}function us(e,t){const n={};if(r(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=r(t,["fileName"]);o!=null&&l(n,["fileName"],o);const i=r(t,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Gs(e,a))),l(n,["requests","requests"],s)}return n}function cs(e){const t={},n=r(e,["format"]);n!=null&&l(t,["instancesFormat"],n);const o=r(e,["gcsUri"]);o!=null&&l(t,["gcsSource","uris"],o);const i=r(e,["bigqueryUri"]);if(i!=null&&l(t,["bigquerySource","inputUri"],i),r(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function ds(e){const t={},n=r(e,["data"]);if(n!=null&&l(t,["data"],n),r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=r(e,["mimeType"]);return o!=null&&l(t,["mimeType"],o),t}function fs(e,t){const n={},o=r(t,["name"]);return o!=null&&l(n,["_url","name"],Re(e,o)),n}function ps(e,t){const n={},o=r(t,["name"]);return o!=null&&l(n,["_url","name"],Re(e,o)),n}function hs(e){const t={},n=r(e,["content"]);n!=null&&l(t,["content"],n);const o=r(e,["citationMetadata"]);o!=null&&l(t,["citationMetadata"],ms(o));const i=r(e,["tokenCount"]);i!=null&&l(t,["tokenCount"],i);const s=r(e,["finishReason"]);s!=null&&l(t,["finishReason"],s);const a=r(e,["avgLogprobs"]);a!=null&&l(t,["avgLogprobs"],a);const u=r(e,["groundingMetadata"]);u!=null&&l(t,["groundingMetadata"],u);const d=r(e,["index"]);d!=null&&l(t,["index"],d);const c=r(e,["logprobsResult"]);c!=null&&l(t,["logprobsResult"],c);const f=r(e,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(m=>m)),l(t,["safetyRatings"],h)}const p=r(e,["urlContextMetadata"]);return p!=null&&l(t,["urlContextMetadata"],p),t}function ms(e){const t={},n=r(e,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>i)),l(t,["citations"],o)}return t}function di(e){const t={},n=r(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Os(s))),l(t,["parts"],i)}const o=r(e,["role"]);return o!=null&&l(t,["role"],o),t}function gs(e,t){const n={},o=r(e,["displayName"]);if(t!==void 0&&o!=null&&l(t,["batch","displayName"],o),r(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function ys(e,t){const n={},o=r(e,["displayName"]);t!==void 0&&o!=null&&l(t,["displayName"],o);const i=r(e,["dest"]);return t!==void 0&&i!=null&&l(t,["outputConfig"],ls(is(i))),n}function fo(e,t){const n={},o=r(t,["model"]);o!=null&&l(n,["_url","model"],D(e,o));const i=r(t,["src"]);i!=null&&l(n,["batch","inputConfig"],us(e,ai(e,i)));const s=r(t,["config"]);return s!=null&&gs(s,n),n}function vs(e,t){const n={},o=r(t,["model"]);o!=null&&l(n,["model"],D(e,o));const i=r(t,["src"]);i!=null&&l(n,["inputConfig"],cs(ai(e,i)));const s=r(t,["config"]);return s!=null&&ys(s,n),n}function _s(e,t){const n={},o=r(e,["displayName"]);return t!==void 0&&o!=null&&l(t,["batch","displayName"],o),n}function Ts(e,t){const n={},o=r(t,["model"]);o!=null&&l(n,["_url","model"],D(e,o));const i=r(t,["src"]);i!=null&&l(n,["batch","inputConfig"],Rs(e,i));const s=r(t,["config"]);return s!=null&&_s(s,n),n}function Es(e,t){const n={},o=r(t,["name"]);return o!=null&&l(n,["_url","name"],Re(e,o)),n}function Ss(e,t){const n={},o=r(t,["name"]);return o!=null&&l(n,["_url","name"],Re(e,o)),n}function Cs(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&l(t,["sdkHttpResponse"],n);const o=r(e,["name"]);o!=null&&l(t,["name"],o);const i=r(e,["done"]);i!=null&&l(t,["done"],i);const s=r(e,["error"]);return s!=null&&l(t,["error"],s),t}function Is(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&l(t,["sdkHttpResponse"],n);const o=r(e,["name"]);o!=null&&l(t,["name"],o);const i=r(e,["done"]);i!=null&&l(t,["done"],i);const s=r(e,["error"]);return s!=null&&l(t,["error"],s),t}function As(e,t){const n={},o=r(t,["contents"]);if(o!=null){let s=Ft(e,o);Array.isArray(s)&&(s=s.map(a=>a)),l(n,["requests[]","request","content"],s)}const i=r(t,["config"]);return i!=null&&(l(n,["_self"],ws(i,n)),Er(n,{"requests[].*":"requests[].request.*"})),n}function ws(e,t){const n={},o=r(e,["taskType"]);t!==void 0&&o!=null&&l(t,["requests[]","taskType"],o);const i=r(e,["title"]);t!==void 0&&i!=null&&l(t,["requests[]","title"],i);const s=r(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&l(t,["requests[]","outputDimensionality"],s),r(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Rs(e,t){const n={},o=r(t,["fileName"]);o!=null&&l(n,["file_name"],o);const i=r(t,["inlinedRequests"]);return i!=null&&l(n,["requests"],As(e,i)),n}function Ps(e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["fileUri"]);n!=null&&l(t,["fileUri"],n);const o=r(e,["mimeType"]);return o!=null&&l(t,["mimeType"],o),t}function Ns(e){const t={},n=r(e,["id"]);n!=null&&l(t,["id"],n);const o=r(e,["args"]);o!=null&&l(t,["args"],o);const i=r(e,["name"]);if(i!=null&&l(t,["name"],i),r(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(r(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Ms(e){const t={},n=r(e,["allowedFunctionNames"]);n!=null&&l(t,["allowedFunctionNames"],n);const o=r(e,["mode"]);if(o!=null&&l(t,["mode"],o),r(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function ks(e,t,n){const o={},i=r(t,["systemInstruction"]);n!==void 0&&i!=null&&l(n,["systemInstruction"],di(B(i)));const s=r(t,["temperature"]);s!=null&&l(o,["temperature"],s);const a=r(t,["topP"]);a!=null&&l(o,["topP"],a);const u=r(t,["topK"]);u!=null&&l(o,["topK"],u);const d=r(t,["candidateCount"]);d!=null&&l(o,["candidateCount"],d);const c=r(t,["maxOutputTokens"]);c!=null&&l(o,["maxOutputTokens"],c);const f=r(t,["stopSequences"]);f!=null&&l(o,["stopSequences"],f);const p=r(t,["responseLogprobs"]);p!=null&&l(o,["responseLogprobs"],p);const h=r(t,["logprobs"]);h!=null&&l(o,["logprobs"],h);const m=r(t,["presencePenalty"]);m!=null&&l(o,["presencePenalty"],m);const g=r(t,["frequencyPenalty"]);g!=null&&l(o,["frequencyPenalty"],g);const v=r(t,["seed"]);v!=null&&l(o,["seed"],v);const y=r(t,["responseMimeType"]);y!=null&&l(o,["responseMimeType"],y);const E=r(t,["responseSchema"]);E!=null&&l(o,["responseSchema"],Gt(E));const S=r(t,["responseJsonSchema"]);if(S!=null&&l(o,["responseJsonSchema"],S),r(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=r(t,["safetySettings"]);if(n!==void 0&&C!=null){let J=C;Array.isArray(J)&&(J=J.map(H=>Zs(H))),l(n,["safetySettings"],J)}const I=r(t,["tools"]);if(n!==void 0&&I!=null){let J=we(I);Array.isArray(J)&&(J=J.map(H=>Ks(Ae(H)))),l(n,["tools"],J)}const _=r(t,["toolConfig"]);if(n!==void 0&&_!=null&&l(n,["toolConfig"],Ws(_)),r(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=r(t,["cachedContent"]);n!==void 0&&R!=null&&l(n,["cachedContent"],le(e,R));const M=r(t,["responseModalities"]);M!=null&&l(o,["responseModalities"],M);const L=r(t,["mediaResolution"]);L!=null&&l(o,["mediaResolution"],L);const w=r(t,["speechConfig"]);if(w!=null&&l(o,["speechConfig"],Vt(w)),r(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const x=r(t,["thinkingConfig"]);x!=null&&l(o,["thinkingConfig"],x);const G=r(t,["imageConfig"]);G!=null&&l(o,["imageConfig"],Fs(G));const K=r(t,["enableEnhancedCivicAnswers"]);if(K!=null&&l(o,["enableEnhancedCivicAnswers"],K),r(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function xs(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&l(t,["sdkHttpResponse"],n);const o=r(e,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(c=>hs(c))),l(t,["candidates"],d)}const i=r(e,["modelVersion"]);i!=null&&l(t,["modelVersion"],i);const s=r(e,["promptFeedback"]);s!=null&&l(t,["promptFeedback"],s);const a=r(e,["responseId"]);a!=null&&l(t,["responseId"],a);const u=r(e,["usageMetadata"]);return u!=null&&l(t,["usageMetadata"],u),t}function Ds(e,t){const n={},o=r(t,["name"]);return o!=null&&l(n,["_url","name"],Re(e,o)),n}function Us(e,t){const n={},o=r(t,["name"]);return o!=null&&l(n,["_url","name"],Re(e,o)),n}function Ls(e){const t={};if(r(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=r(e,["enableWidget"]);return n!=null&&l(t,["enableWidget"],n),t}function bs(e){const t={};if(r(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(r(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=r(e,["timeRangeFilter"]);return n!=null&&l(t,["timeRangeFilter"],n),t}function Fs(e){const t={},n=r(e,["aspectRatio"]);n!=null&&l(t,["aspectRatio"],n);const o=r(e,["imageSize"]);if(o!=null&&l(t,["imageSize"],o),r(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(r(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(r(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function Gs(e,t){const n={},o=r(t,["model"]);o!=null&&l(n,["request","model"],D(e,o));const i=r(t,["contents"]);if(i!=null){let u=X(i);Array.isArray(u)&&(u=u.map(d=>di(d))),l(n,["request","contents"],u)}const s=r(t,["metadata"]);s!=null&&l(n,["metadata"],s);const a=r(t,["config"]);return a!=null&&l(n,["request","generationConfig"],ks(e,a,r(n,["request"],{}))),n}function Vs(e){const t={},n=r(e,["response"]);n!=null&&l(t,["response"],xs(n));const o=r(e,["metadata"]);o!=null&&l(t,["metadata"],o);const i=r(e,["error"]);return i!=null&&l(t,["error"],i),t}function $s(e,t){const n={},o=r(e,["pageSize"]);t!==void 0&&o!=null&&l(t,["_query","pageSize"],o);const i=r(e,["pageToken"]);if(t!==void 0&&i!=null&&l(t,["_query","pageToken"],i),r(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function zs(e,t){const n={},o=r(e,["pageSize"]);t!==void 0&&o!=null&&l(t,["_query","pageSize"],o);const i=r(e,["pageToken"]);t!==void 0&&i!=null&&l(t,["_query","pageToken"],i);const s=r(e,["filter"]);return t!==void 0&&s!=null&&l(t,["_query","filter"],s),n}function qs(e){const t={},n=r(e,["config"]);return n!=null&&$s(n,t),t}function Hs(e){const t={},n=r(e,["config"]);return n!=null&&zs(n,t),t}function Bs(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&l(t,["sdkHttpResponse"],n);const o=r(e,["nextPageToken"]);o!=null&&l(t,["nextPageToken"],o);const i=r(e,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Be(a))),l(t,["batchJobs"],s)}return t}function Js(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&l(t,["sdkHttpResponse"],n);const o=r(e,["nextPageToken"]);o!=null&&l(t,["nextPageToken"],o);const i=r(e,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Et(a))),l(t,["batchJobs"],s)}return t}function Os(e){const t={},n=r(e,["mediaResolution"]);n!=null&&l(t,["mediaResolution"],n);const o=r(e,["codeExecutionResult"]);o!=null&&l(t,["codeExecutionResult"],o);const i=r(e,["executableCode"]);i!=null&&l(t,["executableCode"],i);const s=r(e,["fileData"]);s!=null&&l(t,["fileData"],Ps(s));const a=r(e,["functionCall"]);a!=null&&l(t,["functionCall"],Ns(a));const u=r(e,["functionResponse"]);u!=null&&l(t,["functionResponse"],u);const d=r(e,["inlineData"]);d!=null&&l(t,["inlineData"],ds(d));const c=r(e,["text"]);c!=null&&l(t,["text"],c);const f=r(e,["thought"]);f!=null&&l(t,["thought"],f);const p=r(e,["thoughtSignature"]);p!=null&&l(t,["thoughtSignature"],p);const h=r(e,["videoMetadata"]);return h!=null&&l(t,["videoMetadata"],h),t}function Zs(e){const t={},n=r(e,["category"]);if(n!=null&&l(t,["category"],n),r(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=r(e,["threshold"]);return o!=null&&l(t,["threshold"],o),t}function Ws(e){const t={},n=r(e,["retrievalConfig"]);n!=null&&l(t,["retrievalConfig"],n);const o=r(e,["functionCallingConfig"]);return o!=null&&l(t,["functionCallingConfig"],Ms(o)),t}function Ks(e){const t={};if(r(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=r(e,["computerUse"]);n!=null&&l(t,["computerUse"],n);const o=r(e,["fileSearch"]);o!=null&&l(t,["fileSearch"],o);const i=r(e,["codeExecution"]);if(i!=null&&l(t,["codeExecution"],i),r(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=r(e,["functionDeclarations"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(p=>p)),l(t,["functionDeclarations"],f)}const a=r(e,["googleMaps"]);a!=null&&l(t,["googleMaps"],Ls(a));const u=r(e,["googleSearch"]);u!=null&&l(t,["googleSearch"],bs(u));const d=r(e,["googleSearchRetrieval"]);d!=null&&l(t,["googleSearchRetrieval"],d);const c=r(e,["urlContext"]);return c!=null&&l(t,["urlContext"],c),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var re;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(re||(re={}));class he{constructor(t,n,o,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,o,i)}init(t,n,o){var i,s;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!o||Object.keys(o).length===0?a={config:{}}:typeof o=="object"?a=Object.assign({},o):a=o,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(s=(i=a.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ys extends se{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new he(re.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=fo(this.apiClient,t),o=n._url,i=A("{model}:batchGenerateContent",o),u=n.batch.inputConfig.requests,d=u.requests,c=[];for(const f of d){const p=Object.assign({},f);if(p.systemInstruction){const h=p.systemInstruction;delete p.systemInstruction;const m=p.request;m.systemInstruction=h,p.request=m}c.push(p)}return u.requests=c,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const o=n?Object.assign({},n):{},i=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${i}`),o.dest===void 0){const s=this.getGcsUri(t),a=this.getBigqueryUri(t);if(s)s.endsWith(".jsonl")?o.dest=`${s.slice(0,-6)}/dest`:o.dest=`${s}_dest_${i}`;else if(a)o.dest=`${a}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=vs(this.apiClient,t);return u=A("batchPredictionJobs",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Et(f))}else{const c=fo(this.apiClient,t);return u=A("{model}:batchGenerateContent",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>Be(f))}}async createEmbeddingsInternal(t){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ts(this.apiClient,t);return s=A("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>Be(d))}}async get(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Us(this.apiClient,t);return u=A("batchPredictionJobs/{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Et(f))}else{const c=Ds(this.apiClient,t);return u=A("batches/{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>Be(f))}}async cancel(t){var n,o,i,s;let a="",u={};if(this.apiClient.isVertexAI()){const d=ps(this.apiClient,t);a=A("batchPredictionJobs/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}else{const d=fs(this.apiClient,t);a=A("batches/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Hs(t);return u=A("batchPredictionJobs",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Js(f),h=new lo;return Object.assign(h,p),h})}else{const c=qs(t);return u=A("batches",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Bs(f),h=new lo;return Object.assign(h,p),h})}}async delete(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Ss(this.apiClient,t);return u=A("batchPredictionJobs/{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>Is(f))}else{const c=Es(this.apiClient,t);return u=A("batches/{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>Cs(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xs(e){const t={},n=r(e,["data"]);if(n!=null&&l(t,["data"],n),r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=r(e,["mimeType"]);return o!=null&&l(t,["mimeType"],o),t}function po(e){const t={},n=r(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Tl(s))),l(t,["parts"],i)}const o=r(e,["role"]);return o!=null&&l(t,["role"],o),t}function Qs(e,t){const n={},o=r(e,["ttl"]);t!==void 0&&o!=null&&l(t,["ttl"],o);const i=r(e,["expireTime"]);t!==void 0&&i!=null&&l(t,["expireTime"],i);const s=r(e,["displayName"]);t!==void 0&&s!=null&&l(t,["displayName"],s);const a=r(e,["contents"]);if(t!==void 0&&a!=null){let f=X(a);Array.isArray(f)&&(f=f.map(p=>po(p))),l(t,["contents"],f)}const u=r(e,["systemInstruction"]);t!==void 0&&u!=null&&l(t,["systemInstruction"],po(B(u)));const d=r(e,["tools"]);if(t!==void 0&&d!=null){let f=d;Array.isArray(f)&&(f=f.map(p=>Sl(p))),l(t,["tools"],f)}const c=r(e,["toolConfig"]);if(t!==void 0&&c!=null&&l(t,["toolConfig"],El(c)),r(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function js(e,t){const n={},o=r(e,["ttl"]);t!==void 0&&o!=null&&l(t,["ttl"],o);const i=r(e,["expireTime"]);t!==void 0&&i!=null&&l(t,["expireTime"],i);const s=r(e,["displayName"]);t!==void 0&&s!=null&&l(t,["displayName"],s);const a=r(e,["contents"]);if(t!==void 0&&a!=null){let p=X(a);Array.isArray(p)&&(p=p.map(h=>h)),l(t,["contents"],p)}const u=r(e,["systemInstruction"]);t!==void 0&&u!=null&&l(t,["systemInstruction"],B(u));const d=r(e,["tools"]);if(t!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(h=>Cl(h))),l(t,["tools"],p)}const c=r(e,["toolConfig"]);t!==void 0&&c!=null&&l(t,["toolConfig"],c);const f=r(e,["kmsKeyName"]);return t!==void 0&&f!=null&&l(t,["encryption_spec","kmsKeyName"],f),n}function el(e,t){const n={},o=r(t,["model"]);o!=null&&l(n,["model"],jo(e,o));const i=r(t,["config"]);return i!=null&&Qs(i,n),n}function tl(e,t){const n={},o=r(t,["model"]);o!=null&&l(n,["model"],jo(e,o));const i=r(t,["config"]);return i!=null&&js(i,n),n}function nl(e,t){const n={},o=r(t,["name"]);return o!=null&&l(n,["_url","name"],le(e,o)),n}function ol(e,t){const n={},o=r(t,["name"]);return o!=null&&l(n,["_url","name"],le(e,o)),n}function il(e){const t={},n=r(e,["sdkHttpResponse"]);return n!=null&&l(t,["sdkHttpResponse"],n),t}function rl(e){const t={},n=r(e,["sdkHttpResponse"]);return n!=null&&l(t,["sdkHttpResponse"],n),t}function sl(e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["fileUri"]);n!=null&&l(t,["fileUri"],n);const o=r(e,["mimeType"]);return o!=null&&l(t,["mimeType"],o),t}function ll(e){const t={},n=r(e,["id"]);n!=null&&l(t,["id"],n);const o=r(e,["args"]);o!=null&&l(t,["args"],o);const i=r(e,["name"]);if(i!=null&&l(t,["name"],i),r(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(r(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function al(e){const t={},n=r(e,["allowedFunctionNames"]);n!=null&&l(t,["allowedFunctionNames"],n);const o=r(e,["mode"]);if(o!=null&&l(t,["mode"],o),r(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function ul(e){const t={},n=r(e,["description"]);n!=null&&l(t,["description"],n);const o=r(e,["name"]);o!=null&&l(t,["name"],o);const i=r(e,["parameters"]);i!=null&&l(t,["parameters"],i);const s=r(e,["parametersJsonSchema"]);s!=null&&l(t,["parametersJsonSchema"],s);const a=r(e,["response"]);a!=null&&l(t,["response"],a);const u=r(e,["responseJsonSchema"]);if(u!=null&&l(t,["responseJsonSchema"],u),r(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function cl(e,t){const n={},o=r(t,["name"]);return o!=null&&l(n,["_url","name"],le(e,o)),n}function dl(e,t){const n={},o=r(t,["name"]);return o!=null&&l(n,["_url","name"],le(e,o)),n}function fl(e){const t={};if(r(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=r(e,["enableWidget"]);return n!=null&&l(t,["enableWidget"],n),t}function pl(e){const t={};if(r(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(r(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=r(e,["timeRangeFilter"]);return n!=null&&l(t,["timeRangeFilter"],n),t}function hl(e,t){const n={},o=r(e,["pageSize"]);t!==void 0&&o!=null&&l(t,["_query","pageSize"],o);const i=r(e,["pageToken"]);return t!==void 0&&i!=null&&l(t,["_query","pageToken"],i),n}function ml(e,t){const n={},o=r(e,["pageSize"]);t!==void 0&&o!=null&&l(t,["_query","pageSize"],o);const i=r(e,["pageToken"]);return t!==void 0&&i!=null&&l(t,["_query","pageToken"],i),n}function gl(e){const t={},n=r(e,["config"]);return n!=null&&hl(n,t),t}function yl(e){const t={},n=r(e,["config"]);return n!=null&&ml(n,t),t}function vl(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&l(t,["sdkHttpResponse"],n);const o=r(e,["nextPageToken"]);o!=null&&l(t,["nextPageToken"],o);const i=r(e,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),l(t,["cachedContents"],s)}return t}function _l(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&l(t,["sdkHttpResponse"],n);const o=r(e,["nextPageToken"]);o!=null&&l(t,["nextPageToken"],o);const i=r(e,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),l(t,["cachedContents"],s)}return t}function Tl(e){const t={},n=r(e,["mediaResolution"]);n!=null&&l(t,["mediaResolution"],n);const o=r(e,["codeExecutionResult"]);o!=null&&l(t,["codeExecutionResult"],o);const i=r(e,["executableCode"]);i!=null&&l(t,["executableCode"],i);const s=r(e,["fileData"]);s!=null&&l(t,["fileData"],sl(s));const a=r(e,["functionCall"]);a!=null&&l(t,["functionCall"],ll(a));const u=r(e,["functionResponse"]);u!=null&&l(t,["functionResponse"],u);const d=r(e,["inlineData"]);d!=null&&l(t,["inlineData"],Xs(d));const c=r(e,["text"]);c!=null&&l(t,["text"],c);const f=r(e,["thought"]);f!=null&&l(t,["thought"],f);const p=r(e,["thoughtSignature"]);p!=null&&l(t,["thoughtSignature"],p);const h=r(e,["videoMetadata"]);return h!=null&&l(t,["videoMetadata"],h),t}function El(e){const t={},n=r(e,["retrievalConfig"]);n!=null&&l(t,["retrievalConfig"],n);const o=r(e,["functionCallingConfig"]);return o!=null&&l(t,["functionCallingConfig"],al(o)),t}function Sl(e){const t={};if(r(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=r(e,["computerUse"]);n!=null&&l(t,["computerUse"],n);const o=r(e,["fileSearch"]);o!=null&&l(t,["fileSearch"],o);const i=r(e,["codeExecution"]);if(i!=null&&l(t,["codeExecution"],i),r(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=r(e,["functionDeclarations"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(p=>p)),l(t,["functionDeclarations"],f)}const a=r(e,["googleMaps"]);a!=null&&l(t,["googleMaps"],fl(a));const u=r(e,["googleSearch"]);u!=null&&l(t,["googleSearch"],pl(u));const d=r(e,["googleSearchRetrieval"]);d!=null&&l(t,["googleSearchRetrieval"],d);const c=r(e,["urlContext"]);return c!=null&&l(t,["urlContext"],c),t}function Cl(e){const t={},n=r(e,["retrieval"]);n!=null&&l(t,["retrieval"],n);const o=r(e,["computerUse"]);if(o!=null&&l(t,["computerUse"],o),r(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=r(e,["codeExecution"]);i!=null&&l(t,["codeExecution"],i);const s=r(e,["enterpriseWebSearch"]);s!=null&&l(t,["enterpriseWebSearch"],s);const a=r(e,["functionDeclarations"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(h=>ul(h))),l(t,["functionDeclarations"],p)}const u=r(e,["googleMaps"]);u!=null&&l(t,["googleMaps"],u);const d=r(e,["googleSearch"]);d!=null&&l(t,["googleSearch"],d);const c=r(e,["googleSearchRetrieval"]);c!=null&&l(t,["googleSearchRetrieval"],c);const f=r(e,["urlContext"]);return f!=null&&l(t,["urlContext"],f),t}function Il(e,t){const n={},o=r(e,["ttl"]);t!==void 0&&o!=null&&l(t,["ttl"],o);const i=r(e,["expireTime"]);return t!==void 0&&i!=null&&l(t,["expireTime"],i),n}function Al(e,t){const n={},o=r(e,["ttl"]);t!==void 0&&o!=null&&l(t,["ttl"],o);const i=r(e,["expireTime"]);return t!==void 0&&i!=null&&l(t,["expireTime"],i),n}function wl(e,t){const n={},o=r(t,["name"]);o!=null&&l(n,["_url","name"],le(e,o));const i=r(t,["config"]);return i!=null&&Il(i,n),n}function Rl(e,t){const n={},o=r(t,["name"]);o!=null&&l(n,["_url","name"],le(e,o));const i=r(t,["config"]);return i!=null&&Al(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pl extends se{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new he(re.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=tl(this.apiClient,t);return u=A("cachedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const c=el(this.apiClient,t);return u=A("cachedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async get(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=dl(this.apiClient,t);return u=A("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const c=cl(this.apiClient,t);return u=A("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async delete(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=ol(this.apiClient,t);return u=A("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=rl(f),h=new ro;return Object.assign(h,p),h})}else{const c=nl(this.apiClient,t);return u=A("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=il(f),h=new ro;return Object.assign(h,p),h})}}async update(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Rl(this.apiClient,t);return u=A("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const c=wl(this.apiClient,t);return u=A("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async listInternal(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=yl(t);return u=A("cachedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=_l(f),h=new so;return Object.assign(h,p),h})}else{const c=gl(t);return u=A("cachedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=vl(f),h=new so;return Object.assign(h,p),h})}}}function Ke(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n}function ho(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function N(e){return this instanceof N?(this.v=e,this):new N(e)}function ee(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(e,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(m){return function(g){return Promise.resolve(g).then(m,p)}}function u(m,g){o[m]&&(i[m]=function(v){return new Promise(function(y,E){s.push([m,v,y,E])>1||d(m,v)})},g&&(i[m]=g(i[m])))}function d(m,g){try{c(o[m](g))}catch(v){h(s[0][3],v)}}function c(m){m.value instanceof N?Promise.resolve(m.value.v).then(f,p):h(s[0][2],m)}function f(m){d("next",m)}function p(m){d("throw",m)}function h(m,g){m(g),s.shift(),s.length&&d(s[0][0],s[0][1])}}function te(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof ho=="function"?ho(e):e[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(s){n[s]=e[s]&&function(a){return new Promise(function(u,d){a=e[s](a),i(u,d,a.done,a.value)})}}function i(s,a,u,d){Promise.resolve(d).then(function(c){s({value:c,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nl(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:fi(n)}function fi(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function Ml(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function mo(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let o=0;for(;o<n;)if(e[o].role==="user")t.push(e[o]),o++;else{const i=[];let s=!0;for(;o<n&&e[o].role==="model";)i.push(e[o]),s&&!fi(e[o])&&(s=!1),o++;s?t.push(...i):t.pop()}return t}class kl{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new xl(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class xl{constructor(t,n,o,i={},s=[]){this.apiClient=t,this.modelsModule=n,this.model=o,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),Ml(s)}async sendMessage(t){var n;await this.sendPromise;const o=B(t.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,a,u;const d=await i,c=(a=(s=d.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content,f=d.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let h=[];f!=null&&(h=(u=f.slice(p))!==null&&u!==void 0?u:[]);const m=c?[c]:[];this.recordHistory(o,m,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(t){var n;await this.sendPromise;const o=B(t.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,o)}getHistory(t=!1){const n=t?mo(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return ee(this,arguments,function*(){var i,s,a,u,d,c;const f=[];try{for(var p=!0,h=te(t),m;m=yield N(h.next()),i=m.done,!i;p=!0){u=m.value,p=!1;const g=u;if(Nl(g)){const v=(c=(d=g.candidates)===null||d===void 0?void 0:d[0])===null||c===void 0?void 0:c.content;v!==void 0&&f.push(v)}yield yield N(g)}}catch(g){s={error:g}}finally{try{!p&&!i&&(a=h.return)&&(yield N(a.call(h)))}finally{if(s)throw s.error}}this.recordHistory(n,f)})}recordHistory(t,n,o){let i=[];n.length>0&&n.every(s=>s.role!==void 0)?i=n:i.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...mo(o)):this.history.push(t),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class De extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,De.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dl(e){const t={},n=r(e,["file"]);return n!=null&&l(t,["file"],n),t}function Ul(e){const t={},n=r(e,["sdkHttpResponse"]);return n!=null&&l(t,["sdkHttpResponse"],n),t}function Ll(e){const t={},n=r(e,["name"]);return n!=null&&l(t,["_url","file"],ri(n)),t}function bl(e){const t={},n=r(e,["sdkHttpResponse"]);return n!=null&&l(t,["sdkHttpResponse"],n),t}function Fl(e){const t={},n=r(e,["name"]);return n!=null&&l(t,["_url","file"],ri(n)),t}function Gl(e){const t={},n=r(e,["uris"]);return n!=null&&l(t,["uris"],n),t}function Vl(e,t){const n={},o=r(e,["pageSize"]);t!==void 0&&o!=null&&l(t,["_query","pageSize"],o);const i=r(e,["pageToken"]);return t!==void 0&&i!=null&&l(t,["_query","pageToken"],i),n}function $l(e){const t={},n=r(e,["config"]);return n!=null&&Vl(n,t),t}function zl(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&l(t,["sdkHttpResponse"],n);const o=r(e,["nextPageToken"]);o!=null&&l(t,["nextPageToken"],o);const i=r(e,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),l(t,["files"],s)}return t}function ql(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&l(t,["sdkHttpResponse"],n);const o=r(e,["files"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),l(t,["files"],i)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hl extends se{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new he(re.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async registerFiles(t){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(t){return this.registerFilesInternal(t)}async listInternal(t){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=$l(t);return s=A("files",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),i.then(d=>{const c=zl(d),f=new Br;return Object.assign(f,c),f})}}async createInternal(t){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Dl(t);return s=A("upload/v1beta/files",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>{const c=Ul(d),f=new Jr;return Object.assign(f,c),f})}}async get(t){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Fl(t);return s=A("files/{file}",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>d)}}async delete(t){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ll(t);return s=A("files/{file}",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),i.then(d=>{const c=bl(d),f=new Or;return Object.assign(f,c),f})}}async registerFilesInternal(t){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Gl(t);return s=A("files:register",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>{const c=ql(d),f=new Zr;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Je(e){const t={},n=r(e,["data"]);if(n!=null&&l(t,["data"],n),r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=r(e,["mimeType"]);return o!=null&&l(t,["mimeType"],o),t}function Bl(e){const t={},n=r(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>sa(s))),l(t,["parts"],i)}const o=r(e,["role"]);return o!=null&&l(t,["role"],o),t}function Jl(e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["fileUri"]);n!=null&&l(t,["fileUri"],n);const o=r(e,["mimeType"]);return o!=null&&l(t,["mimeType"],o),t}function Ol(e){const t={},n=r(e,["id"]);n!=null&&l(t,["id"],n);const o=r(e,["args"]);o!=null&&l(t,["args"],o);const i=r(e,["name"]);if(i!=null&&l(t,["name"],i),r(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(r(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Zl(e){const t={},n=r(e,["description"]);n!=null&&l(t,["description"],n);const o=r(e,["name"]);o!=null&&l(t,["name"],o);const i=r(e,["parameters"]);i!=null&&l(t,["parameters"],i);const s=r(e,["parametersJsonSchema"]);s!=null&&l(t,["parametersJsonSchema"],s);const a=r(e,["response"]);a!=null&&l(t,["response"],a);const u=r(e,["responseJsonSchema"]);if(u!=null&&l(t,["responseJsonSchema"],u),r(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function Wl(e){const t={},n=r(e,["modelSelectionConfig"]);n!=null&&l(t,["modelConfig"],n);const o=r(e,["responseJsonSchema"]);o!=null&&l(t,["responseJsonSchema"],o);const i=r(e,["audioTimestamp"]);i!=null&&l(t,["audioTimestamp"],i);const s=r(e,["candidateCount"]);s!=null&&l(t,["candidateCount"],s);const a=r(e,["enableAffectiveDialog"]);a!=null&&l(t,["enableAffectiveDialog"],a);const u=r(e,["frequencyPenalty"]);u!=null&&l(t,["frequencyPenalty"],u);const d=r(e,["logprobs"]);d!=null&&l(t,["logprobs"],d);const c=r(e,["maxOutputTokens"]);c!=null&&l(t,["maxOutputTokens"],c);const f=r(e,["mediaResolution"]);f!=null&&l(t,["mediaResolution"],f);const p=r(e,["presencePenalty"]);p!=null&&l(t,["presencePenalty"],p);const h=r(e,["responseLogprobs"]);h!=null&&l(t,["responseLogprobs"],h);const m=r(e,["responseMimeType"]);m!=null&&l(t,["responseMimeType"],m);const g=r(e,["responseModalities"]);g!=null&&l(t,["responseModalities"],g);const v=r(e,["responseSchema"]);v!=null&&l(t,["responseSchema"],v);const y=r(e,["routingConfig"]);y!=null&&l(t,["routingConfig"],y);const E=r(e,["seed"]);E!=null&&l(t,["seed"],E);const S=r(e,["speechConfig"]);S!=null&&l(t,["speechConfig"],S);const C=r(e,["stopSequences"]);C!=null&&l(t,["stopSequences"],C);const I=r(e,["temperature"]);I!=null&&l(t,["temperature"],I);const _=r(e,["thinkingConfig"]);_!=null&&l(t,["thinkingConfig"],_);const R=r(e,["topK"]);R!=null&&l(t,["topK"],R);const M=r(e,["topP"]);if(M!=null&&l(t,["topP"],M),r(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function Kl(e){const t={};if(r(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=r(e,["enableWidget"]);return n!=null&&l(t,["enableWidget"],n),t}function Yl(e){const t={};if(r(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(r(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=r(e,["timeRangeFilter"]);return n!=null&&l(t,["timeRangeFilter"],n),t}function Xl(e,t){const n={},o=r(e,["generationConfig"]);t!==void 0&&o!=null&&l(t,["setup","generationConfig"],o);const i=r(e,["responseModalities"]);t!==void 0&&i!=null&&l(t,["setup","generationConfig","responseModalities"],i);const s=r(e,["temperature"]);t!==void 0&&s!=null&&l(t,["setup","generationConfig","temperature"],s);const a=r(e,["topP"]);t!==void 0&&a!=null&&l(t,["setup","generationConfig","topP"],a);const u=r(e,["topK"]);t!==void 0&&u!=null&&l(t,["setup","generationConfig","topK"],u);const d=r(e,["maxOutputTokens"]);t!==void 0&&d!=null&&l(t,["setup","generationConfig","maxOutputTokens"],d);const c=r(e,["mediaResolution"]);t!==void 0&&c!=null&&l(t,["setup","generationConfig","mediaResolution"],c);const f=r(e,["seed"]);t!==void 0&&f!=null&&l(t,["setup","generationConfig","seed"],f);const p=r(e,["speechConfig"]);t!==void 0&&p!=null&&l(t,["setup","generationConfig","speechConfig"],$t(p));const h=r(e,["thinkingConfig"]);t!==void 0&&h!=null&&l(t,["setup","generationConfig","thinkingConfig"],h);const m=r(e,["enableAffectiveDialog"]);t!==void 0&&m!=null&&l(t,["setup","generationConfig","enableAffectiveDialog"],m);const g=r(e,["systemInstruction"]);t!==void 0&&g!=null&&l(t,["setup","systemInstruction"],Bl(B(g)));const v=r(e,["tools"]);if(t!==void 0&&v!=null){let R=we(v);Array.isArray(R)&&(R=R.map(M=>aa(Ae(M)))),l(t,["setup","tools"],R)}const y=r(e,["sessionResumption"]);t!==void 0&&y!=null&&l(t,["setup","sessionResumption"],la(y));const E=r(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&l(t,["setup","inputAudioTranscription"],E);const S=r(e,["outputAudioTranscription"]);t!==void 0&&S!=null&&l(t,["setup","outputAudioTranscription"],S);const C=r(e,["realtimeInputConfig"]);t!==void 0&&C!=null&&l(t,["setup","realtimeInputConfig"],C);const I=r(e,["contextWindowCompression"]);t!==void 0&&I!=null&&l(t,["setup","contextWindowCompression"],I);const _=r(e,["proactivity"]);if(t!==void 0&&_!=null&&l(t,["setup","proactivity"],_),r(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Ql(e,t){const n={},o=r(e,["generationConfig"]);t!==void 0&&o!=null&&l(t,["setup","generationConfig"],Wl(o));const i=r(e,["responseModalities"]);t!==void 0&&i!=null&&l(t,["setup","generationConfig","responseModalities"],i);const s=r(e,["temperature"]);t!==void 0&&s!=null&&l(t,["setup","generationConfig","temperature"],s);const a=r(e,["topP"]);t!==void 0&&a!=null&&l(t,["setup","generationConfig","topP"],a);const u=r(e,["topK"]);t!==void 0&&u!=null&&l(t,["setup","generationConfig","topK"],u);const d=r(e,["maxOutputTokens"]);t!==void 0&&d!=null&&l(t,["setup","generationConfig","maxOutputTokens"],d);const c=r(e,["mediaResolution"]);t!==void 0&&c!=null&&l(t,["setup","generationConfig","mediaResolution"],c);const f=r(e,["seed"]);t!==void 0&&f!=null&&l(t,["setup","generationConfig","seed"],f);const p=r(e,["speechConfig"]);t!==void 0&&p!=null&&l(t,["setup","generationConfig","speechConfig"],$t(p));const h=r(e,["thinkingConfig"]);t!==void 0&&h!=null&&l(t,["setup","generationConfig","thinkingConfig"],h);const m=r(e,["enableAffectiveDialog"]);t!==void 0&&m!=null&&l(t,["setup","generationConfig","enableAffectiveDialog"],m);const g=r(e,["systemInstruction"]);t!==void 0&&g!=null&&l(t,["setup","systemInstruction"],B(g));const v=r(e,["tools"]);if(t!==void 0&&v!=null){let M=we(v);Array.isArray(M)&&(M=M.map(L=>ua(Ae(L)))),l(t,["setup","tools"],M)}const y=r(e,["sessionResumption"]);t!==void 0&&y!=null&&l(t,["setup","sessionResumption"],y);const E=r(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&l(t,["setup","inputAudioTranscription"],E);const S=r(e,["outputAudioTranscription"]);t!==void 0&&S!=null&&l(t,["setup","outputAudioTranscription"],S);const C=r(e,["realtimeInputConfig"]);t!==void 0&&C!=null&&l(t,["setup","realtimeInputConfig"],C);const I=r(e,["contextWindowCompression"]);t!==void 0&&I!=null&&l(t,["setup","contextWindowCompression"],I);const _=r(e,["proactivity"]);t!==void 0&&_!=null&&l(t,["setup","proactivity"],_);const R=r(e,["explicitVadSignal"]);return t!==void 0&&R!=null&&l(t,["setup","explicitVadSignal"],R),n}function jl(e,t){const n={},o=r(t,["model"]);o!=null&&l(n,["setup","model"],D(e,o));const i=r(t,["config"]);return i!=null&&l(n,["config"],Xl(i,n)),n}function ea(e,t){const n={},o=r(t,["model"]);o!=null&&l(n,["setup","model"],D(e,o));const i=r(t,["config"]);return i!=null&&l(n,["config"],Ql(i,n)),n}function ta(e){const t={},n=r(e,["musicGenerationConfig"]);return n!=null&&l(t,["musicGenerationConfig"],n),t}function na(e){const t={},n=r(e,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>i)),l(t,["weightedPrompts"],o)}return t}function oa(e){const t={},n=r(e,["media"]);if(n!=null){let c=ei(n);Array.isArray(c)&&(c=c.map(f=>Je(f))),l(t,["mediaChunks"],c)}const o=r(e,["audio"]);o!=null&&l(t,["audio"],Je(ni(o)));const i=r(e,["audioStreamEnd"]);i!=null&&l(t,["audioStreamEnd"],i);const s=r(e,["video"]);s!=null&&l(t,["video"],Je(ti(s)));const a=r(e,["text"]);a!=null&&l(t,["text"],a);const u=r(e,["activityStart"]);u!=null&&l(t,["activityStart"],u);const d=r(e,["activityEnd"]);return d!=null&&l(t,["activityEnd"],d),t}function ia(e){const t={},n=r(e,["media"]);if(n!=null){let c=ei(n);Array.isArray(c)&&(c=c.map(f=>f)),l(t,["mediaChunks"],c)}const o=r(e,["audio"]);o!=null&&l(t,["audio"],ni(o));const i=r(e,["audioStreamEnd"]);i!=null&&l(t,["audioStreamEnd"],i);const s=r(e,["video"]);s!=null&&l(t,["video"],ti(s));const a=r(e,["text"]);a!=null&&l(t,["text"],a);const u=r(e,["activityStart"]);u!=null&&l(t,["activityStart"],u);const d=r(e,["activityEnd"]);return d!=null&&l(t,["activityEnd"],d),t}function ra(e){const t={},n=r(e,["setupComplete"]);n!=null&&l(t,["setupComplete"],n);const o=r(e,["serverContent"]);o!=null&&l(t,["serverContent"],o);const i=r(e,["toolCall"]);i!=null&&l(t,["toolCall"],i);const s=r(e,["toolCallCancellation"]);s!=null&&l(t,["toolCallCancellation"],s);const a=r(e,["usageMetadata"]);a!=null&&l(t,["usageMetadata"],ca(a));const u=r(e,["goAway"]);u!=null&&l(t,["goAway"],u);const d=r(e,["sessionResumptionUpdate"]);d!=null&&l(t,["sessionResumptionUpdate"],d);const c=r(e,["voiceActivityDetectionSignal"]);c!=null&&l(t,["voiceActivityDetectionSignal"],c);const f=r(e,["voiceActivity"]);return f!=null&&l(t,["voiceActivity"],da(f)),t}function sa(e){const t={},n=r(e,["mediaResolution"]);n!=null&&l(t,["mediaResolution"],n);const o=r(e,["codeExecutionResult"]);o!=null&&l(t,["codeExecutionResult"],o);const i=r(e,["executableCode"]);i!=null&&l(t,["executableCode"],i);const s=r(e,["fileData"]);s!=null&&l(t,["fileData"],Jl(s));const a=r(e,["functionCall"]);a!=null&&l(t,["functionCall"],Ol(a));const u=r(e,["functionResponse"]);u!=null&&l(t,["functionResponse"],u);const d=r(e,["inlineData"]);d!=null&&l(t,["inlineData"],Je(d));const c=r(e,["text"]);c!=null&&l(t,["text"],c);const f=r(e,["thought"]);f!=null&&l(t,["thought"],f);const p=r(e,["thoughtSignature"]);p!=null&&l(t,["thoughtSignature"],p);const h=r(e,["videoMetadata"]);return h!=null&&l(t,["videoMetadata"],h),t}function la(e){const t={},n=r(e,["handle"]);if(n!=null&&l(t,["handle"],n),r(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function aa(e){const t={};if(r(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=r(e,["computerUse"]);n!=null&&l(t,["computerUse"],n);const o=r(e,["fileSearch"]);o!=null&&l(t,["fileSearch"],o);const i=r(e,["codeExecution"]);if(i!=null&&l(t,["codeExecution"],i),r(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=r(e,["functionDeclarations"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(p=>p)),l(t,["functionDeclarations"],f)}const a=r(e,["googleMaps"]);a!=null&&l(t,["googleMaps"],Kl(a));const u=r(e,["googleSearch"]);u!=null&&l(t,["googleSearch"],Yl(u));const d=r(e,["googleSearchRetrieval"]);d!=null&&l(t,["googleSearchRetrieval"],d);const c=r(e,["urlContext"]);return c!=null&&l(t,["urlContext"],c),t}function ua(e){const t={},n=r(e,["retrieval"]);n!=null&&l(t,["retrieval"],n);const o=r(e,["computerUse"]);if(o!=null&&l(t,["computerUse"],o),r(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=r(e,["codeExecution"]);i!=null&&l(t,["codeExecution"],i);const s=r(e,["enterpriseWebSearch"]);s!=null&&l(t,["enterpriseWebSearch"],s);const a=r(e,["functionDeclarations"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(h=>Zl(h))),l(t,["functionDeclarations"],p)}const u=r(e,["googleMaps"]);u!=null&&l(t,["googleMaps"],u);const d=r(e,["googleSearch"]);d!=null&&l(t,["googleSearch"],d);const c=r(e,["googleSearchRetrieval"]);c!=null&&l(t,["googleSearchRetrieval"],c);const f=r(e,["urlContext"]);return f!=null&&l(t,["urlContext"],f),t}function ca(e){const t={},n=r(e,["promptTokenCount"]);n!=null&&l(t,["promptTokenCount"],n);const o=r(e,["cachedContentTokenCount"]);o!=null&&l(t,["cachedContentTokenCount"],o);const i=r(e,["candidatesTokenCount"]);i!=null&&l(t,["responseTokenCount"],i);const s=r(e,["toolUsePromptTokenCount"]);s!=null&&l(t,["toolUsePromptTokenCount"],s);const a=r(e,["thoughtsTokenCount"]);a!=null&&l(t,["thoughtsTokenCount"],a);const u=r(e,["totalTokenCount"]);u!=null&&l(t,["totalTokenCount"],u);const d=r(e,["promptTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>g)),l(t,["promptTokensDetails"],m)}const c=r(e,["cacheTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>g)),l(t,["cacheTokensDetails"],m)}const f=r(e,["candidatesTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>g)),l(t,["responseTokensDetails"],m)}const p=r(e,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>g)),l(t,["toolUsePromptTokensDetails"],m)}const h=r(e,["trafficType"]);return h!=null&&l(t,["trafficType"],h),t}function da(e){const t={},n=r(e,["type"]);return n!=null&&l(t,["voiceActivityType"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fa(e,t){const n={},o=r(e,["data"]);if(o!=null&&l(n,["data"],o),r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(e,["mimeType"]);return i!=null&&l(n,["mimeType"],i),n}function pa(e,t){const n={},o=r(e,["content"]);o!=null&&l(n,["content"],o);const i=r(e,["citationMetadata"]);i!=null&&l(n,["citationMetadata"],ha(i));const s=r(e,["tokenCount"]);s!=null&&l(n,["tokenCount"],s);const a=r(e,["finishReason"]);a!=null&&l(n,["finishReason"],a);const u=r(e,["avgLogprobs"]);u!=null&&l(n,["avgLogprobs"],u);const d=r(e,["groundingMetadata"]);d!=null&&l(n,["groundingMetadata"],d);const c=r(e,["index"]);c!=null&&l(n,["index"],c);const f=r(e,["logprobsResult"]);f!=null&&l(n,["logprobsResult"],f);const p=r(e,["safetyRatings"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>g)),l(n,["safetyRatings"],m)}const h=r(e,["urlContextMetadata"]);return h!=null&&l(n,["urlContextMetadata"],h),n}function ha(e,t){const n={},o=r(e,["citationSources"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),l(n,["citations"],i)}return n}function ma(e,t,n){const o={},i=r(t,["model"]);i!=null&&l(o,["_url","model"],D(e,i));const s=r(t,["contents"]);if(s!=null){let a=X(s);Array.isArray(a)&&(a=a.map(u=>u)),l(o,["contents"],a)}return o}function ga(e,t){const n={},o=r(e,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(e,["tokensInfo"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),l(n,["tokensInfo"],s)}return n}function ya(e,t){const n={},o=r(e,["values"]);o!=null&&l(n,["values"],o);const i=r(e,["statistics"]);return i!=null&&l(n,["statistics"],va(i)),n}function va(e,t){const n={},o=r(e,["truncated"]);o!=null&&l(n,["truncated"],o);const i=r(e,["token_count"]);return i!=null&&l(n,["tokenCount"],i),n}function nt(e,t){const n={},o=r(e,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Ru(a))),l(n,["parts"],s)}const i=r(e,["role"]);return i!=null&&l(n,["role"],i),n}function _a(e,t){const n={},o=r(e,["controlType"]);o!=null&&l(n,["controlType"],o);const i=r(e,["enableControlImageComputation"]);return i!=null&&l(n,["computeControl"],i),n}function Ta(e,t){const n={};if(r(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(r(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(r(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function Ea(e,t,n){const o={},i=r(e,["systemInstruction"]);t!==void 0&&i!=null&&l(t,["systemInstruction"],B(i));const s=r(e,["tools"]);if(t!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>gi(d))),l(t,["tools"],u)}const a=r(e,["generationConfig"]);return t!==void 0&&a!=null&&l(t,["generationConfig"],fu(a)),o}function Sa(e,t,n){const o={},i=r(t,["model"]);i!=null&&l(o,["_url","model"],D(e,i));const s=r(t,["contents"]);if(s!=null){let u=X(s);Array.isArray(u)&&(u=u.map(d=>nt(d))),l(o,["contents"],u)}const a=r(t,["config"]);return a!=null&&Ta(a),o}function Ca(e,t,n){const o={},i=r(t,["model"]);i!=null&&l(o,["_url","model"],D(e,i));const s=r(t,["contents"]);if(s!=null){let u=X(s);Array.isArray(u)&&(u=u.map(d=>d)),l(o,["contents"],u)}const a=r(t,["config"]);return a!=null&&Ea(a,o),o}function Ia(e,t){const n={},o=r(e,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(e,["totalTokens"]);i!=null&&l(n,["totalTokens"],i);const s=r(e,["cachedContentTokenCount"]);return s!=null&&l(n,["cachedContentTokenCount"],s),n}function Aa(e,t){const n={},o=r(e,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(e,["totalTokens"]);return i!=null&&l(n,["totalTokens"],i),n}function wa(e,t,n){const o={},i=r(t,["model"]);return i!=null&&l(o,["_url","name"],D(e,i)),o}function Ra(e,t,n){const o={},i=r(t,["model"]);return i!=null&&l(o,["_url","name"],D(e,i)),o}function Pa(e,t){const n={},o=r(e,["sdkHttpResponse"]);return o!=null&&l(n,["sdkHttpResponse"],o),n}function Na(e,t){const n={},o=r(e,["sdkHttpResponse"]);return o!=null&&l(n,["sdkHttpResponse"],o),n}function Ma(e,t,n){const o={},i=r(e,["outputGcsUri"]);t!==void 0&&i!=null&&l(t,["parameters","storageUri"],i);const s=r(e,["negativePrompt"]);t!==void 0&&s!=null&&l(t,["parameters","negativePrompt"],s);const a=r(e,["numberOfImages"]);t!==void 0&&a!=null&&l(t,["parameters","sampleCount"],a);const u=r(e,["aspectRatio"]);t!==void 0&&u!=null&&l(t,["parameters","aspectRatio"],u);const d=r(e,["guidanceScale"]);t!==void 0&&d!=null&&l(t,["parameters","guidanceScale"],d);const c=r(e,["seed"]);t!==void 0&&c!=null&&l(t,["parameters","seed"],c);const f=r(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&l(t,["parameters","safetySetting"],f);const p=r(e,["personGeneration"]);t!==void 0&&p!=null&&l(t,["parameters","personGeneration"],p);const h=r(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&l(t,["parameters","includeSafetyAttributes"],h);const m=r(e,["includeRaiReason"]);t!==void 0&&m!=null&&l(t,["parameters","includeRaiReason"],m);const g=r(e,["language"]);t!==void 0&&g!=null&&l(t,["parameters","language"],g);const v=r(e,["outputMimeType"]);t!==void 0&&v!=null&&l(t,["parameters","outputOptions","mimeType"],v);const y=r(e,["outputCompressionQuality"]);t!==void 0&&y!=null&&l(t,["parameters","outputOptions","compressionQuality"],y);const E=r(e,["addWatermark"]);t!==void 0&&E!=null&&l(t,["parameters","addWatermark"],E);const S=r(e,["labels"]);t!==void 0&&S!=null&&l(t,["labels"],S);const C=r(e,["editMode"]);t!==void 0&&C!=null&&l(t,["parameters","editMode"],C);const I=r(e,["baseSteps"]);return t!==void 0&&I!=null&&l(t,["parameters","editConfig","baseSteps"],I),o}function ka(e,t,n){const o={},i=r(t,["model"]);i!=null&&l(o,["_url","model"],D(e,i));const s=r(t,["prompt"]);s!=null&&l(o,["instances[0]","prompt"],s);const a=r(t,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(c=>Du(c))),l(o,["instances[0]","referenceImages"],d)}const u=r(t,["config"]);return u!=null&&Ma(u,o),o}function xa(e,t){const n={},o=r(e,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(e,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>ot(a))),l(n,["generatedImages"],s)}return n}function Da(e,t,n){const o={},i=r(e,["taskType"]);t!==void 0&&i!=null&&l(t,["requests[]","taskType"],i);const s=r(e,["title"]);t!==void 0&&s!=null&&l(t,["requests[]","title"],s);const a=r(e,["outputDimensionality"]);if(t!==void 0&&a!=null&&l(t,["requests[]","outputDimensionality"],a),r(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function Ua(e,t,n){const o={},i=r(e,["taskType"]);t!==void 0&&i!=null&&l(t,["instances[]","task_type"],i);const s=r(e,["title"]);t!==void 0&&s!=null&&l(t,["instances[]","title"],s);const a=r(e,["outputDimensionality"]);t!==void 0&&a!=null&&l(t,["parameters","outputDimensionality"],a);const u=r(e,["mimeType"]);t!==void 0&&u!=null&&l(t,["instances[]","mimeType"],u);const d=r(e,["autoTruncate"]);return t!==void 0&&d!=null&&l(t,["parameters","autoTruncate"],d),o}function La(e,t,n){const o={},i=r(t,["model"]);i!=null&&l(o,["_url","model"],D(e,i));const s=r(t,["contents"]);if(s!=null){let d=Ft(e,s);Array.isArray(d)&&(d=d.map(c=>c)),l(o,["requests[]","content"],d)}const a=r(t,["config"]);a!=null&&Da(a,o);const u=r(t,["model"]);return u!==void 0&&l(o,["requests[]","model"],D(e,u)),o}function ba(e,t,n){const o={},i=r(t,["model"]);i!=null&&l(o,["_url","model"],D(e,i));const s=r(t,["contents"]);if(s!=null){let u=Ft(e,s);Array.isArray(u)&&(u=u.map(d=>d)),l(o,["instances[]","content"],u)}const a=r(t,["config"]);return a!=null&&Ua(a,o),o}function Fa(e,t){const n={},o=r(e,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(e,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),l(n,["embeddings"],a)}const s=r(e,["metadata"]);return s!=null&&l(n,["metadata"],s),n}function Ga(e,t){const n={},o=r(e,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(e,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>ya(u))),l(n,["embeddings"],a)}const s=r(e,["metadata"]);return s!=null&&l(n,["metadata"],s),n}function Va(e,t){const n={},o=r(e,["endpoint"]);o!=null&&l(n,["name"],o);const i=r(e,["deployedModelId"]);return i!=null&&l(n,["deployedModelId"],i),n}function $a(e,t){const n={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=r(e,["fileUri"]);o!=null&&l(n,["fileUri"],o);const i=r(e,["mimeType"]);return i!=null&&l(n,["mimeType"],i),n}function za(e,t){const n={},o=r(e,["id"]);o!=null&&l(n,["id"],o);const i=r(e,["args"]);i!=null&&l(n,["args"],i);const s=r(e,["name"]);if(s!=null&&l(n,["name"],s),r(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(r(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function qa(e,t){const n={},o=r(e,["allowedFunctionNames"]);o!=null&&l(n,["allowedFunctionNames"],o);const i=r(e,["mode"]);if(i!=null&&l(n,["mode"],i),r(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function Ha(e,t){const n={},o=r(e,["description"]);o!=null&&l(n,["description"],o);const i=r(e,["name"]);i!=null&&l(n,["name"],i);const s=r(e,["parameters"]);s!=null&&l(n,["parameters"],s);const a=r(e,["parametersJsonSchema"]);a!=null&&l(n,["parametersJsonSchema"],a);const u=r(e,["response"]);u!=null&&l(n,["response"],u);const d=r(e,["responseJsonSchema"]);if(d!=null&&l(n,["responseJsonSchema"],d),r(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function Ba(e,t,n,o){const i={},s=r(t,["systemInstruction"]);n!==void 0&&s!=null&&l(n,["systemInstruction"],nt(B(s)));const a=r(t,["temperature"]);a!=null&&l(i,["temperature"],a);const u=r(t,["topP"]);u!=null&&l(i,["topP"],u);const d=r(t,["topK"]);d!=null&&l(i,["topK"],d);const c=r(t,["candidateCount"]);c!=null&&l(i,["candidateCount"],c);const f=r(t,["maxOutputTokens"]);f!=null&&l(i,["maxOutputTokens"],f);const p=r(t,["stopSequences"]);p!=null&&l(i,["stopSequences"],p);const h=r(t,["responseLogprobs"]);h!=null&&l(i,["responseLogprobs"],h);const m=r(t,["logprobs"]);m!=null&&l(i,["logprobs"],m);const g=r(t,["presencePenalty"]);g!=null&&l(i,["presencePenalty"],g);const v=r(t,["frequencyPenalty"]);v!=null&&l(i,["frequencyPenalty"],v);const y=r(t,["seed"]);y!=null&&l(i,["seed"],y);const E=r(t,["responseMimeType"]);E!=null&&l(i,["responseMimeType"],E);const S=r(t,["responseSchema"]);S!=null&&l(i,["responseSchema"],Gt(S));const C=r(t,["responseJsonSchema"]);if(C!=null&&l(i,["responseJsonSchema"],C),r(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=r(t,["safetySettings"]);if(n!==void 0&&I!=null){let H=I;Array.isArray(H)&&(H=H.map(ge=>Uu(ge))),l(n,["safetySettings"],H)}const _=r(t,["tools"]);if(n!==void 0&&_!=null){let H=we(_);Array.isArray(H)&&(H=H.map(ge=>zu(Ae(ge)))),l(n,["tools"],H)}const R=r(t,["toolConfig"]);if(n!==void 0&&R!=null&&l(n,["toolConfig"],$u(R)),r(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=r(t,["cachedContent"]);n!==void 0&&M!=null&&l(n,["cachedContent"],le(e,M));const L=r(t,["responseModalities"]);L!=null&&l(i,["responseModalities"],L);const w=r(t,["mediaResolution"]);w!=null&&l(i,["mediaResolution"],w);const x=r(t,["speechConfig"]);if(x!=null&&l(i,["speechConfig"],Vt(x)),r(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const G=r(t,["thinkingConfig"]);G!=null&&l(i,["thinkingConfig"],G);const K=r(t,["imageConfig"]);K!=null&&l(i,["imageConfig"],yu(K));const J=r(t,["enableEnhancedCivicAnswers"]);if(J!=null&&l(i,["enableEnhancedCivicAnswers"],J),r(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function Ja(e,t,n,o){const i={},s=r(t,["systemInstruction"]);n!==void 0&&s!=null&&l(n,["systemInstruction"],B(s));const a=r(t,["temperature"]);a!=null&&l(i,["temperature"],a);const u=r(t,["topP"]);u!=null&&l(i,["topP"],u);const d=r(t,["topK"]);d!=null&&l(i,["topK"],d);const c=r(t,["candidateCount"]);c!=null&&l(i,["candidateCount"],c);const f=r(t,["maxOutputTokens"]);f!=null&&l(i,["maxOutputTokens"],f);const p=r(t,["stopSequences"]);p!=null&&l(i,["stopSequences"],p);const h=r(t,["responseLogprobs"]);h!=null&&l(i,["responseLogprobs"],h);const m=r(t,["logprobs"]);m!=null&&l(i,["logprobs"],m);const g=r(t,["presencePenalty"]);g!=null&&l(i,["presencePenalty"],g);const v=r(t,["frequencyPenalty"]);v!=null&&l(i,["frequencyPenalty"],v);const y=r(t,["seed"]);y!=null&&l(i,["seed"],y);const E=r(t,["responseMimeType"]);E!=null&&l(i,["responseMimeType"],E);const S=r(t,["responseSchema"]);S!=null&&l(i,["responseSchema"],Gt(S));const C=r(t,["responseJsonSchema"]);C!=null&&l(i,["responseJsonSchema"],C);const I=r(t,["routingConfig"]);I!=null&&l(i,["routingConfig"],I);const _=r(t,["modelSelectionConfig"]);_!=null&&l(i,["modelConfig"],_);const R=r(t,["safetySettings"]);if(n!==void 0&&R!=null){let ie=R;Array.isArray(ie)&&(ie=ie.map(ft=>ft)),l(n,["safetySettings"],ie)}const M=r(t,["tools"]);if(n!==void 0&&M!=null){let ie=we(M);Array.isArray(ie)&&(ie=ie.map(ft=>gi(Ae(ft)))),l(n,["tools"],ie)}const L=r(t,["toolConfig"]);n!==void 0&&L!=null&&l(n,["toolConfig"],L);const w=r(t,["labels"]);n!==void 0&&w!=null&&l(n,["labels"],w);const x=r(t,["cachedContent"]);n!==void 0&&x!=null&&l(n,["cachedContent"],le(e,x));const G=r(t,["responseModalities"]);G!=null&&l(i,["responseModalities"],G);const K=r(t,["mediaResolution"]);K!=null&&l(i,["mediaResolution"],K);const J=r(t,["speechConfig"]);J!=null&&l(i,["speechConfig"],Vt(J));const H=r(t,["audioTimestamp"]);H!=null&&l(i,["audioTimestamp"],H);const ge=r(t,["thinkingConfig"]);ge!=null&&l(i,["thinkingConfig"],ge);const Xt=r(t,["imageConfig"]);if(Xt!=null&&l(i,["imageConfig"],vu(Xt)),r(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const Qt=r(t,["modelArmorConfig"]);return n!==void 0&&Qt!=null&&l(n,["modelArmorConfig"],Qt),i}function go(e,t,n){const o={},i=r(t,["model"]);i!=null&&l(o,["_url","model"],D(e,i));const s=r(t,["contents"]);if(s!=null){let u=X(s);Array.isArray(u)&&(u=u.map(d=>nt(d))),l(o,["contents"],u)}const a=r(t,["config"]);return a!=null&&l(o,["generationConfig"],Ba(e,a,o)),o}function yo(e,t,n){const o={},i=r(t,["model"]);i!=null&&l(o,["_url","model"],D(e,i));const s=r(t,["contents"]);if(s!=null){let u=X(s);Array.isArray(u)&&(u=u.map(d=>d)),l(o,["contents"],u)}const a=r(t,["config"]);return a!=null&&l(o,["generationConfig"],Ja(e,a,o)),o}function vo(e,t){const n={},o=r(e,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(e,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>pa(f))),l(n,["candidates"],c)}const s=r(e,["modelVersion"]);s!=null&&l(n,["modelVersion"],s);const a=r(e,["promptFeedback"]);a!=null&&l(n,["promptFeedback"],a);const u=r(e,["responseId"]);u!=null&&l(n,["responseId"],u);const d=r(e,["usageMetadata"]);return d!=null&&l(n,["usageMetadata"],d),n}function _o(e,t){const n={},o=r(e,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(e,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>p)),l(n,["candidates"],f)}const s=r(e,["createTime"]);s!=null&&l(n,["createTime"],s);const a=r(e,["modelVersion"]);a!=null&&l(n,["modelVersion"],a);const u=r(e,["promptFeedback"]);u!=null&&l(n,["promptFeedback"],u);const d=r(e,["responseId"]);d!=null&&l(n,["responseId"],d);const c=r(e,["usageMetadata"]);return c!=null&&l(n,["usageMetadata"],c),n}function Oa(e,t,n){const o={};if(r(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=r(e,["numberOfImages"]);t!==void 0&&i!=null&&l(t,["parameters","sampleCount"],i);const s=r(e,["aspectRatio"]);t!==void 0&&s!=null&&l(t,["parameters","aspectRatio"],s);const a=r(e,["guidanceScale"]);if(t!==void 0&&a!=null&&l(t,["parameters","guidanceScale"],a),r(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=r(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&l(t,["parameters","safetySetting"],u);const d=r(e,["personGeneration"]);t!==void 0&&d!=null&&l(t,["parameters","personGeneration"],d);const c=r(e,["includeSafetyAttributes"]);t!==void 0&&c!=null&&l(t,["parameters","includeSafetyAttributes"],c);const f=r(e,["includeRaiReason"]);t!==void 0&&f!=null&&l(t,["parameters","includeRaiReason"],f);const p=r(e,["language"]);t!==void 0&&p!=null&&l(t,["parameters","language"],p);const h=r(e,["outputMimeType"]);t!==void 0&&h!=null&&l(t,["parameters","outputOptions","mimeType"],h);const m=r(e,["outputCompressionQuality"]);if(t!==void 0&&m!=null&&l(t,["parameters","outputOptions","compressionQuality"],m),r(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=r(e,["imageSize"]);if(t!==void 0&&g!=null&&l(t,["parameters","sampleImageSize"],g),r(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function Za(e,t,n){const o={},i=r(e,["outputGcsUri"]);t!==void 0&&i!=null&&l(t,["parameters","storageUri"],i);const s=r(e,["negativePrompt"]);t!==void 0&&s!=null&&l(t,["parameters","negativePrompt"],s);const a=r(e,["numberOfImages"]);t!==void 0&&a!=null&&l(t,["parameters","sampleCount"],a);const u=r(e,["aspectRatio"]);t!==void 0&&u!=null&&l(t,["parameters","aspectRatio"],u);const d=r(e,["guidanceScale"]);t!==void 0&&d!=null&&l(t,["parameters","guidanceScale"],d);const c=r(e,["seed"]);t!==void 0&&c!=null&&l(t,["parameters","seed"],c);const f=r(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&l(t,["parameters","safetySetting"],f);const p=r(e,["personGeneration"]);t!==void 0&&p!=null&&l(t,["parameters","personGeneration"],p);const h=r(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&l(t,["parameters","includeSafetyAttributes"],h);const m=r(e,["includeRaiReason"]);t!==void 0&&m!=null&&l(t,["parameters","includeRaiReason"],m);const g=r(e,["language"]);t!==void 0&&g!=null&&l(t,["parameters","language"],g);const v=r(e,["outputMimeType"]);t!==void 0&&v!=null&&l(t,["parameters","outputOptions","mimeType"],v);const y=r(e,["outputCompressionQuality"]);t!==void 0&&y!=null&&l(t,["parameters","outputOptions","compressionQuality"],y);const E=r(e,["addWatermark"]);t!==void 0&&E!=null&&l(t,["parameters","addWatermark"],E);const S=r(e,["labels"]);t!==void 0&&S!=null&&l(t,["labels"],S);const C=r(e,["imageSize"]);t!==void 0&&C!=null&&l(t,["parameters","sampleImageSize"],C);const I=r(e,["enhancePrompt"]);return t!==void 0&&I!=null&&l(t,["parameters","enhancePrompt"],I),o}function Wa(e,t,n){const o={},i=r(t,["model"]);i!=null&&l(o,["_url","model"],D(e,i));const s=r(t,["prompt"]);s!=null&&l(o,["instances[0]","prompt"],s);const a=r(t,["config"]);return a!=null&&Oa(a,o),o}function Ka(e,t,n){const o={},i=r(t,["model"]);i!=null&&l(o,["_url","model"],D(e,i));const s=r(t,["prompt"]);s!=null&&l(o,["instances[0]","prompt"],s);const a=r(t,["config"]);return a!=null&&Za(a,o),o}function Ya(e,t){const n={},o=r(e,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(e,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>au(u))),l(n,["generatedImages"],a)}const s=r(e,["positivePromptSafetyAttributes"]);return s!=null&&l(n,["positivePromptSafetyAttributes"],hi(s)),n}function Xa(e,t){const n={},o=r(e,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(e,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>ot(u))),l(n,["generatedImages"],a)}const s=r(e,["positivePromptSafetyAttributes"]);return s!=null&&l(n,["positivePromptSafetyAttributes"],mi(s)),n}function Qa(e,t,n){const o={},i=r(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&l(t,["parameters","sampleCount"],i),r(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=r(e,["durationSeconds"]);if(t!==void 0&&s!=null&&l(t,["parameters","durationSeconds"],s),r(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=r(e,["aspectRatio"]);t!==void 0&&a!=null&&l(t,["parameters","aspectRatio"],a);const u=r(e,["resolution"]);t!==void 0&&u!=null&&l(t,["parameters","resolution"],u);const d=r(e,["personGeneration"]);if(t!==void 0&&d!=null&&l(t,["parameters","personGeneration"],d),r(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=r(e,["negativePrompt"]);t!==void 0&&c!=null&&l(t,["parameters","negativePrompt"],c);const f=r(e,["enhancePrompt"]);if(t!==void 0&&f!=null&&l(t,["parameters","enhancePrompt"],f),r(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=r(e,["lastFrame"]);t!==void 0&&p!=null&&l(t,["instances[0]","lastFrame"],it(p));const h=r(e,["referenceImages"]);if(t!==void 0&&h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>ec(g))),l(t,["instances[0]","referenceImages"],m)}if(r(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(r(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function ja(e,t,n){const o={},i=r(e,["numberOfVideos"]);t!==void 0&&i!=null&&l(t,["parameters","sampleCount"],i);const s=r(e,["outputGcsUri"]);t!==void 0&&s!=null&&l(t,["parameters","storageUri"],s);const a=r(e,["fps"]);t!==void 0&&a!=null&&l(t,["parameters","fps"],a);const u=r(e,["durationSeconds"]);t!==void 0&&u!=null&&l(t,["parameters","durationSeconds"],u);const d=r(e,["seed"]);t!==void 0&&d!=null&&l(t,["parameters","seed"],d);const c=r(e,["aspectRatio"]);t!==void 0&&c!=null&&l(t,["parameters","aspectRatio"],c);const f=r(e,["resolution"]);t!==void 0&&f!=null&&l(t,["parameters","resolution"],f);const p=r(e,["personGeneration"]);t!==void 0&&p!=null&&l(t,["parameters","personGeneration"],p);const h=r(e,["pubsubTopic"]);t!==void 0&&h!=null&&l(t,["parameters","pubsubTopic"],h);const m=r(e,["negativePrompt"]);t!==void 0&&m!=null&&l(t,["parameters","negativePrompt"],m);const g=r(e,["enhancePrompt"]);t!==void 0&&g!=null&&l(t,["parameters","enhancePrompt"],g);const v=r(e,["generateAudio"]);t!==void 0&&v!=null&&l(t,["parameters","generateAudio"],v);const y=r(e,["lastFrame"]);t!==void 0&&y!=null&&l(t,["instances[0]","lastFrame"],ne(y));const E=r(e,["referenceImages"]);if(t!==void 0&&E!=null){let I=E;Array.isArray(I)&&(I=I.map(_=>tc(_))),l(t,["instances[0]","referenceImages"],I)}const S=r(e,["mask"]);t!==void 0&&S!=null&&l(t,["instances[0]","mask"],ju(S));const C=r(e,["compressionQuality"]);return t!==void 0&&C!=null&&l(t,["parameters","compressionQuality"],C),o}function eu(e,t){const n={},o=r(e,["name"]);o!=null&&l(n,["name"],o);const i=r(e,["metadata"]);i!=null&&l(n,["metadata"],i);const s=r(e,["done"]);s!=null&&l(n,["done"],s);const a=r(e,["error"]);a!=null&&l(n,["error"],a);const u=r(e,["response","generateVideoResponse"]);return u!=null&&l(n,["response"],iu(u)),n}function tu(e,t){const n={},o=r(e,["name"]);o!=null&&l(n,["name"],o);const i=r(e,["metadata"]);i!=null&&l(n,["metadata"],i);const s=r(e,["done"]);s!=null&&l(n,["done"],s);const a=r(e,["error"]);a!=null&&l(n,["error"],a);const u=r(e,["response"]);return u!=null&&l(n,["response"],ru(u)),n}function nu(e,t,n){const o={},i=r(t,["model"]);i!=null&&l(o,["_url","model"],D(e,i));const s=r(t,["prompt"]);s!=null&&l(o,["instances[0]","prompt"],s);const a=r(t,["image"]);a!=null&&l(o,["instances[0]","image"],it(a));const u=r(t,["video"]);u!=null&&l(o,["instances[0]","video"],yi(u));const d=r(t,["source"]);d!=null&&su(d,o);const c=r(t,["config"]);return c!=null&&Qa(c,o),o}function ou(e,t,n){const o={},i=r(t,["model"]);i!=null&&l(o,["_url","model"],D(e,i));const s=r(t,["prompt"]);s!=null&&l(o,["instances[0]","prompt"],s);const a=r(t,["image"]);a!=null&&l(o,["instances[0]","image"],ne(a));const u=r(t,["video"]);u!=null&&l(o,["instances[0]","video"],vi(u));const d=r(t,["source"]);d!=null&&lu(d,o);const c=r(t,["config"]);return c!=null&&ja(c,o),o}function iu(e,t){const n={},o=r(e,["generatedSamples"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>cu(u))),l(n,["generatedVideos"],a)}const i=r(e,["raiMediaFilteredCount"]);i!=null&&l(n,["raiMediaFilteredCount"],i);const s=r(e,["raiMediaFilteredReasons"]);return s!=null&&l(n,["raiMediaFilteredReasons"],s),n}function ru(e,t){const n={},o=r(e,["videos"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>du(u))),l(n,["generatedVideos"],a)}const i=r(e,["raiMediaFilteredCount"]);i!=null&&l(n,["raiMediaFilteredCount"],i);const s=r(e,["raiMediaFilteredReasons"]);return s!=null&&l(n,["raiMediaFilteredReasons"],s),n}function su(e,t,n){const o={},i=r(e,["prompt"]);t!==void 0&&i!=null&&l(t,["instances[0]","prompt"],i);const s=r(e,["image"]);t!==void 0&&s!=null&&l(t,["instances[0]","image"],it(s));const a=r(e,["video"]);return t!==void 0&&a!=null&&l(t,["instances[0]","video"],yi(a)),o}function lu(e,t,n){const o={},i=r(e,["prompt"]);t!==void 0&&i!=null&&l(t,["instances[0]","prompt"],i);const s=r(e,["image"]);t!==void 0&&s!=null&&l(t,["instances[0]","image"],ne(s));const a=r(e,["video"]);return t!==void 0&&a!=null&&l(t,["instances[0]","video"],vi(a)),o}function au(e,t){const n={},o=r(e,["_self"]);o!=null&&l(n,["image"],_u(o));const i=r(e,["raiFilteredReason"]);i!=null&&l(n,["raiFilteredReason"],i);const s=r(e,["_self"]);return s!=null&&l(n,["safetyAttributes"],hi(s)),n}function ot(e,t){const n={},o=r(e,["_self"]);o!=null&&l(n,["image"],pi(o));const i=r(e,["raiFilteredReason"]);i!=null&&l(n,["raiFilteredReason"],i);const s=r(e,["_self"]);s!=null&&l(n,["safetyAttributes"],mi(s));const a=r(e,["prompt"]);return a!=null&&l(n,["enhancedPrompt"],a),n}function uu(e,t){const n={},o=r(e,["_self"]);o!=null&&l(n,["mask"],pi(o));const i=r(e,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),l(n,["labels"],s)}return n}function cu(e,t){const n={},o=r(e,["video"]);return o!=null&&l(n,["video"],Xu(o)),n}function du(e,t){const n={},o=r(e,["_self"]);return o!=null&&l(n,["video"],Qu(o)),n}function fu(e,t){const n={},o=r(e,["modelSelectionConfig"]);o!=null&&l(n,["modelConfig"],o);const i=r(e,["responseJsonSchema"]);i!=null&&l(n,["responseJsonSchema"],i);const s=r(e,["audioTimestamp"]);s!=null&&l(n,["audioTimestamp"],s);const a=r(e,["candidateCount"]);a!=null&&l(n,["candidateCount"],a);const u=r(e,["enableAffectiveDialog"]);u!=null&&l(n,["enableAffectiveDialog"],u);const d=r(e,["frequencyPenalty"]);d!=null&&l(n,["frequencyPenalty"],d);const c=r(e,["logprobs"]);c!=null&&l(n,["logprobs"],c);const f=r(e,["maxOutputTokens"]);f!=null&&l(n,["maxOutputTokens"],f);const p=r(e,["mediaResolution"]);p!=null&&l(n,["mediaResolution"],p);const h=r(e,["presencePenalty"]);h!=null&&l(n,["presencePenalty"],h);const m=r(e,["responseLogprobs"]);m!=null&&l(n,["responseLogprobs"],m);const g=r(e,["responseMimeType"]);g!=null&&l(n,["responseMimeType"],g);const v=r(e,["responseModalities"]);v!=null&&l(n,["responseModalities"],v);const y=r(e,["responseSchema"]);y!=null&&l(n,["responseSchema"],y);const E=r(e,["routingConfig"]);E!=null&&l(n,["routingConfig"],E);const S=r(e,["seed"]);S!=null&&l(n,["seed"],S);const C=r(e,["speechConfig"]);C!=null&&l(n,["speechConfig"],C);const I=r(e,["stopSequences"]);I!=null&&l(n,["stopSequences"],I);const _=r(e,["temperature"]);_!=null&&l(n,["temperature"],_);const R=r(e,["thinkingConfig"]);R!=null&&l(n,["thinkingConfig"],R);const M=r(e,["topK"]);M!=null&&l(n,["topK"],M);const L=r(e,["topP"]);if(L!=null&&l(n,["topP"],L),r(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function pu(e,t,n){const o={},i=r(t,["model"]);return i!=null&&l(o,["_url","name"],D(e,i)),o}function hu(e,t,n){const o={},i=r(t,["model"]);return i!=null&&l(o,["_url","name"],D(e,i)),o}function mu(e,t){const n={};if(r(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=r(e,["enableWidget"]);return o!=null&&l(n,["enableWidget"],o),n}function gu(e,t){const n={};if(r(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(r(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=r(e,["timeRangeFilter"]);return o!=null&&l(n,["timeRangeFilter"],o),n}function yu(e,t){const n={},o=r(e,["aspectRatio"]);o!=null&&l(n,["aspectRatio"],o);const i=r(e,["imageSize"]);if(i!=null&&l(n,["imageSize"],i),r(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(r(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(r(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function vu(e,t){const n={},o=r(e,["aspectRatio"]);o!=null&&l(n,["aspectRatio"],o);const i=r(e,["imageSize"]);i!=null&&l(n,["imageSize"],i);const s=r(e,["personGeneration"]);s!=null&&l(n,["personGeneration"],s);const a=r(e,["outputMimeType"]);a!=null&&l(n,["imageOutputOptions","mimeType"],a);const u=r(e,["outputCompressionQuality"]);return u!=null&&l(n,["imageOutputOptions","compressionQuality"],u),n}function _u(e,t){const n={},o=r(e,["bytesBase64Encoded"]);o!=null&&l(n,["imageBytes"],ae(o));const i=r(e,["mimeType"]);return i!=null&&l(n,["mimeType"],i),n}function pi(e,t){const n={},o=r(e,["gcsUri"]);o!=null&&l(n,["gcsUri"],o);const i=r(e,["bytesBase64Encoded"]);i!=null&&l(n,["imageBytes"],ae(i));const s=r(e,["mimeType"]);return s!=null&&l(n,["mimeType"],s),n}function it(e,t){const n={};if(r(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=r(e,["imageBytes"]);o!=null&&l(n,["bytesBase64Encoded"],ae(o));const i=r(e,["mimeType"]);return i!=null&&l(n,["mimeType"],i),n}function ne(e,t){const n={},o=r(e,["gcsUri"]);o!=null&&l(n,["gcsUri"],o);const i=r(e,["imageBytes"]);i!=null&&l(n,["bytesBase64Encoded"],ae(i));const s=r(e,["mimeType"]);return s!=null&&l(n,["mimeType"],s),n}function Tu(e,t,n,o){const i={},s=r(t,["pageSize"]);n!==void 0&&s!=null&&l(n,["_query","pageSize"],s);const a=r(t,["pageToken"]);n!==void 0&&a!=null&&l(n,["_query","pageToken"],a);const u=r(t,["filter"]);n!==void 0&&u!=null&&l(n,["_query","filter"],u);const d=r(t,["queryBase"]);return n!==void 0&&d!=null&&l(n,["_url","models_url"],si(e,d)),i}function Eu(e,t,n,o){const i={},s=r(t,["pageSize"]);n!==void 0&&s!=null&&l(n,["_query","pageSize"],s);const a=r(t,["pageToken"]);n!==void 0&&a!=null&&l(n,["_query","pageToken"],a);const u=r(t,["filter"]);n!==void 0&&u!=null&&l(n,["_query","filter"],u);const d=r(t,["queryBase"]);return n!==void 0&&d!=null&&l(n,["_url","models_url"],si(e,d)),i}function Su(e,t,n){const o={},i=r(t,["config"]);return i!=null&&Tu(e,i,o),o}function Cu(e,t,n){const o={},i=r(t,["config"]);return i!=null&&Eu(e,i,o),o}function Iu(e,t){const n={},o=r(e,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(e,["nextPageToken"]);i!=null&&l(n,["nextPageToken"],i);const s=r(e,["_self"]);if(s!=null){let a=li(s);Array.isArray(a)&&(a=a.map(u=>St(u))),l(n,["models"],a)}return n}function Au(e,t){const n={},o=r(e,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(e,["nextPageToken"]);i!=null&&l(n,["nextPageToken"],i);const s=r(e,["_self"]);if(s!=null){let a=li(s);Array.isArray(a)&&(a=a.map(u=>Ct(u))),l(n,["models"],a)}return n}function wu(e,t){const n={},o=r(e,["maskMode"]);o!=null&&l(n,["maskMode"],o);const i=r(e,["segmentationClasses"]);i!=null&&l(n,["maskClasses"],i);const s=r(e,["maskDilation"]);return s!=null&&l(n,["dilation"],s),n}function St(e,t){const n={},o=r(e,["name"]);o!=null&&l(n,["name"],o);const i=r(e,["displayName"]);i!=null&&l(n,["displayName"],i);const s=r(e,["description"]);s!=null&&l(n,["description"],s);const a=r(e,["version"]);a!=null&&l(n,["version"],a);const u=r(e,["_self"]);u!=null&&l(n,["tunedModelInfo"],qu(u));const d=r(e,["inputTokenLimit"]);d!=null&&l(n,["inputTokenLimit"],d);const c=r(e,["outputTokenLimit"]);c!=null&&l(n,["outputTokenLimit"],c);const f=r(e,["supportedGenerationMethods"]);f!=null&&l(n,["supportedActions"],f);const p=r(e,["temperature"]);p!=null&&l(n,["temperature"],p);const h=r(e,["maxTemperature"]);h!=null&&l(n,["maxTemperature"],h);const m=r(e,["topP"]);m!=null&&l(n,["topP"],m);const g=r(e,["topK"]);g!=null&&l(n,["topK"],g);const v=r(e,["thinking"]);return v!=null&&l(n,["thinking"],v),n}function Ct(e,t){const n={},o=r(e,["name"]);o!=null&&l(n,["name"],o);const i=r(e,["displayName"]);i!=null&&l(n,["displayName"],i);const s=r(e,["description"]);s!=null&&l(n,["description"],s);const a=r(e,["versionId"]);a!=null&&l(n,["version"],a);const u=r(e,["deployedModels"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(m=>Va(m))),l(n,["endpoints"],h)}const d=r(e,["labels"]);d!=null&&l(n,["labels"],d);const c=r(e,["_self"]);c!=null&&l(n,["tunedModelInfo"],Hu(c));const f=r(e,["defaultCheckpointId"]);f!=null&&l(n,["defaultCheckpointId"],f);const p=r(e,["checkpoints"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(m=>m)),l(n,["checkpoints"],h)}return n}function Ru(e,t){const n={},o=r(e,["mediaResolution"]);o!=null&&l(n,["mediaResolution"],o);const i=r(e,["codeExecutionResult"]);i!=null&&l(n,["codeExecutionResult"],i);const s=r(e,["executableCode"]);s!=null&&l(n,["executableCode"],s);const a=r(e,["fileData"]);a!=null&&l(n,["fileData"],$a(a));const u=r(e,["functionCall"]);u!=null&&l(n,["functionCall"],za(u));const d=r(e,["functionResponse"]);d!=null&&l(n,["functionResponse"],d);const c=r(e,["inlineData"]);c!=null&&l(n,["inlineData"],fa(c));const f=r(e,["text"]);f!=null&&l(n,["text"],f);const p=r(e,["thought"]);p!=null&&l(n,["thought"],p);const h=r(e,["thoughtSignature"]);h!=null&&l(n,["thoughtSignature"],h);const m=r(e,["videoMetadata"]);return m!=null&&l(n,["videoMetadata"],m),n}function Pu(e,t){const n={},o=r(e,["productImage"]);return o!=null&&l(n,["image"],ne(o)),n}function Nu(e,t,n){const o={},i=r(e,["numberOfImages"]);t!==void 0&&i!=null&&l(t,["parameters","sampleCount"],i);const s=r(e,["baseSteps"]);t!==void 0&&s!=null&&l(t,["parameters","baseSteps"],s);const a=r(e,["outputGcsUri"]);t!==void 0&&a!=null&&l(t,["parameters","storageUri"],a);const u=r(e,["seed"]);t!==void 0&&u!=null&&l(t,["parameters","seed"],u);const d=r(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&l(t,["parameters","safetySetting"],d);const c=r(e,["personGeneration"]);t!==void 0&&c!=null&&l(t,["parameters","personGeneration"],c);const f=r(e,["addWatermark"]);t!==void 0&&f!=null&&l(t,["parameters","addWatermark"],f);const p=r(e,["outputMimeType"]);t!==void 0&&p!=null&&l(t,["parameters","outputOptions","mimeType"],p);const h=r(e,["outputCompressionQuality"]);t!==void 0&&h!=null&&l(t,["parameters","outputOptions","compressionQuality"],h);const m=r(e,["enhancePrompt"]);t!==void 0&&m!=null&&l(t,["parameters","enhancePrompt"],m);const g=r(e,["labels"]);return t!==void 0&&g!=null&&l(t,["labels"],g),o}function Mu(e,t,n){const o={},i=r(t,["model"]);i!=null&&l(o,["_url","model"],D(e,i));const s=r(t,["source"]);s!=null&&xu(s,o);const a=r(t,["config"]);return a!=null&&Nu(a,o),o}function ku(e,t){const n={},o=r(e,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>ot(s))),l(n,["generatedImages"],i)}return n}function xu(e,t,n){const o={},i=r(e,["prompt"]);t!==void 0&&i!=null&&l(t,["instances[0]","prompt"],i);const s=r(e,["personImage"]);t!==void 0&&s!=null&&l(t,["instances[0]","personImage","image"],ne(s));const a=r(e,["productImages"]);if(t!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>Pu(d))),l(t,["instances[0]","productImages"],u)}return o}function Du(e,t){const n={},o=r(e,["referenceImage"]);o!=null&&l(n,["referenceImage"],ne(o));const i=r(e,["referenceId"]);i!=null&&l(n,["referenceId"],i);const s=r(e,["referenceType"]);s!=null&&l(n,["referenceType"],s);const a=r(e,["maskImageConfig"]);a!=null&&l(n,["maskImageConfig"],wu(a));const u=r(e,["controlImageConfig"]);u!=null&&l(n,["controlImageConfig"],_a(u));const d=r(e,["styleImageConfig"]);d!=null&&l(n,["styleImageConfig"],d);const c=r(e,["subjectImageConfig"]);return c!=null&&l(n,["subjectImageConfig"],c),n}function hi(e,t){const n={},o=r(e,["safetyAttributes","categories"]);o!=null&&l(n,["categories"],o);const i=r(e,["safetyAttributes","scores"]);i!=null&&l(n,["scores"],i);const s=r(e,["contentType"]);return s!=null&&l(n,["contentType"],s),n}function mi(e,t){const n={},o=r(e,["safetyAttributes","categories"]);o!=null&&l(n,["categories"],o);const i=r(e,["safetyAttributes","scores"]);i!=null&&l(n,["scores"],i);const s=r(e,["contentType"]);return s!=null&&l(n,["contentType"],s),n}function Uu(e,t){const n={},o=r(e,["category"]);if(o!=null&&l(n,["category"],o),r(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=r(e,["threshold"]);return i!=null&&l(n,["threshold"],i),n}function Lu(e,t){const n={},o=r(e,["image"]);return o!=null&&l(n,["image"],ne(o)),n}function bu(e,t,n){const o={},i=r(e,["mode"]);t!==void 0&&i!=null&&l(t,["parameters","mode"],i);const s=r(e,["maxPredictions"]);t!==void 0&&s!=null&&l(t,["parameters","maxPredictions"],s);const a=r(e,["confidenceThreshold"]);t!==void 0&&a!=null&&l(t,["parameters","confidenceThreshold"],a);const u=r(e,["maskDilation"]);t!==void 0&&u!=null&&l(t,["parameters","maskDilation"],u);const d=r(e,["binaryColorThreshold"]);t!==void 0&&d!=null&&l(t,["parameters","binaryColorThreshold"],d);const c=r(e,["labels"]);return t!==void 0&&c!=null&&l(t,["labels"],c),o}function Fu(e,t,n){const o={},i=r(t,["model"]);i!=null&&l(o,["_url","model"],D(e,i));const s=r(t,["source"]);s!=null&&Vu(s,o);const a=r(t,["config"]);return a!=null&&bu(a,o),o}function Gu(e,t){const n={},o=r(e,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>uu(s))),l(n,["generatedMasks"],i)}return n}function Vu(e,t,n){const o={},i=r(e,["prompt"]);t!==void 0&&i!=null&&l(t,["instances[0]","prompt"],i);const s=r(e,["image"]);t!==void 0&&s!=null&&l(t,["instances[0]","image"],ne(s));const a=r(e,["scribbleImage"]);return t!==void 0&&a!=null&&l(t,["instances[0]","scribble"],Lu(a)),o}function $u(e,t){const n={},o=r(e,["retrievalConfig"]);o!=null&&l(n,["retrievalConfig"],o);const i=r(e,["functionCallingConfig"]);return i!=null&&l(n,["functionCallingConfig"],qa(i)),n}function zu(e,t){const n={};if(r(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(e,["computerUse"]);o!=null&&l(n,["computerUse"],o);const i=r(e,["fileSearch"]);i!=null&&l(n,["fileSearch"],i);const s=r(e,["codeExecution"]);if(s!=null&&l(n,["codeExecution"],s),r(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=r(e,["functionDeclarations"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(h=>h)),l(n,["functionDeclarations"],p)}const u=r(e,["googleMaps"]);u!=null&&l(n,["googleMaps"],mu(u));const d=r(e,["googleSearch"]);d!=null&&l(n,["googleSearch"],gu(d));const c=r(e,["googleSearchRetrieval"]);c!=null&&l(n,["googleSearchRetrieval"],c);const f=r(e,["urlContext"]);return f!=null&&l(n,["urlContext"],f),n}function gi(e,t){const n={},o=r(e,["retrieval"]);o!=null&&l(n,["retrieval"],o);const i=r(e,["computerUse"]);if(i!=null&&l(n,["computerUse"],i),r(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=r(e,["codeExecution"]);s!=null&&l(n,["codeExecution"],s);const a=r(e,["enterpriseWebSearch"]);a!=null&&l(n,["enterpriseWebSearch"],a);const u=r(e,["functionDeclarations"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(m=>Ha(m))),l(n,["functionDeclarations"],h)}const d=r(e,["googleMaps"]);d!=null&&l(n,["googleMaps"],d);const c=r(e,["googleSearch"]);c!=null&&l(n,["googleSearch"],c);const f=r(e,["googleSearchRetrieval"]);f!=null&&l(n,["googleSearchRetrieval"],f);const p=r(e,["urlContext"]);return p!=null&&l(n,["urlContext"],p),n}function qu(e,t){const n={},o=r(e,["baseModel"]);o!=null&&l(n,["baseModel"],o);const i=r(e,["createTime"]);i!=null&&l(n,["createTime"],i);const s=r(e,["updateTime"]);return s!=null&&l(n,["updateTime"],s),n}function Hu(e,t){const n={},o=r(e,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&l(n,["baseModel"],o);const i=r(e,["createTime"]);i!=null&&l(n,["createTime"],i);const s=r(e,["updateTime"]);return s!=null&&l(n,["updateTime"],s),n}function Bu(e,t,n){const o={},i=r(e,["displayName"]);t!==void 0&&i!=null&&l(t,["displayName"],i);const s=r(e,["description"]);t!==void 0&&s!=null&&l(t,["description"],s);const a=r(e,["defaultCheckpointId"]);return t!==void 0&&a!=null&&l(t,["defaultCheckpointId"],a),o}function Ju(e,t,n){const o={},i=r(e,["displayName"]);t!==void 0&&i!=null&&l(t,["displayName"],i);const s=r(e,["description"]);t!==void 0&&s!=null&&l(t,["description"],s);const a=r(e,["defaultCheckpointId"]);return t!==void 0&&a!=null&&l(t,["defaultCheckpointId"],a),o}function Ou(e,t,n){const o={},i=r(t,["model"]);i!=null&&l(o,["_url","name"],D(e,i));const s=r(t,["config"]);return s!=null&&Bu(s,o),o}function Zu(e,t,n){const o={},i=r(t,["model"]);i!=null&&l(o,["_url","model"],D(e,i));const s=r(t,["config"]);return s!=null&&Ju(s,o),o}function Wu(e,t,n){const o={},i=r(e,["outputGcsUri"]);t!==void 0&&i!=null&&l(t,["parameters","storageUri"],i);const s=r(e,["safetyFilterLevel"]);t!==void 0&&s!=null&&l(t,["parameters","safetySetting"],s);const a=r(e,["personGeneration"]);t!==void 0&&a!=null&&l(t,["parameters","personGeneration"],a);const u=r(e,["includeRaiReason"]);t!==void 0&&u!=null&&l(t,["parameters","includeRaiReason"],u);const d=r(e,["outputMimeType"]);t!==void 0&&d!=null&&l(t,["parameters","outputOptions","mimeType"],d);const c=r(e,["outputCompressionQuality"]);t!==void 0&&c!=null&&l(t,["parameters","outputOptions","compressionQuality"],c);const f=r(e,["enhanceInputImage"]);t!==void 0&&f!=null&&l(t,["parameters","upscaleConfig","enhanceInputImage"],f);const p=r(e,["imagePreservationFactor"]);t!==void 0&&p!=null&&l(t,["parameters","upscaleConfig","imagePreservationFactor"],p);const h=r(e,["labels"]);t!==void 0&&h!=null&&l(t,["labels"],h);const m=r(e,["numberOfImages"]);t!==void 0&&m!=null&&l(t,["parameters","sampleCount"],m);const g=r(e,["mode"]);return t!==void 0&&g!=null&&l(t,["parameters","mode"],g),o}function Ku(e,t,n){const o={},i=r(t,["model"]);i!=null&&l(o,["_url","model"],D(e,i));const s=r(t,["image"]);s!=null&&l(o,["instances[0]","image"],ne(s));const a=r(t,["upscaleFactor"]);a!=null&&l(o,["parameters","upscaleConfig","upscaleFactor"],a);const u=r(t,["config"]);return u!=null&&Wu(u,o),o}function Yu(e,t){const n={},o=r(e,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(e,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>ot(a))),l(n,["generatedImages"],s)}return n}function Xu(e,t){const n={},o=r(e,["uri"]);o!=null&&l(n,["uri"],o);const i=r(e,["encodedVideo"]);i!=null&&l(n,["videoBytes"],ae(i));const s=r(e,["encoding"]);return s!=null&&l(n,["mimeType"],s),n}function Qu(e,t){const n={},o=r(e,["gcsUri"]);o!=null&&l(n,["uri"],o);const i=r(e,["bytesBase64Encoded"]);i!=null&&l(n,["videoBytes"],ae(i));const s=r(e,["mimeType"]);return s!=null&&l(n,["mimeType"],s),n}function ju(e,t){const n={},o=r(e,["image"]);o!=null&&l(n,["_self"],ne(o));const i=r(e,["maskMode"]);return i!=null&&l(n,["maskMode"],i),n}function ec(e,t){const n={},o=r(e,["image"]);o!=null&&l(n,["image"],it(o));const i=r(e,["referenceType"]);return i!=null&&l(n,["referenceType"],i),n}function tc(e,t){const n={},o=r(e,["image"]);o!=null&&l(n,["image"],ne(o));const i=r(e,["referenceType"]);return i!=null&&l(n,["referenceType"],i),n}function yi(e,t){const n={},o=r(e,["uri"]);o!=null&&l(n,["uri"],o);const i=r(e,["videoBytes"]);i!=null&&l(n,["encodedVideo"],ae(i));const s=r(e,["mimeType"]);return s!=null&&l(n,["encoding"],s),n}function vi(e,t){const n={},o=r(e,["uri"]);o!=null&&l(n,["gcsUri"],o);const i=r(e,["videoBytes"]);i!=null&&l(n,["bytesBase64Encoded"],ae(i));const s=r(e,["mimeType"]);return s!=null&&l(n,["mimeType"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nc(e,t){const n={},o=r(e,["displayName"]);return t!==void 0&&o!=null&&l(t,["displayName"],o),n}function oc(e){const t={},n=r(e,["config"]);return n!=null&&nc(n,t),t}function ic(e,t){const n={},o=r(e,["force"]);return t!==void 0&&o!=null&&l(t,["_query","force"],o),n}function rc(e){const t={},n=r(e,["name"]);n!=null&&l(t,["_url","name"],n);const o=r(e,["config"]);return o!=null&&ic(o,t),t}function sc(e){const t={},n=r(e,["name"]);return n!=null&&l(t,["_url","name"],n),t}function lc(e,t){const n={},o=r(e,["customMetadata"]);if(t!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>a)),l(t,["customMetadata"],s)}const i=r(e,["chunkingConfig"]);return t!==void 0&&i!=null&&l(t,["chunkingConfig"],i),n}function ac(e){const t={},n=r(e,["name"]);n!=null&&l(t,["name"],n);const o=r(e,["metadata"]);o!=null&&l(t,["metadata"],o);const i=r(e,["done"]);i!=null&&l(t,["done"],i);const s=r(e,["error"]);s!=null&&l(t,["error"],s);const a=r(e,["response"]);return a!=null&&l(t,["response"],cc(a)),t}function uc(e){const t={},n=r(e,["fileSearchStoreName"]);n!=null&&l(t,["_url","file_search_store_name"],n);const o=r(e,["fileName"]);o!=null&&l(t,["fileName"],o);const i=r(e,["config"]);return i!=null&&lc(i,t),t}function cc(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&l(t,["sdkHttpResponse"],n);const o=r(e,["parent"]);o!=null&&l(t,["parent"],o);const i=r(e,["documentName"]);return i!=null&&l(t,["documentName"],i),t}function dc(e,t){const n={},o=r(e,["pageSize"]);t!==void 0&&o!=null&&l(t,["_query","pageSize"],o);const i=r(e,["pageToken"]);return t!==void 0&&i!=null&&l(t,["_query","pageToken"],i),n}function fc(e){const t={},n=r(e,["config"]);return n!=null&&dc(n,t),t}function pc(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&l(t,["sdkHttpResponse"],n);const o=r(e,["nextPageToken"]);o!=null&&l(t,["nextPageToken"],o);const i=r(e,["fileSearchStores"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),l(t,["fileSearchStores"],s)}return t}function _i(e,t){const n={},o=r(e,["mimeType"]);t!==void 0&&o!=null&&l(t,["mimeType"],o);const i=r(e,["displayName"]);t!==void 0&&i!=null&&l(t,["displayName"],i);const s=r(e,["customMetadata"]);if(t!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>d)),l(t,["customMetadata"],u)}const a=r(e,["chunkingConfig"]);return t!==void 0&&a!=null&&l(t,["chunkingConfig"],a),n}function hc(e){const t={},n=r(e,["fileSearchStoreName"]);n!=null&&l(t,["_url","file_search_store_name"],n);const o=r(e,["config"]);return o!=null&&_i(o,t),t}function mc(e){const t={},n=r(e,["sdkHttpResponse"]);return n!=null&&l(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gc="Content-Type",yc="X-Server-Timeout",vc="User-Agent",It="x-goog-api-client",_c="1.40.0",Tc=`google-genai-sdk/${_c}`,Ec="v1beta1",Sc="v1beta";class Cc{constructor(t){var n,o,i;this.clientOptions=Object.assign({},t),this.customBaseUrl=(n=t.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const s={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const u=t.project&&t.location||!!t.apiKey;this.customBaseUrl&&!u?(s.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?s.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(s.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),s.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:Ec}else{if(!this.clientOptions.apiKey)throw new De({message:"API key must be set when using the Gemini API.",status:403});s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Sc,s.baseUrl="https://generativelanguage.googleapis.com/"}s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,t.httpOptions))}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&o.push(t.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,o){const i=[this.getRequestUrlInternal(n)];return o&&i.push(this.getBaseResourcePath()),t!==""&&i.push(t),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(t,n){return!(n.baseUrl&&n.baseUrlResourceScope===vt.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t,n),i=this.constructUrl(t.path,n,o);if(t.queryParams)for(const[a,u]of Object.entries(t.queryParams))i.searchParams.append(a,String(u));let s={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=t.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),t.abortSignal),this.unaryApiCall(i,s,t.httpMethod)}patchHttpOptions(t,n){const o=JSON.parse(JSON.stringify(t));for(const[i,s]of Object.entries(n))typeof s=="object"?o[i]=Object.assign(Object.assign({},o[i]),s):s!==void 0&&(o[i]=s);return o}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t,n),i=this.constructUrl(t.path,n,o);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=t.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),t.abortSignal),this.streamApiCall(i,s,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,o,i){if(n&&n.timeout||i){const s=new AbortController,a=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>s.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),t.signal=a}return n&&n.extraBody!==null&&Ic(t,n.extraBody),t.headers=await this.getHeadersInternal(n,o),t}async unaryApiCall(t,n,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:o})).then(async i=>(await To(i),new _t(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(t,n,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:o})).then(async i=>(await To(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(t){return ee(this,arguments,function*(){var o;const i=(o=t==null?void 0:t.body)===null||o===void 0?void 0:o.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let a="";const u="data:",d=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:f}=yield N(i.read());if(c){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=s.decode(f,{stream:!0});try{const g=JSON.parse(p);if("error"in g){const v=JSON.parse(JSON.stringify(g.error)),y=v.status,E=v.code,S=`got status: ${y}. ${JSON.stringify(g)}`;if(E>=400&&E<600)throw new De({message:S,status:E})}}catch(g){if(g.name==="ApiError")throw g}a+=p;let h=-1,m=0;for(;;){h=-1,m=0;for(const y of d){const E=a.indexOf(y);E!==-1&&(h===-1||E<h)&&(h=E,m=y.length)}if(h===-1)break;const g=a.substring(0,h);a=a.substring(h+m);const v=g.trim();if(v.startsWith(u)){const y=v.substring(u.length).trim();try{const E=new Response(y,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield N(new _t(E))}catch(E){throw new Error(`exception parsing stream chunk ${y}. ${E}`)}}}}}finally{i.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const t={},n=Tc+" "+this.clientOptions.userAgentExtra;return t[vc]=n,t[It]=n,t[gc]="application/json",t}async getHeadersInternal(t,n){const o=new Headers;if(t&&t.headers){for(const[i,s]of Object.entries(t.headers))o.append(i,s);t.timeout&&t.timeout>0&&o.append(yc,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(t){var n;let o="";return typeof t=="string"&&(o=t.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(t,n){var o;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,a=await s.stat(t);i.sizeBytes=String(a.size);const u=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=u;const d={file:i},c=this.getFileName(t),f=A("upload/v1beta/files",d._url),p=await this.fetchUploadUrl(f,i.sizeBytes,i.mimeType,c,d,n==null?void 0:n.httpOptions);return s.upload(t,p,this)}async uploadFileToFileSearchStore(t,n,o){var i;const s=this.clientOptions.uploader,a=await s.stat(n),u=String(a.size),d=(i=o==null?void 0:o.mimeType)!==null&&i!==void 0?i:a.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${t}:uploadToFileSearchStore`,f=this.getFileName(n),p={};o!=null&&_i(o,p);const h=await this.fetchUploadUrl(c,u,d,f,p,o==null?void 0:o.httpOptions);return s.uploadToFileSearchStore(n,h,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,o,i,s,a){var u;let d={};a?d=a:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},i?{"X-Goog-Upload-File-Name":i}:{})};const c=await this.request({path:t,body:JSON.stringify(s),httpMethod:"POST",httpOptions:d});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(u=c==null?void 0:c.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function To(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let o;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?o=await e.json():o={error:{message:await e.text(),code:e.status,status:e.statusText}};const i=JSON.stringify(o);throw n>=400&&n<600?new De({message:i,status:n}):new Error(i)}}function Ic(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const s=JSON.parse(e.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(s,a){const u=Object.assign({},s);for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const c=a[d],f=u[d];c&&typeof c=="object"&&!Array.isArray(c)&&f&&typeof f=="object"&&!Array.isArray(f)?u[d]=o(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),u[d]=c)}return u}const i=o(n,t);e.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ac="mcp_used/unknown";let wc=!1;function Ti(e){for(const t of e)if(Rc(t)||typeof t=="object"&&"inputSchema"in t)return!0;return wc}function Ei(e){var t;const n=(t=e[It])!==null&&t!==void 0?t:"";e[It]=(n+` ${Ac}`).trimStart()}function Rc(e){return e!==null&&typeof e=="object"&&e instanceof zt}function Pc(e){return ee(this,arguments,function*(n,o=100){let i,s=0;for(;s<o;){const a=yield N(n.listTools({cursor:i}));for(const u of a.tools)yield yield N(u),s++;if(!a.nextCursor)break;i=a.nextCursor}})}class zt{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new zt(t,n)}async initialize(){var t,n,o,i;if(this.mcpTools.length>0)return;const s={},a=[];for(const f of this.mcpClients)try{for(var u=!0,d=(n=void 0,te(Pc(f))),c;c=await d.next(),t=c.done,!t;u=!0){i=c.value,u=!1;const p=i;a.push(p);const h=p.name;if(s[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);s[h]=f}}catch(p){n={error:p}}finally{try{!u&&!t&&(o=d.return)&&await o.call(d)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),os(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const o of t)if(o.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[o.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const a=await i.callTool({name:o.name,arguments:o.args},void 0,s);n.push({functionResponse:{name:o.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Nc(e,t,n){const o=new Kr;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(o,i),t(o)}class Mc{constructor(t,n,o){this.apiClient=t,this.auth=n,this.webSocketFactory=o}async connect(t){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),a=Dc(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const f=new Promise(C=>{c=C}),p=t.callbacks,h=function(){c({})},m=this.apiClient,g={onopen:h,onmessage:C=>{Nc(m,p.onmessage,C)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(C){},onclose:(o=p==null?void 0:p.onclose)!==null&&o!==void 0?o:function(C){}},v=this.webSocketFactory.create(d,xc(a),g);v.connect(),await f;const S={setup:{model:D(this.apiClient,t.model)}};return v.send(JSON.stringify(S)),new kc(v,this.apiClient)}}class kc{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=na(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=ta(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(_e.PLAY)}pause(){this.sendPlaybackControl(_e.PAUSE)}stop(){this.sendPlaybackControl(_e.STOP)}resetContext(){this.sendPlaybackControl(_e.RESET_CONTEXT)}close(){this.conn.close()}}function xc(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}function Dc(e){const t=new Headers;for(const[n,o]of Object.entries(e))t.append(n,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Uc="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Lc(e,t,n){const o=new Wr;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const s=JSON.parse(i);if(e.isVertexAI()){const a=ra(s);Object.assign(o,a)}else Object.assign(o,s);t(o)}class bc{constructor(t,n,o){this.apiClient=t,this.auth=n,this.webSocketFactory=o,this.music=new Mc(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,o,i,s,a,u;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();t.config&&t.config.tools&&Ti(t.config.tools)&&Ei(p);const h=$c(p);if(this.apiClient.isVertexAI()){const w=this.apiClient.getProject(),x=this.apiClient.getLocation(),G=this.apiClient.getApiKey(),K=!!w&&!!x||!!G;this.apiClient.getCustomBaseUrl()&&!K?f=d:(f=`${d}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,f))}else{const w=this.apiClient.getApiKey();let x="BidiGenerateContent",G="key";w!=null&&w.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),x="BidiGenerateContentConstrained",G="access_token"),f=`${d}/ws/google.ai.generativelanguage.${c}.GenerativeService.${x}?${G}=${w}`}let m=()=>{};const g=new Promise(w=>{m=w}),v=t.callbacks,y=function(){var w;(w=v==null?void 0:v.onopen)===null||w===void 0||w.call(v),m({})},E=this.apiClient,S={onopen:y,onmessage:w=>{Lc(E,v.onmessage,w)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(w){},onclose:(o=v==null?void 0:v.onclose)!==null&&o!==void 0?o:function(w){}},C=this.webSocketFactory.create(f,Vc(h),S);C.connect(),await g;let I=D(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&I.startsWith("publishers/")){const w=this.apiClient.getProject(),x=this.apiClient.getLocation();w&&x&&(I=`projects/${w}/locations/${x}/`+I)}let _={};this.apiClient.isVertexAI()&&((i=t.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Oe.AUDIO]}:t.config.responseModalities=[Oe.AUDIO]),!((s=t.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const R=(u=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],M=[];for(const w of R)if(this.isCallableTool(w)){const x=w;M.push(await x.tool())}else M.push(w);M.length>0&&(t.config.tools=M);const L={model:I,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?_=ea(this.apiClient,L):_=jl(this.apiClient,L),delete _.config,C.send(JSON.stringify(_)),new Gc(C,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const Fc={turnComplete:!0};class Gc{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=X(n.turns),t.isVertexAI()||(o=o.map(i=>nt(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const s of o){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!t.isVertexAI()&&!("id"in s))throw new Error(Uc)}return{toolResponse:{functionResponses:o}}}sendClientContent(t){t=Object.assign(Object.assign({},Fc),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:ia(t)}:n={realtimeInput:oa(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Vc(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}function $c(e){const t=new Headers;for(const[n,o]of Object.entries(e))t.append(n,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Eo=10;function So(e){var t,n,o;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let i=!1;for(const a of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(Ce(a)){i=!0;break}if(!i)return!0;const s=(o=e==null?void 0:e.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function Ce(e){return"callTool"in e&&typeof e.callTool=="function"}function zc(e){var t,n,o;return(o=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(i=>Ce(i)))!==null&&o!==void 0?o:!1}function Co(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((o,i)=>{if(Ce(o))return;const s=o;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(i)}),n}function Io(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qc extends se{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var o,i,s,a,u;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!zc(n)||So(n.config))return await this.generateContentInternal(d);const c=Co(n);if(c.length>0){const v=c.map(y=>`tools[${y}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${v}.`)}let f,p;const h=X(d.contents),m=(s=(i=(o=d.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:Eo;let g=0;for(;g<m&&(f=await this.generateContentInternal(d),!(!f.functionCalls||f.functionCalls.length===0));){const v=f.candidates[0].content,y=[];for(const E of(u=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(Ce(E)){const C=await E.callTool(f.functionCalls);y.push(...C)}g++,p={role:"user",parts:y},d.contents=X(d.contents),d.contents.push(v),d.contents.push(p),Io(d.config)&&(h.push(v),h.push(p))}return Io(d.config)&&(f.automaticFunctionCallingHistory=h),f},this.generateContentStream=async n=>{var o,i,s,a,u;if(this.maybeMoveToResponseJsonSchem(n),So(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const d=Co(n);if(d.length>0){const p=d.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(s=(i=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,f=(u=(a=n==null?void 0:n.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(c&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var i;let s;const a=[];if(o!=null&&o.generatedImages)for(const d of o.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((i=d==null?void 0:d.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=d==null?void 0:d.safetyAttributes:a.push(d);let u;return s?u={generatedImages:a,positivePromptSafetyAttributes:s,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async n=>{var o;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((o=a.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new he(re.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var o,i,s,a,u,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(s=n.source)===null||s===void 0?void 0:s.video)===null||a===void 0)&&a.uri&&(!((d=(u=n.source)===null||u===void 0?void 0:u.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,o,i;const s=(n=t.config)===null||n===void 0?void 0:n.tools;if(!s)return t;const a=await Promise.all(s.map(async d=>Ce(d)?await d.tool():d)),u={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:a})};if(u.config.tools=a,t.config&&t.config.tools&&Ti(t.config.tools)){const d=(i=(o=t.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&i!==void 0?i:{};let c=Object.assign({},d);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Ei(c),u.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(t){var n,o,i;const s=new Map;for(const a of(o=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(Ce(a)){const u=a,d=await u.tool();for(const c of(i=d.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(s.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);s.set(c.name,u)}}return s}async processAfcStream(t){var n,o,i;const s=(i=(o=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&i!==void 0?i:Eo;let a=!1,u=0;const d=await this.initAfcToolsMap(t);return(function(c,f,p){return ee(this,arguments,function*(){for(var h,m,g,v,y,E;u<s;){a&&(u++,a=!1);const _=yield N(c.processParamsMaybeAddMcpUsage(p)),R=yield N(c.generateContentStreamInternal(_)),M=[],L=[];try{for(var S=!0,C=(m=void 0,te(R)),I;I=yield N(C.next()),h=I.done,!h;S=!0){v=I.value,S=!1;const w=v;if(yield yield N(w),w.candidates&&(!((y=w.candidates[0])===null||y===void 0)&&y.content)){L.push(w.candidates[0].content);for(const x of(E=w.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(u<s&&x.functionCall){if(!x.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(x.functionCall.name)){const G=yield N(f.get(x.functionCall.name).callTool([x.functionCall]));M.push(...G)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${x.functionCall.name}`)}}}}catch(w){m={error:w}}finally{try{!S&&!h&&(g=C.return)&&(yield N(g.call(C)))}finally{if(m)throw m.error}}if(M.length>0){a=!0;const w=new Ne;w.candidates=[{content:{role:"user",parts:M}}],yield yield N(w);const x=[];x.push(...L),x.push({role:"user",parts:M});const G=X(p.contents).concat(x);p.contents=G}else break}})})(this,d,t)}async generateContentInternal(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=yo(this.apiClient,t);return u=A("{model}:generateContent",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=_o(f),h=new Ne;return Object.assign(h,p),h})}else{const c=go(this.apiClient,t);return u=A("{model}:generateContent",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=vo(f),h=new Ne;return Object.assign(h,p),h})}}async generateContentStreamInternal(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=yo(this.apiClient,t);return u=A("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(p){return ee(this,arguments,function*(){var h,m,g,v;try{for(var y=!0,E=te(p),S;S=yield N(E.next()),h=S.done,!h;y=!0){v=S.value,y=!1;const C=v,I=_o(yield N(C.json()),t);I.sdkHttpResponse={headers:C.headers};const _=new Ne;Object.assign(_,I),yield yield N(_)}}catch(C){m={error:C}}finally{try{!y&&!h&&(g=E.return)&&(yield N(g.call(E)))}finally{if(m)throw m.error}}})})}else{const c=go(this.apiClient,t);return u=A("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}),a.then(function(p){return ee(this,arguments,function*(){var h,m,g,v;try{for(var y=!0,E=te(p),S;S=yield N(E.next()),h=S.done,!h;y=!0){v=S.value,y=!1;const C=v,I=vo(yield N(C.json()),t);I.sdkHttpResponse={headers:C.headers};const _=new Ne;Object.assign(_,I),yield yield N(_)}}catch(C){m={error:C}}finally{try{!y&&!h&&(g=E.return)&&(yield N(g.call(E)))}finally{if(m)throw m.error}}})})}}async embedContent(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=ba(this.apiClient,t);return u=A("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Ga(f),h=new Qn;return Object.assign(h,p),h})}else{const c=La(this.apiClient,t);return u=A("{model}:batchEmbedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Fa(f),h=new Qn;return Object.assign(h,p),h})}}async generateImagesInternal(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Ka(this.apiClient,t);return u=A("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Xa(f),h=new jn;return Object.assign(h,p),h})}else{const c=Wa(this.apiClient,t);return u=A("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Ya(f),h=new jn;return Object.assign(h,p),h})}}async editImageInternal(t){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const u=ka(this.apiClient,t);return s=A("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),i.then(d=>{const c=xa(d),f=new br;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const u=Ku(this.apiClient,t);return s=A("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),i.then(d=>{const c=Yu(d),f=new Fr;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const u=Mu(this.apiClient,t);return s=A("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>{const c=ku(d),f=new Gr;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const u=Fu(this.apiClient,t);return s=A("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>{const c=Gu(d),f=new Vr;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=hu(this.apiClient,t);return u=A("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Ct(f))}else{const c=pu(this.apiClient,t);return u=A("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>St(f))}}async listInternal(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Cu(this.apiClient,t);return u=A("{models_url}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Au(f),h=new eo;return Object.assign(h,p),h})}else{const c=Su(this.apiClient,t);return u=A("{models_url}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Iu(f),h=new eo;return Object.assign(h,p),h})}}async update(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Zu(this.apiClient,t);return u=A("{model}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Ct(f))}else{const c=Ou(this.apiClient,t);return u=A("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>St(f))}}async delete(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Ra(this.apiClient,t);return u=A("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Na(f),h=new to;return Object.assign(h,p),h})}else{const c=wa(this.apiClient,t);return u=A("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Pa(f),h=new to;return Object.assign(h,p),h})}}async countTokens(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Ca(this.apiClient,t);return u=A("{model}:countTokens",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Aa(f),h=new no;return Object.assign(h,p),h})}else{const c=Sa(this.apiClient,t);return u=A("{model}:countTokens",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Ia(f),h=new no;return Object.assign(h,p),h})}}async computeTokens(t){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const u=ma(this.apiClient,t);return s=A("{model}:computeTokens",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),i.then(d=>{const c=ga(d),f=new $r;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=ou(this.apiClient,t);return u=A("{model}:predictLongRunning",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const p=tu(f),h=new Ze;return Object.assign(h,p),h})}else{const c=nu(this.apiClient,t);return u=A("{model}:predictLongRunning",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>{const p=eu(f),h=new Ze;return Object.assign(h,p),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hc extends se{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,o=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;o&&"httpOptions"in o&&(s=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(t){const n=t.operation,o=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;o&&"httpOptions"in o&&(s=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Mr(t);return u=A("{operationName}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a}else{const c=Nr(t);return u=A("{operationName}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a}}async fetchPredictVideosOperationInternal(t){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const u=Sr(t);return s=A("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bc(e){const t={},n=r(e,["data"]);if(n!=null&&l(t,["data"],n),r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=r(e,["mimeType"]);return o!=null&&l(t,["mimeType"],o),t}function Jc(e){const t={},n=r(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>ed(s))),l(t,["parts"],i)}const o=r(e,["role"]);return o!=null&&l(t,["role"],o),t}function Oc(e,t,n){const o={},i=r(t,["expireTime"]);n!==void 0&&i!=null&&l(n,["expireTime"],i);const s=r(t,["newSessionExpireTime"]);n!==void 0&&s!=null&&l(n,["newSessionExpireTime"],s);const a=r(t,["uses"]);n!==void 0&&a!=null&&l(n,["uses"],a);const u=r(t,["liveConnectConstraints"]);n!==void 0&&u!=null&&l(n,["bidiGenerateContentSetup"],jc(e,u));const d=r(t,["lockAdditionalFields"]);return n!==void 0&&d!=null&&l(n,["fieldMask"],d),o}function Zc(e,t){const n={},o=r(t,["config"]);return o!=null&&l(n,["config"],Oc(e,o,n)),n}function Wc(e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["fileUri"]);n!=null&&l(t,["fileUri"],n);const o=r(e,["mimeType"]);return o!=null&&l(t,["mimeType"],o),t}function Kc(e){const t={},n=r(e,["id"]);n!=null&&l(t,["id"],n);const o=r(e,["args"]);o!=null&&l(t,["args"],o);const i=r(e,["name"]);if(i!=null&&l(t,["name"],i),r(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(r(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Yc(e){const t={};if(r(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=r(e,["enableWidget"]);return n!=null&&l(t,["enableWidget"],n),t}function Xc(e){const t={};if(r(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(r(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=r(e,["timeRangeFilter"]);return n!=null&&l(t,["timeRangeFilter"],n),t}function Qc(e,t){const n={},o=r(e,["generationConfig"]);t!==void 0&&o!=null&&l(t,["setup","generationConfig"],o);const i=r(e,["responseModalities"]);t!==void 0&&i!=null&&l(t,["setup","generationConfig","responseModalities"],i);const s=r(e,["temperature"]);t!==void 0&&s!=null&&l(t,["setup","generationConfig","temperature"],s);const a=r(e,["topP"]);t!==void 0&&a!=null&&l(t,["setup","generationConfig","topP"],a);const u=r(e,["topK"]);t!==void 0&&u!=null&&l(t,["setup","generationConfig","topK"],u);const d=r(e,["maxOutputTokens"]);t!==void 0&&d!=null&&l(t,["setup","generationConfig","maxOutputTokens"],d);const c=r(e,["mediaResolution"]);t!==void 0&&c!=null&&l(t,["setup","generationConfig","mediaResolution"],c);const f=r(e,["seed"]);t!==void 0&&f!=null&&l(t,["setup","generationConfig","seed"],f);const p=r(e,["speechConfig"]);t!==void 0&&p!=null&&l(t,["setup","generationConfig","speechConfig"],$t(p));const h=r(e,["thinkingConfig"]);t!==void 0&&h!=null&&l(t,["setup","generationConfig","thinkingConfig"],h);const m=r(e,["enableAffectiveDialog"]);t!==void 0&&m!=null&&l(t,["setup","generationConfig","enableAffectiveDialog"],m);const g=r(e,["systemInstruction"]);t!==void 0&&g!=null&&l(t,["setup","systemInstruction"],Jc(B(g)));const v=r(e,["tools"]);if(t!==void 0&&v!=null){let R=we(v);Array.isArray(R)&&(R=R.map(M=>nd(Ae(M)))),l(t,["setup","tools"],R)}const y=r(e,["sessionResumption"]);t!==void 0&&y!=null&&l(t,["setup","sessionResumption"],td(y));const E=r(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&l(t,["setup","inputAudioTranscription"],E);const S=r(e,["outputAudioTranscription"]);t!==void 0&&S!=null&&l(t,["setup","outputAudioTranscription"],S);const C=r(e,["realtimeInputConfig"]);t!==void 0&&C!=null&&l(t,["setup","realtimeInputConfig"],C);const I=r(e,["contextWindowCompression"]);t!==void 0&&I!=null&&l(t,["setup","contextWindowCompression"],I);const _=r(e,["proactivity"]);if(t!==void 0&&_!=null&&l(t,["setup","proactivity"],_),r(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function jc(e,t){const n={},o=r(t,["model"]);o!=null&&l(n,["setup","model"],D(e,o));const i=r(t,["config"]);return i!=null&&l(n,["config"],Qc(i,n)),n}function ed(e){const t={},n=r(e,["mediaResolution"]);n!=null&&l(t,["mediaResolution"],n);const o=r(e,["codeExecutionResult"]);o!=null&&l(t,["codeExecutionResult"],o);const i=r(e,["executableCode"]);i!=null&&l(t,["executableCode"],i);const s=r(e,["fileData"]);s!=null&&l(t,["fileData"],Wc(s));const a=r(e,["functionCall"]);a!=null&&l(t,["functionCall"],Kc(a));const u=r(e,["functionResponse"]);u!=null&&l(t,["functionResponse"],u);const d=r(e,["inlineData"]);d!=null&&l(t,["inlineData"],Bc(d));const c=r(e,["text"]);c!=null&&l(t,["text"],c);const f=r(e,["thought"]);f!=null&&l(t,["thought"],f);const p=r(e,["thoughtSignature"]);p!=null&&l(t,["thoughtSignature"],p);const h=r(e,["videoMetadata"]);return h!=null&&l(t,["videoMetadata"],h),t}function td(e){const t={},n=r(e,["handle"]);if(n!=null&&l(t,["handle"],n),r(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function nd(e){const t={};if(r(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=r(e,["computerUse"]);n!=null&&l(t,["computerUse"],n);const o=r(e,["fileSearch"]);o!=null&&l(t,["fileSearch"],o);const i=r(e,["codeExecution"]);if(i!=null&&l(t,["codeExecution"],i),r(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=r(e,["functionDeclarations"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(p=>p)),l(t,["functionDeclarations"],f)}const a=r(e,["googleMaps"]);a!=null&&l(t,["googleMaps"],Yc(a));const u=r(e,["googleSearch"]);u!=null&&l(t,["googleSearch"],Xc(u));const d=r(e,["googleSearchRetrieval"]);d!=null&&l(t,["googleSearchRetrieval"],d);const c=r(e,["urlContext"]);return c!=null&&l(t,["urlContext"],c),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function od(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const o=e[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const i=Object.keys(o).map(s=>`${n}.${s}`);t.push(...i)}else t.push(n)}return t.join(",")}function id(e,t){let n=null;const o=e.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const s=o.setup;typeof s=="object"&&s!==null?(e.bidiGenerateContentSetup=s,n=s):delete e.bidiGenerateContentSetup}else o!==void 0&&delete e.bidiGenerateContentSetup;const i=e.fieldMask;if(n){const s=od(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)s?e.fieldMask=s:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];i.length>0&&(u=i.map(c=>a.includes(c)?`generationConfig.${c}`:c));const d=[];s&&d.push(s),u.length>0&&d.push(...u),d.length>0?e.fieldMask=d.join(","):delete e.fieldMask}else delete e.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?e.fieldMask=i.join(","):delete e.fieldMask;return e}class rd extends se{constructor(t){super(),this.apiClient=t}async create(t){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Zc(this.apiClient,t);s=A("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const d=id(u,t.config);return i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),i.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sd(e,t){const n={},o=r(e,["force"]);return t!==void 0&&o!=null&&l(t,["_query","force"],o),n}function ld(e){const t={},n=r(e,["name"]);n!=null&&l(t,["_url","name"],n);const o=r(e,["config"]);return o!=null&&sd(o,t),t}function ad(e){const t={},n=r(e,["name"]);return n!=null&&l(t,["_url","name"],n),t}function ud(e,t){const n={},o=r(e,["pageSize"]);t!==void 0&&o!=null&&l(t,["_query","pageSize"],o);const i=r(e,["pageToken"]);return t!==void 0&&i!=null&&l(t,["_query","pageToken"],i),n}function cd(e){const t={},n=r(e,["parent"]);n!=null&&l(t,["_url","parent"],n);const o=r(e,["config"]);return o!=null&&ud(o,t),t}function dd(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&l(t,["sdkHttpResponse"],n);const o=r(e,["nextPageToken"]);o!=null&&l(t,["nextPageToken"],o);const i=r(e,["documents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),l(t,["documents"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fd extends se{constructor(t){super(),this.apiClient=t,this.list=async n=>new he(re.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(t){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ad(t);return s=A("{name}",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>d)}}async delete(t){var n,o;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ld(t);i=A("{name}",a._url),s=a._query,delete a._url,delete a._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=cd(t);return s=A("{parent}/documents",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>{const c=dd(d),f=new zr;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pd extends se{constructor(t,n=new fd(t)){super(),this.apiClient=t,this.documents=n,this.list=async(o={})=>new he(re.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(o),o)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=oc(t);return s=A("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>d)}}async get(t){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=sc(t);return s=A("{name}",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>d)}}async delete(t){var n,o;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=rc(t);i=A("{name}",a._url),s=a._query,delete a._url,delete a._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=fc(t);return s=A("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>{const c=pc(d),f=new qr;return Object.assign(f,c),f})}}async uploadToFileSearchStoreInternal(t){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=hc(t);return s=A("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>{const c=mc(d),f=new Hr;return Object.assign(f,c),f})}}async importFile(t){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=uc(t);return s=A("{file_search_store_name}:importFile",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>{const c=ac(d),f=new Lt;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Si=function(){const{crypto:e}=globalThis;if(e!=null&&e.randomUUID)return Si=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const hd=()=>Si();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function At(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const wt=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Q extends Error{}class W extends Q{constructor(t,n,o,i){super(`${W.makeMessage(t,n,o)}`),this.status=t,this.headers=i,this.error=n}static makeMessage(t,n,o){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return t&&i?`${t} ${i}`:t?`${t} status code (no body)`:i||"(no status code or body)"}static generate(t,n,o,i){if(!t||!i)return new rt({message:o,cause:wt(n)});const s=n;return t===400?new Ii(t,s,o,i):t===401?new Ai(t,s,o,i):t===403?new wi(t,s,o,i):t===404?new Ri(t,s,o,i):t===409?new Pi(t,s,o,i):t===422?new Ni(t,s,o,i):t===429?new Mi(t,s,o,i):t>=500?new ki(t,s,o,i):new W(t,s,o,i)}}class Rt extends W{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class rt extends W{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class Ci extends rt{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Ii extends W{}class Ai extends W{}class wi extends W{}class Ri extends W{}class Pi extends W{}class Ni extends W{}class Mi extends W{}class ki extends W{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const md=/^[a-z][a-z0-9+.-]*:/i,gd=e=>md.test(e);let Pt=e=>(Pt=Array.isArray,Pt(e));const yd=Pt;let vd=yd;const Ao=vd;function _d(e){if(!e)return!0;for(const t in e)return!1;return!0}function Td(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const Ed=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Q(`${e} must be an integer`);if(t<0)throw new Q(`${e} must be a positive integer`);return t},Sd=e=>{try{return JSON.parse(e)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cd=e=>new Promise(t=>setTimeout(t,e));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ve="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Id(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Ad=()=>{var e,t,n,o,i;const s=Id();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ve,"X-Stainless-OS":Ro(Deno.build.os),"X-Stainless-Arch":wo(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ve,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ve,"X-Stainless-OS":Ro((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":wo((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const a=wd();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ve,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ve,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function wd(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const o=n.exec(navigator.userAgent);if(o){const i=o[1]||0,s=o[2]||0,a=o[3]||0;return{browser:t,version:`${i}.${s}.${a}`}}}return null}const wo=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",Ro=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let be;const Rd=()=>be??(be=Ad());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pd(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function xi(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function Nd(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return xi({start(){},async pull(n){const{done:o,value:i}=await t.next();o?n.close():n.enqueue(i)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function Di(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Md(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}const o=e.getReader(),i=o.cancel();o.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kd=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ui=()=>{var e;if(typeof File>"u"){const{process:t}=globalThis,n=typeof((e=t==null?void 0:t.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function pt(e,t,n){return Ui(),new File(e,t??"unknown_file",n)}function xd(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const Dd=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Li=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",Ud=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&Li(e),Ld=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function bd(e,t,n){if(Ui(),e=await e,Ud(e))return e instanceof File?e:pt([await e.arrayBuffer()],e.name);if(Ld(e)){const i=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),pt(await Nt(i),t,n)}const o=await Nt(e);if(t||(t=xd(e)),!(n!=null&&n.type)){const i=o.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return pt(o,t,n)}async function Nt(e){var t,n,o,i,s;let a=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)a.push(e);else if(Li(e))a.push(e instanceof Blob?e:await e.arrayBuffer());else if(Dd(e))try{for(var u=!0,d=te(e),c;c=await d.next(),t=c.done,!t;u=!0){i=c.value,u=!1;const f=i;a.push(...await Nt(f))}}catch(f){n={error:f}}finally{try{!u&&!t&&(o=d.return)&&await o.call(d)}finally{if(n)throw n.error}}else{const f=(s=e==null?void 0:e.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof e}${f?`; constructor: ${f}`:""}${Fd(e)}`)}return a}function Fd(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bi{constructor(t){this._client=t}}bi._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fi(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Po=Object.freeze(Object.create(null)),Gd=(e=Fi)=>(function(n,...o){if(n.length===1)return n[0];let i=!1;const s=[],a=n.reduce((f,p,h)=>{var m,g,v;/[?#]/.test(p)&&(i=!0);const y=o[h];let E=(i?encodeURIComponent:e)(""+y);return h!==o.length&&(y==null||typeof y=="object"&&y.toString===((v=Object.getPrototypeOf((g=Object.getPrototypeOf((m=y.hasOwnProperty)!==null&&m!==void 0?m:Po))!==null&&g!==void 0?g:Po))===null||v===void 0?void 0:v.toString))&&(E=y+"",s.push({start:f.length+p.length,length:E.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),f+p+(h===o.length?"":E)},""),u=a.split(/[?#]/,1)[0],d=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=d.exec(u))!==null;)s.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(s.sort((f,p)=>f.start-p.start),s.length>0){let f=0;const p=s.reduce((h,m)=>{const g=" ".repeat(m.start-f),v="^".repeat(m.length);return f=m.start+m.length,h+g+v},"");throw new Q(`Path parameters result in path with invalid segments:
${s.map(h=>h.error).join(`
`)}
${a}
${p}`)}return a}),Fe=Gd(Fi);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gi extends bi{create(t,n){var o;const{api_version:i=this._client.apiVersion}=t,s=Ke(t,["api_version"]);if("model"in s&&"agent_config"in s)throw new Q("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new Q("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Fe`/${i}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(o=t.stream)!==null&&o!==void 0?o:!1}))}delete(t,n={},o){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(Fe`/${i}/interactions/${t}`,o)}cancel(t,n={},o){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(Fe`/${i}/interactions/${t}/cancel`,o)}get(t,n={},o){var i;const s=n??{},{api_version:a=this._client.apiVersion}=s,u=Ke(s,["api_version"]);return this._client.get(Fe`/${a}/interactions/${t}`,Object.assign(Object.assign({query:u},o),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}Gi._key=Object.freeze(["interactions"]);class Vi extends Gi{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vd(e){let t=0;for(const i of e)t+=i.length;const n=new Uint8Array(t);let o=0;for(const i of e)n.set(i,o),o+=i.length;return n}let Ge;function qt(e){let t;return(Ge??(t=new globalThis.TextEncoder,Ge=t.encode.bind(t)))(e)}let Ve;function No(e){let t;return(Ve??(t=new globalThis.TextDecoder,Ve=t.decode.bind(t)))(e)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class st{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?qt(t):t;this.buffer=Vd([this.buffer,n]);const o=[];let i;for(;(i=$d(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){o.push(No(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,a=No(this.buffer.subarray(0,s));o.push(a),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}st.NEWLINE_CHARS=new Set([`
`,"\r"]);st.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function $d(e,t){for(let i=t??0;i<e.length;i++){if(e[i]===10)return{preceding:i,index:i+1,carriage:!1};if(e[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function zd(e){for(let o=0;o<e.length-1;o++){if(e[o]===10&&e[o+1]===10||e[o]===13&&e[o+1]===13)return o+2;if(e[o]===13&&e[o+1]===10&&o+3<e.length&&e[o+2]===13&&e[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ye={off:0,error:200,warn:300,info:400,debug:500},Mo=(e,t,n)=>{if(e){if(Td(Ye,e))return e;Z(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(Ye))}`)}};function ke(){}function $e(e,t,n){return!t||Ye[e]>Ye[n]?ke:t[e].bind(t)}const qd={error:ke,warn:ke,info:ke,debug:ke};let ko=new WeakMap;function Z(e){var t;const n=e.logger,o=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return qd;const i=ko.get(n);if(i&&i[0]===o)return i[1];const s={error:$e("error",n,o),warn:$e("warn",n,o),info:$e("info",n,o),debug:$e("debug",n,o)};return ko.set(n,[o,s]),s}const de=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Te{constructor(t,n,o){this.iterator=t,this.controller=n,this.client=o}static fromSSEResponse(t,n,o){let i=!1;const s=o?Z(o):console;function a(){return ee(this,arguments,function*(){var d,c,f,p;if(i)throw new Q("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let h=!1;try{try{for(var m=!0,g=te(Hd(t,n)),v;v=yield N(g.next()),d=v.done,!d;m=!0){p=v.value,m=!1;const y=p;if(!h)if(y.data.startsWith("[DONE]")){h=!0;continue}else try{yield yield N(JSON.parse(y.data))}catch(E){throw s.error("Could not parse message into JSON:",y.data),s.error("From chunk:",y.raw),E}}}catch(y){c={error:y}}finally{try{!m&&!d&&(f=g.return)&&(yield N(f.call(g)))}finally{if(c)throw c.error}}h=!0}catch(y){if(At(y))return yield N(void 0);throw y}finally{h||n.abort()}})}return new Te(a,n,o)}static fromReadableStream(t,n,o){let i=!1;function s(){return ee(this,arguments,function*(){var d,c,f,p;const h=new st,m=Di(t);try{for(var g=!0,v=te(m),y;y=yield N(v.next()),d=y.done,!d;g=!0){p=y.value,g=!1;const E=p;for(const S of h.decode(E))yield yield N(S)}}catch(E){c={error:E}}finally{try{!g&&!d&&(f=v.return)&&(yield N(f.call(v)))}finally{if(c)throw c.error}}for(const E of h.flush())yield yield N(E)})}function a(){return ee(this,arguments,function*(){var d,c,f,p;if(i)throw new Q("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let h=!1;try{try{for(var m=!0,g=te(s()),v;v=yield N(g.next()),d=v.done,!d;m=!0){p=v.value,m=!1;const y=p;h||y&&(yield yield N(JSON.parse(y)))}}catch(y){c={error:y}}finally{try{!m&&!d&&(f=g.return)&&(yield N(f.call(g)))}finally{if(c)throw c.error}}h=!0}catch(y){if(At(y))return yield N(void 0);throw y}finally{h||n.abort()}})}return new Te(a,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],o=this.iterator(),i=s=>({next:()=>{if(s.length===0){const a=o.next();t.push(a),n.push(a)}return s.shift()}});return[new Te(()=>i(t),this.controller,this.client),new Te(()=>i(n),this.controller,this.client)]}toReadableStream(){const t=this;let n;return xi({async start(){n=t[Symbol.asyncIterator]()},async pull(o){try{const{value:i,done:s}=await n.next();if(s)return o.close();const a=qt(JSON.stringify(i)+`
`);o.enqueue(a)}catch(i){o.error(i)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function Hd(e,t){return ee(this,arguments,function*(){var o,i,s,a;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Q("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Q("Attempted to iterate over a response with no body");const u=new Jd,d=new st,c=Di(e.body);try{for(var f=!0,p=te(Bd(c)),h;h=yield N(p.next()),o=h.done,!o;f=!0){a=h.value,f=!1;const m=a;for(const g of d.decode(m)){const v=u.decode(g);v&&(yield yield N(v))}}}catch(m){i={error:m}}finally{try{!f&&!o&&(s=p.return)&&(yield N(s.call(p)))}finally{if(i)throw i.error}}for(const m of d.flush()){const g=u.decode(m);g&&(yield yield N(g))}})}function Bd(e){return ee(this,arguments,function*(){var n,o,i,s;let a=new Uint8Array;try{for(var u=!0,d=te(e),c;c=yield N(d.next()),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;if(f==null)continue;const p=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?qt(f):f;let h=new Uint8Array(a.length+p.length);h.set(a),h.set(p,a.length),a=h;let m;for(;(m=zd(a))!==-1;)yield yield N(a.slice(0,m)),a=a.slice(m)}}catch(f){o={error:f}}finally{try{!u&&!n&&(i=d.return)&&(yield N(i.call(d)))}finally{if(o)throw o.error}}a.length>0&&(yield yield N(a))})}class Jd{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,o,i]=Od(t,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function Od(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Zd(e,t){const{response:n,requestLogID:o,retryOfRequestLogID:i,startTime:s}=t,a=await(async()=>{var u;if(t.options.stream)return Z(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):Te.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const d=n.headers.get("content-type"),c=(u=d==null?void 0:d.split(";")[0])===null||u===void 0?void 0:u.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?n.headers.get("content-length")==="0"?void 0:await n.json():await n.text()})();return Z(e).debug(`[${o}] response parsed`,de({retryOfRequestLogID:i,url:n.url,status:n.status,body:a,durationMs:Date.now()-s})),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ht extends Promise{constructor(t,n,o=Zd){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=o,this.client=t}_thenUnwrap(t){return new Ht(this.client,this.responsePromise,async(n,o)=>t(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $i=Symbol("brand.privateNullableHeaders");function*Wd(e){if(!e)return;if($i in e){const{values:o,nulls:i}=e;yield*o.entries();for(const s of i)yield[s,null];return}let t=!1,n;e instanceof Headers?n=e.entries():Ao(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let o of n){const i=o[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=Ao(o[1])?o[1]:[o[1]];let a=!1;for(const u of s)u!==void 0&&(t&&!a&&(a=!0,yield[i,null]),yield[i,u])}}const Me=e=>{const t=new Headers,n=new Set;for(const o of e){const i=new Set;for(const[s,a]of Wd(o)){const u=s.toLowerCase();i.has(u)||(t.delete(s),i.add(u)),a===null?(t.delete(s),n.add(u)):(t.append(s,a),n.delete(u))}}return{[$i]:!0,values:t,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ht=e=>{var t,n,o,i,s,a;if(typeof globalThis.process<"u")return(o=(n=(t=gr)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(a=(s=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||s===void 0?void 0:s.call(i,e))===null||a===void 0?void 0:a.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var zi;class lt{constructor(t){var n,o,i,s,a,u,d,{baseURL:c=ht("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=ht("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=t,h=Ke(t,["baseURL","apiKey","apiVersion"]);const m=Object.assign(Object.assign({apiKey:f,apiVersion:p},h),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=m.baseURL,this.timeout=(o=m.timeout)!==null&&o!==void 0?o:lt.DEFAULT_TIMEOUT,this.logger=(i=m.logger)!==null&&i!==void 0?i:console;const g="warn";this.logLevel=g,this.logLevel=(a=(s=Mo(m.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:Mo(ht("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:g,this.fetchOptions=m.fetchOptions,this.maxRetries=(u=m.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(d=m.fetch)!==null&&d!==void 0?d:Pd(),this.encoder=kd,this._options=m,this.apiKey=f,this.apiVersion=p,this.clientAdapter=m.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const n=Me([t.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Me([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Me([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new Q(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ve}`}defaultIdempotencyKey(){return`stainless-node-retry-${hd()}`}makeStatusError(t,n,o,i){return W.generate(t,n,o,i)}buildURL(t,n,o){const i=!this.baseURLOverridden()&&o||this.baseURL,s=gd(t)?new URL(t):new URL(i+(i.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),a=this.defaultQuery();return _d(a)||(n=Object.assign(Object.assign({},a),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const n=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(t,{url:n,options:o}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,o){return this.request(Promise.resolve(o).then(i=>Object.assign({method:t,path:n},i)))}request(t,n=null){return new Ht(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,o){var i,s,a;const u=await t,d=(i=u.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=d),await this.prepareOptions(u);const{req:c,url:f,timeout:p}=await this.buildRequest(u,{retryCount:d-n});await this.prepareRequest(c,{url:f,options:u});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=o===void 0?"":`, retryOf: ${o}`,g=Date.now();if(Z(this).debug(`[${h}] sending request`,de({retryOfRequestLogID:o,method:u.method,url:f,options:u,headers:c.headers})),!((s=u.signal)===null||s===void 0)&&s.aborted)throw new Rt;const v=new AbortController,y=await this.fetchWithTimeout(f,c,p,v).catch(wt),E=Date.now();if(y instanceof globalThis.Error){const C=`retrying, ${n} attempts remaining`;if(!((a=u.signal)===null||a===void 0)&&a.aborted)throw new Rt;const I=At(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(n)return Z(this).info(`[${h}] connection ${I?"timed out":"failed"} - ${C}`),Z(this).debug(`[${h}] connection ${I?"timed out":"failed"} (${C})`,de({retryOfRequestLogID:o,url:f,durationMs:E-g,message:y.message})),this.retryRequest(u,n,o??h);throw Z(this).info(`[${h}] connection ${I?"timed out":"failed"} - error; no more retries left`),Z(this).debug(`[${h}] connection ${I?"timed out":"failed"} (error; no more retries left)`,de({retryOfRequestLogID:o,url:f,durationMs:E-g,message:y.message})),I?new Ci:new rt({cause:y})}const S=`[${h}${m}] ${c.method} ${f} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${E-g}ms`;if(!y.ok){const C=await this.shouldRetry(y);if(n&&C){const w=`retrying, ${n} attempts remaining`;return await Md(y.body),Z(this).info(`${S} - ${w}`),Z(this).debug(`[${h}] response error (${w})`,de({retryOfRequestLogID:o,url:y.url,status:y.status,headers:y.headers,durationMs:E-g})),this.retryRequest(u,n,o??h,y.headers)}const I=C?"error; no more retries left":"error; not retryable";Z(this).info(`${S} - ${I}`);const _=await y.text().catch(w=>wt(w).message),R=Sd(_),M=R?void 0:_;throw Z(this).debug(`[${h}] response error (${I})`,de({retryOfRequestLogID:o,url:y.url,status:y.status,headers:y.headers,message:M,durationMs:Date.now()-g})),this.makeStatusError(y.status,R,M,y.headers)}return Z(this).info(S),Z(this).debug(`[${h}] response start`,de({retryOfRequestLogID:o,url:y.url,status:y.status,headers:y.headers,durationMs:E-g})),{response:y,options:u,controller:v,requestLogID:h,retryOfRequestLogID:o,startTime:g}}async fetchWithTimeout(t,n,o,i){const s=n||{},{signal:a,method:u}=s,d=Ke(s,["signal","method"]),c=i.abort.bind(i);a&&a.addEventListener("abort",c,{once:!0});const f=setTimeout(c,o),p=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,h=Object.assign(Object.assign(Object.assign({signal:i.signal},p?{duplex:"half"}:{}),{method:"GET"}),d);u&&(h.method=u.toUpperCase());try{return await this.fetch.call(void 0,t,h)}finally{clearTimeout(f)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,o,i){var s;let a;const u=i==null?void 0:i.get("retry-after-ms");if(u){const c=parseFloat(u);Number.isNaN(c)||(a=c)}const d=i==null?void 0:i.get("retry-after");if(d&&!a){const c=parseFloat(d);Number.isNaN(c)?a=Date.parse(d)-Date.now():a=c*1e3}if(!(a&&0<=a&&a<60*1e3)){const c=(s=t.maxRetries)!==null&&s!==void 0?s:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,c)}return await Cd(a),this.makeRequest(t,n-1,o)}calculateDefaultRetryTimeoutMillis(t,n){const s=n-t,a=Math.min(.5*Math.pow(2,s),8),u=1-Math.random()*.25;return a*u*1e3}async buildRequest(t,{retryCount:n=0}={}){var o,i,s;const a=Object.assign({},t),{method:u,path:d,query:c,defaultBaseURL:f}=a,p=this.buildURL(d,c,f);"timeout"in a&&Ed("timeout",a.timeout),a.timeout=(o=a.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:h,body:m}=this.buildBody({options:a}),g=await this.buildHeaders({options:t,method:u,bodyHeaders:h,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:g},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"}),m&&{body:m}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(s=a.fetchOptions)!==null&&s!==void 0?s:{}),url:p,timeout:a.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:o,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=t.idempotencyKey);const a=await this.authHeaders(t);let u=Me([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),Rd()),this._options.defaultHeaders,o,t.headers,a]);return this.validateHeaders(u),u.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const o=Me([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&o.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:Nd(t)}:this.encoder({body:t,headers:o})}}lt.DEFAULT_TIMEOUT=6e4;class z extends lt{constructor(){super(...arguments),this.interactions=new Vi(this)}}zi=z;z.GeminiNextGenAPIClient=zi;z.GeminiNextGenAPIClientError=Q;z.APIError=W;z.APIConnectionError=rt;z.APIConnectionTimeoutError=Ci;z.APIUserAbortError=Rt;z.NotFoundError=Ri;z.ConflictError=Pi;z.RateLimitError=Mi;z.BadRequestError=Ii;z.AuthenticationError=Ai;z.InternalServerError=ki;z.PermissionDeniedError=wi;z.UnprocessableEntityError=Ni;z.toFile=bd;z.Interactions=Vi;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kd(e,t){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],o),n}function Yd(e,t){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],o),n}function Xd(e,t){const n={},o=r(e,["sdkHttpResponse"]);return o!=null&&l(n,["sdkHttpResponse"],o),n}function Qd(e,t){const n={},o=r(e,["sdkHttpResponse"]);return o!=null&&l(n,["sdkHttpResponse"],o),n}function jd(e,t,n){const o={};if(r(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=r(e,["tunedModelDisplayName"]);if(t!==void 0&&i!=null&&l(t,["displayName"],i),r(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=r(e,["epochCount"]);t!==void 0&&s!=null&&l(t,["tuningTask","hyperparameters","epochCount"],s);const a=r(e,["learningRateMultiplier"]);if(a!=null&&l(o,["tuningTask","hyperparameters","learningRateMultiplier"],a),r(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(r(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(r(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(r(e,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(r(e,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const u=r(e,["batchSize"]);t!==void 0&&u!=null&&l(t,["tuningTask","hyperparameters","batchSize"],u);const d=r(e,["learningRate"]);if(t!==void 0&&d!=null&&l(t,["tuningTask","hyperparameters","learningRate"],d),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(r(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(r(e,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(r(e,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(r(e,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(r(e,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return o}function ef(e,t,n){const o={};let i=r(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const _=r(e,["validationDataset"]);t!==void 0&&_!=null&&l(t,["supervisedTuningSpec"],mt(_))}else if(i==="PREFERENCE_TUNING"){const _=r(e,["validationDataset"]);t!==void 0&&_!=null&&l(t,["preferenceOptimizationSpec"],mt(_))}else if(i==="DISTILLATION"){const _=r(e,["validationDataset"]);t!==void 0&&_!=null&&l(t,["distillationSpec"],mt(_))}const s=r(e,["tunedModelDisplayName"]);t!==void 0&&s!=null&&l(t,["tunedModelDisplayName"],s);const a=r(e,["description"]);t!==void 0&&a!=null&&l(t,["description"],a);let u=r(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const _=r(e,["epochCount"]);t!==void 0&&_!=null&&l(t,["supervisedTuningSpec","hyperParameters","epochCount"],_)}else if(u==="PREFERENCE_TUNING"){const _=r(e,["epochCount"]);t!==void 0&&_!=null&&l(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],_)}else if(u==="DISTILLATION"){const _=r(e,["epochCount"]);t!==void 0&&_!=null&&l(t,["distillationSpec","hyperParameters","epochCount"],_)}let d=r(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const _=r(e,["learningRateMultiplier"]);t!==void 0&&_!=null&&l(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],_)}else if(d==="PREFERENCE_TUNING"){const _=r(e,["learningRateMultiplier"]);t!==void 0&&_!=null&&l(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],_)}else if(d==="DISTILLATION"){const _=r(e,["learningRateMultiplier"]);t!==void 0&&_!=null&&l(t,["distillationSpec","hyperParameters","learningRateMultiplier"],_)}let c=r(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const _=r(e,["exportLastCheckpointOnly"]);t!==void 0&&_!=null&&l(t,["supervisedTuningSpec","exportLastCheckpointOnly"],_)}else if(c==="PREFERENCE_TUNING"){const _=r(e,["exportLastCheckpointOnly"]);t!==void 0&&_!=null&&l(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],_)}else if(c==="DISTILLATION"){const _=r(e,["exportLastCheckpointOnly"]);t!==void 0&&_!=null&&l(t,["distillationSpec","exportLastCheckpointOnly"],_)}let f=r(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const _=r(e,["adapterSize"]);t!==void 0&&_!=null&&l(t,["supervisedTuningSpec","hyperParameters","adapterSize"],_)}else if(f==="PREFERENCE_TUNING"){const _=r(e,["adapterSize"]);t!==void 0&&_!=null&&l(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],_)}else if(f==="DISTILLATION"){const _=r(e,["adapterSize"]);t!==void 0&&_!=null&&l(t,["distillationSpec","hyperParameters","adapterSize"],_)}let p=r(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const _=r(e,["tuningMode"]);t!==void 0&&_!=null&&l(t,["supervisedTuningSpec","tuningMode"],_)}const h=r(e,["customBaseModel"]);t!==void 0&&h!=null&&l(t,["customBaseModel"],h);let m=r(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const _=r(e,["batchSize"]);t!==void 0&&_!=null&&l(t,["supervisedTuningSpec","hyperParameters","batchSize"],_)}let g=r(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const _=r(e,["learningRate"]);t!==void 0&&_!=null&&l(t,["supervisedTuningSpec","hyperParameters","learningRate"],_)}const v=r(e,["labels"]);t!==void 0&&v!=null&&l(t,["labels"],v);const y=r(e,["beta"]);t!==void 0&&y!=null&&l(t,["preferenceOptimizationSpec","hyperParameters","beta"],y);const E=r(e,["baseTeacherModel"]);t!==void 0&&E!=null&&l(t,["distillationSpec","baseTeacherModel"],E);const S=r(e,["tunedTeacherModelSource"]);t!==void 0&&S!=null&&l(t,["distillationSpec","tunedTeacherModelSource"],S);const C=r(e,["sftLossWeightMultiplier"]);t!==void 0&&C!=null&&l(t,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],C);const I=r(e,["outputUri"]);return t!==void 0&&I!=null&&l(t,["outputUri"],I),o}function tf(e,t){const n={},o=r(e,["baseModel"]);o!=null&&l(n,["baseModel"],o);const i=r(e,["preTunedModel"]);i!=null&&l(n,["preTunedModel"],i);const s=r(e,["trainingDataset"]);s!=null&&pf(s);const a=r(e,["config"]);return a!=null&&jd(a,n),n}function nf(e,t){const n={},o=r(e,["baseModel"]);o!=null&&l(n,["baseModel"],o);const i=r(e,["preTunedModel"]);i!=null&&l(n,["preTunedModel"],i);const s=r(e,["trainingDataset"]);s!=null&&hf(s,n,t);const a=r(e,["config"]);return a!=null&&ef(a,n,t),n}function of(e,t){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],o),n}function rf(e,t){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],o),n}function sf(e,t,n){const o={},i=r(e,["pageSize"]);t!==void 0&&i!=null&&l(t,["_query","pageSize"],i);const s=r(e,["pageToken"]);t!==void 0&&s!=null&&l(t,["_query","pageToken"],s);const a=r(e,["filter"]);return t!==void 0&&a!=null&&l(t,["_query","filter"],a),o}function lf(e,t,n){const o={},i=r(e,["pageSize"]);t!==void 0&&i!=null&&l(t,["_query","pageSize"],i);const s=r(e,["pageToken"]);t!==void 0&&s!=null&&l(t,["_query","pageToken"],s);const a=r(e,["filter"]);return t!==void 0&&a!=null&&l(t,["_query","filter"],a),o}function af(e,t){const n={},o=r(e,["config"]);return o!=null&&sf(o,n),n}function uf(e,t){const n={},o=r(e,["config"]);return o!=null&&lf(o,n),n}function cf(e,t){const n={},o=r(e,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(e,["nextPageToken"]);i!=null&&l(n,["nextPageToken"],i);const s=r(e,["tunedModels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>qi(u))),l(n,["tuningJobs"],a)}return n}function df(e,t){const n={},o=r(e,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(e,["nextPageToken"]);i!=null&&l(n,["nextPageToken"],i);const s=r(e,["tuningJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>Mt(u))),l(n,["tuningJobs"],a)}return n}function ff(e,t){const n={},o=r(e,["name"]);o!=null&&l(n,["model"],o);const i=r(e,["name"]);return i!=null&&l(n,["endpoint"],i),n}function pf(e,t){const n={};if(r(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=r(e,["examples"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),l(n,["examples","examples"],i)}return n}function hf(e,t,n){const o={};let i=r(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const a=r(e,["gcsUri"]);t!==void 0&&a!=null&&l(t,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(i==="PREFERENCE_TUNING"){const a=r(e,["gcsUri"]);t!==void 0&&a!=null&&l(t,["preferenceOptimizationSpec","trainingDatasetUri"],a)}else if(i==="DISTILLATION"){const a=r(e,["gcsUri"]);t!==void 0&&a!=null&&l(t,["distillationSpec","promptDatasetUri"],a)}let s=r(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const a=r(e,["vertexDatasetResource"]);t!==void 0&&a!=null&&l(t,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(s==="PREFERENCE_TUNING"){const a=r(e,["vertexDatasetResource"]);t!==void 0&&a!=null&&l(t,["preferenceOptimizationSpec","trainingDatasetUri"],a)}else if(s==="DISTILLATION"){const a=r(e,["vertexDatasetResource"]);t!==void 0&&a!=null&&l(t,["distillationSpec","promptDatasetUri"],a)}if(r(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function qi(e,t){const n={},o=r(e,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(e,["name"]);i!=null&&l(n,["name"],i);const s=r(e,["state"]);s!=null&&l(n,["state"],ii(s));const a=r(e,["createTime"]);a!=null&&l(n,["createTime"],a);const u=r(e,["tuningTask","startTime"]);u!=null&&l(n,["startTime"],u);const d=r(e,["tuningTask","completeTime"]);d!=null&&l(n,["endTime"],d);const c=r(e,["updateTime"]);c!=null&&l(n,["updateTime"],c);const f=r(e,["description"]);f!=null&&l(n,["description"],f);const p=r(e,["baseModel"]);p!=null&&l(n,["baseModel"],p);const h=r(e,["_self"]);return h!=null&&l(n,["tunedModel"],ff(h)),n}function Mt(e,t){const n={},o=r(e,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(e,["name"]);i!=null&&l(n,["name"],i);const s=r(e,["state"]);s!=null&&l(n,["state"],ii(s));const a=r(e,["createTime"]);a!=null&&l(n,["createTime"],a);const u=r(e,["startTime"]);u!=null&&l(n,["startTime"],u);const d=r(e,["endTime"]);d!=null&&l(n,["endTime"],d);const c=r(e,["updateTime"]);c!=null&&l(n,["updateTime"],c);const f=r(e,["error"]);f!=null&&l(n,["error"],f);const p=r(e,["description"]);p!=null&&l(n,["description"],p);const h=r(e,["baseModel"]);h!=null&&l(n,["baseModel"],h);const m=r(e,["tunedModel"]);m!=null&&l(n,["tunedModel"],m);const g=r(e,["preTunedModel"]);g!=null&&l(n,["preTunedModel"],g);const v=r(e,["supervisedTuningSpec"]);v!=null&&l(n,["supervisedTuningSpec"],v);const y=r(e,["preferenceOptimizationSpec"]);y!=null&&l(n,["preferenceOptimizationSpec"],y);const E=r(e,["distillationSpec"]);E!=null&&l(n,["distillationSpec"],E);const S=r(e,["tuningDataStats"]);S!=null&&l(n,["tuningDataStats"],S);const C=r(e,["encryptionSpec"]);C!=null&&l(n,["encryptionSpec"],C);const I=r(e,["partnerModelTuningSpec"]);I!=null&&l(n,["partnerModelTuningSpec"],I);const _=r(e,["customBaseModel"]);_!=null&&l(n,["customBaseModel"],_);const R=r(e,["experiment"]);R!=null&&l(n,["experiment"],R);const M=r(e,["labels"]);M!=null&&l(n,["labels"],M);const L=r(e,["outputUri"]);L!=null&&l(n,["outputUri"],L);const w=r(e,["pipelineJob"]);w!=null&&l(n,["pipelineJob"],w);const x=r(e,["serviceAccount"]);x!=null&&l(n,["serviceAccount"],x);const G=r(e,["tunedModelDisplayName"]);G!=null&&l(n,["tunedModelDisplayName"],G);const K=r(e,["veoTuningSpec"]);return K!=null&&l(n,["veoTuningSpec"],K),n}function mf(e,t){const n={},o=r(e,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(e,["name"]);i!=null&&l(n,["name"],i);const s=r(e,["metadata"]);s!=null&&l(n,["metadata"],s);const a=r(e,["done"]);a!=null&&l(n,["done"],a);const u=r(e,["error"]);return u!=null&&l(n,["error"],u),n}function mt(e,t){const n={},o=r(e,["gcsUri"]);o!=null&&l(n,["validationDatasetUri"],o);const i=r(e,["vertexDatasetResource"]);return i!=null&&l(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gf extends se{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new he(re.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),s=await this.tuneMldevInternal(i);let a="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?a=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(a=s.name.split("/operations/")[0]),{name:a,state:yt.JOB_STATE_QUEUED}}}}async getInternal(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=rf(t);return u=A("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>Mt(f))}else{const c=of(t);return u=A("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>qi(f))}}async listInternal(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=uf(t);return u=A("tuningJobs",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=df(f),h=new oo;return Object.assign(h,p),h})}else{const c=af(t);return u=A("tunedModels",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=cf(f),h=new oo;return Object.assign(h,p),h})}}async cancel(t){var n,o,i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Yd(t);return u=A("{name}:cancel",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Qd(f),h=new io;return Object.assign(h,p),h})}else{const c=Kd(t);return u=A("{name}:cancel",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Xd(f),h=new io;return Object.assign(h,p),h})}}async tuneInternal(t){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const u=nf(t,t);return s=A("tuningJobs",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),i.then(d=>Mt(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=tf(t);return s=A("tunedModels",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),i.then(d=>mf(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yf{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const vf=1024*1024*8,_f=3,Tf=1e3,Ef=2,Xe="x-goog-upload-status";async function Sf(e,t,n){var o;const i=await Hi(e,t,n),s=await(i==null?void 0:i.json());if(((o=i==null?void 0:i.headers)===null||o===void 0?void 0:o[Xe])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function Cf(e,t,n){var o;const i=await Hi(e,t,n),s=await(i==null?void 0:i.json());if(((o=i==null?void 0:i.headers)===null||o===void 0?void 0:o[Xe])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=Qo(s),u=new bt;return Object.assign(u,a),u}async function Hi(e,t,n){var o,i;let s=0,a=0,u=new _t(new Response),d="upload";for(s=e.size;a<s;){const c=Math.min(vf,s-a),f=e.slice(a,a+c);a+c>=s&&(d+=", finalize");let p=0,h=Tf;for(;p<_f&&(u=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(a),"Content-Length":String(c)}}}),!(!((o=u==null?void 0:u.headers)===null||o===void 0)&&o[Xe]));)p++,await Af(h),h=h*Ef;if(a+=c,((i=u==null?void 0:u.headers)===null||i===void 0?void 0:i[Xe])!=="active")break;if(s<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function If(e){return{size:e.size,type:e.type}}function Af(e){return new Promise(t=>setTimeout(t,e))}class wf{async upload(t,n,o){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Sf(t,n,o)}async uploadToFileSearchStore(t,n,o){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Cf(t,n,o)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await If(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rf{create(t,n,o){return new Pf(t,n,o)}}class Pf{constructor(t,n,o){this.url=t,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xo="x-goog-api-key";class Nf{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(xo)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(xo,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mf="gl-node/";class kf{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new z({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout});return this._interactions=n.interactions,this._interactions}constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const o=Tr(t.httpOptions,t.vertexai,void 0,void 0);o&&(t.httpOptions?t.httpOptions.baseUrl=o:t.httpOptions={baseUrl:o}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const i=new Nf(this.apiKey);this.apiClient=new Cc({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Mf+"web",uploader:new wf,downloader:new yf}),this.models=new qc(this.apiClient),this.live=new bc(this.apiClient,i,new Rf),this.batches=new Ys(this.apiClient),this.chats=new kl(this.models,this.apiClient),this.caches=new Pl(this.apiClient),this.files=new Hl(this.apiClient),this.operations=new Hc(this.apiClient),this.authTokens=new rd(this.apiClient),this.tunings=new gf(this.apiClient),this.fileSearchStores=new pd(this.apiClient)}}function T(e,t,n){function o(u,d){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:d,constr:a,traits:new Set},enumerable:!1}),u._zod.traits.has(e))return;u._zod.traits.add(e),t(u,d);const c=a.prototype,f=Object.keys(c);for(let p=0;p<f.length;p++){const h=f[p];h in u||(u[h]=c[h].bind(u))}}const i=(n==null?void 0:n.Parent)??Object;class s extends i{}Object.defineProperty(s,"name",{value:e});function a(u){var d;const c=n!=null&&n.Parent?new s:this;o(c,u),(d=c._zod).deferred??(d.deferred=[]);for(const f of c._zod.deferred)f();return c}return Object.defineProperty(a,"init",{value:o}),Object.defineProperty(a,Symbol.hasInstance,{value:u=>{var d,c;return n!=null&&n.Parent&&u instanceof n.Parent?!0:(c=(d=u==null?void 0:u._zod)==null?void 0:d.traits)==null?void 0:c.has(e)}}),Object.defineProperty(a,"name",{value:e}),a}class Ie extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Bi extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const Ji={};function fe(e){return Ji}function Oi(e){const t=Object.values(e).filter(o=>typeof o=="number");return Object.entries(e).filter(([o,i])=>t.indexOf(+o)===-1).map(([o,i])=>i)}function kt(e,t){return typeof t=="bigint"?t.toString():t}function Bt(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function Jt(e){return e==null}function Ot(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}const Do=Symbol("evaluating");function U(e,t,n){let o;Object.defineProperty(e,t,{get(){if(o!==Do)return o===void 0&&(o=Do,o=n()),o},set(i){Object.defineProperty(e,t,{value:i})},configurable:!0})}function me(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function ue(...e){const t={};for(const n of e){const o=Object.getOwnPropertyDescriptors(n);Object.assign(t,o)}return Object.defineProperties({},t)}function Uo(e){return JSON.stringify(e)}function xf(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const Zi="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Qe(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Df=Bt(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Ue(e){if(Qe(e)===!1)return!1;const t=e.constructor;if(t===void 0||typeof t!="function")return!0;const n=t.prototype;return!(Qe(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function Wi(e){return Ue(e)?{...e}:Array.isArray(e)?[...e]:e}const Uf=new Set(["string","number","symbol"]);function at(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ce(e,t,n){const o=new e._zod.constr(t??e._zod.def);return(!t||n!=null&&n.parent)&&(o._zod.parent=e),o}function P(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Lf(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}function bf(e,t){const n=e._zod.def,o=n.checks;if(o&&o.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const s=ue(e._zod.def,{get shape(){const a={};for(const u in t){if(!(u in n.shape))throw new Error(`Unrecognized key: "${u}"`);t[u]&&(a[u]=n.shape[u])}return me(this,"shape",a),a},checks:[]});return ce(e,s)}function Ff(e,t){const n=e._zod.def,o=n.checks;if(o&&o.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const s=ue(e._zod.def,{get shape(){const a={...e._zod.def.shape};for(const u in t){if(!(u in n.shape))throw new Error(`Unrecognized key: "${u}"`);t[u]&&delete a[u]}return me(this,"shape",a),a},checks:[]});return ce(e,s)}function Gf(e,t){if(!Ue(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0){const s=e._zod.def.shape;for(const a in t)if(Object.getOwnPropertyDescriptor(s,a)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const i=ue(e._zod.def,{get shape(){const s={...e._zod.def.shape,...t};return me(this,"shape",s),s}});return ce(e,i)}function Vf(e,t){if(!Ue(t))throw new Error("Invalid input to safeExtend: expected a plain object");const n=ue(e._zod.def,{get shape(){const o={...e._zod.def.shape,...t};return me(this,"shape",o),o}});return ce(e,n)}function $f(e,t){const n=ue(e._zod.def,{get shape(){const o={...e._zod.def.shape,...t._zod.def.shape};return me(this,"shape",o),o},get catchall(){return t._zod.def.catchall},checks:[]});return ce(e,n)}function zf(e,t,n){const i=t._zod.def.checks;if(i&&i.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const a=ue(t._zod.def,{get shape(){const u=t._zod.def.shape,d={...u};if(n)for(const c in n){if(!(c in u))throw new Error(`Unrecognized key: "${c}"`);n[c]&&(d[c]=e?new e({type:"optional",innerType:u[c]}):u[c])}else for(const c in u)d[c]=e?new e({type:"optional",innerType:u[c]}):u[c];return me(this,"shape",d),d},checks:[]});return ce(t,a)}function qf(e,t,n){const o=ue(t._zod.def,{get shape(){const i=t._zod.def.shape,s={...i};if(n)for(const a in n){if(!(a in s))throw new Error(`Unrecognized key: "${a}"`);n[a]&&(s[a]=new e({type:"nonoptional",innerType:i[a]}))}else for(const a in i)s[a]=new e({type:"nonoptional",innerType:i[a]});return me(this,"shape",s),s}});return ce(t,o)}function Ee(e,t=0){var n;if(e.aborted===!0)return!0;for(let o=t;o<e.issues.length;o++)if(((n=e.issues[o])==null?void 0:n.continue)!==!0)return!0;return!1}function Ki(e,t){return t.map(n=>{var o;return(o=n).path??(o.path=[]),n.path.unshift(e),n})}function ze(e){return typeof e=="string"?e:e==null?void 0:e.message}function pe(e,t,n){var i,s,a,u,d,c;const o={...e,path:e.path??[]};if(!e.message){const f=ze((a=(s=(i=e.inst)==null?void 0:i._zod.def)==null?void 0:s.error)==null?void 0:a.call(s,e))??ze((u=t==null?void 0:t.error)==null?void 0:u.call(t,e))??ze((d=n.customError)==null?void 0:d.call(n,e))??ze((c=n.localeError)==null?void 0:c.call(n,e))??"Invalid input";o.message=f}return delete o.inst,delete o.continue,t!=null&&t.reportInput||delete o.input,o}function Zt(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Le(...e){const[t,n,o]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:o}:{...t}}const Yi=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,kt,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Xi=T("$ZodError",Yi),Qi=T("$ZodError",Yi,{Parent:Error});function Hf(e,t=n=>n.message){const n={},o=[];for(const i of e.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):o.push(t(i));return{formErrors:o,fieldErrors:n}}function Bf(e,t=n=>n.message){const n={_errors:[]},o=i=>{for(const s of i.issues)if(s.code==="invalid_union"&&s.errors.length)s.errors.map(a=>o({issues:a}));else if(s.code==="invalid_key")o({issues:s.issues});else if(s.code==="invalid_element")o({issues:s.issues});else if(s.path.length===0)n._errors.push(t(s));else{let a=n,u=0;for(;u<s.path.length;){const d=s.path[u];u===s.path.length-1?(a[d]=a[d]||{_errors:[]},a[d]._errors.push(t(s))):a[d]=a[d]||{_errors:[]},a=a[d],u++}}};return o(e),n}const Wt=e=>(t,n,o,i)=>{const s=o?Object.assign(o,{async:!1}):{async:!1},a=t._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new Ie;if(a.issues.length){const u=new((i==null?void 0:i.Err)??e)(a.issues.map(d=>pe(d,s,fe())));throw Zi(u,i==null?void 0:i.callee),u}return a.value},Kt=e=>async(t,n,o,i)=>{const s=o?Object.assign(o,{async:!0}):{async:!0};let a=t._zod.run({value:n,issues:[]},s);if(a instanceof Promise&&(a=await a),a.issues.length){const u=new((i==null?void 0:i.Err)??e)(a.issues.map(d=>pe(d,s,fe())));throw Zi(u,i==null?void 0:i.callee),u}return a.value},ut=e=>(t,n,o)=>{const i=o?{...o,async:!1}:{async:!1},s=t._zod.run({value:n,issues:[]},i);if(s instanceof Promise)throw new Ie;return s.issues.length?{success:!1,error:new(e??Xi)(s.issues.map(a=>pe(a,i,fe())))}:{success:!0,data:s.value}},Jf=ut(Qi),ct=e=>async(t,n,o)=>{const i=o?Object.assign(o,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},i);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map(a=>pe(a,i,fe())))}:{success:!0,data:s.value}},Of=ct(Qi),Zf=e=>(t,n,o)=>{const i=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Wt(e)(t,n,i)},Wf=e=>(t,n,o)=>Wt(e)(t,n,o),Kf=e=>async(t,n,o)=>{const i=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Kt(e)(t,n,i)},Yf=e=>async(t,n,o)=>Kt(e)(t,n,o),Xf=e=>(t,n,o)=>{const i=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return ut(e)(t,n,i)},Qf=e=>(t,n,o)=>ut(e)(t,n,o),jf=e=>async(t,n,o)=>{const i=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return ct(e)(t,n,i)},ep=e=>async(t,n,o)=>ct(e)(t,n,o),tp=/^[cC][^\s-]{8,}$/,np=/^[0-9a-z]+$/,op=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,ip=/^[0-9a-vA-V]{20}$/,rp=/^[A-Za-z0-9]{27}$/,sp=/^[a-zA-Z0-9_-]{21}$/,lp=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,ap=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Lo=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,up=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,cp="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function dp(){return new RegExp(cp,"u")}const fp=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,pp=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,hp=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,mp=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,gp=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,ji=/^[A-Za-z0-9_-]*$/,yp=/^\+[1-9]\d{6,14}$/,er="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",vp=new RegExp(`^${er}$`);function tr(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function _p(e){return new RegExp(`^${tr(e)}$`)}function Tp(e){const t=tr({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const o=`${t}(?:${n.join("|")})`;return new RegExp(`^${er}T(?:${o})$`)}const Ep=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Sp=/^[^A-Z]*$/,Cp=/^[^a-z]*$/,oe=T("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),Ip=T("$ZodCheckMaxLength",(e,t)=>{var n;oe.init(e,t),(n=e._zod.def).when??(n.when=o=>{const i=o.value;return!Jt(i)&&i.length!==void 0}),e._zod.onattach.push(o=>{const i=o._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<i&&(o._zod.bag.maximum=t.maximum)}),e._zod.check=o=>{const i=o.value;if(i.length<=t.maximum)return;const a=Zt(i);o.issues.push({origin:a,code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),Ap=T("$ZodCheckMinLength",(e,t)=>{var n;oe.init(e,t),(n=e._zod.def).when??(n.when=o=>{const i=o.value;return!Jt(i)&&i.length!==void 0}),e._zod.onattach.push(o=>{const i=o._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>i&&(o._zod.bag.minimum=t.minimum)}),e._zod.check=o=>{const i=o.value;if(i.length>=t.minimum)return;const a=Zt(i);o.issues.push({origin:a,code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),wp=T("$ZodCheckLengthEquals",(e,t)=>{var n;oe.init(e,t),(n=e._zod.def).when??(n.when=o=>{const i=o.value;return!Jt(i)&&i.length!==void 0}),e._zod.onattach.push(o=>{const i=o._zod.bag;i.minimum=t.length,i.maximum=t.length,i.length=t.length}),e._zod.check=o=>{const i=o.value,s=i.length;if(s===t.length)return;const a=Zt(i),u=s>t.length;o.issues.push({origin:a,...u?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:o.value,inst:e,continue:!t.abort})}}),dt=T("$ZodCheckStringFormat",(e,t)=>{var n,o;oe.init(e,t),e._zod.onattach.push(i=>{const s=i._zod.bag;s.format=t.format,t.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=i=>{t.pattern.lastIndex=0,!t.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:t.format,input:i.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(o=e._zod).check??(o.check=()=>{})}),Rp=T("$ZodCheckRegex",(e,t)=>{dt.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Pp=T("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Sp),dt.init(e,t)}),Np=T("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Cp),dt.init(e,t)}),Mp=T("$ZodCheckIncludes",(e,t)=>{oe.init(e,t);const n=at(t.includes),o=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=o,e._zod.onattach.push(i=>{const s=i._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(o)}),e._zod.check=i=>{i.value.includes(t.includes,t.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:i.value,inst:e,continue:!t.abort})}}),kp=T("$ZodCheckStartsWith",(e,t)=>{oe.init(e,t);const n=new RegExp(`^${at(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(o=>{const i=o._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=o=>{o.value.startsWith(t.prefix)||o.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:o.value,inst:e,continue:!t.abort})}}),xp=T("$ZodCheckEndsWith",(e,t)=>{oe.init(e,t);const n=new RegExp(`.*${at(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(o=>{const i=o._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=o=>{o.value.endsWith(t.suffix)||o.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:o.value,inst:e,continue:!t.abort})}}),Dp=T("$ZodCheckOverwrite",(e,t)=>{oe.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class Up{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const o=t.split(`
`).filter(a=>a),i=Math.min(...o.map(a=>a.length-a.trimStart().length)),s=o.map(a=>a.slice(i)).map(a=>" ".repeat(this.indent*2)+a);for(const a of s)this.content.push(a)}compile(){const t=Function,n=this==null?void 0:this.args,i=[...((this==null?void 0:this.content)??[""]).map(s=>`  ${s}`)];return new t(...n,i.join(`
`))}}const Lp={major:4,minor:3,patch:6},V=T("$ZodType",(e,t)=>{var i;var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Lp;const o=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&o.unshift(e);for(const s of o)for(const a of s._zod.onattach)a(e);if(o.length===0)(n=e._zod).deferred??(n.deferred=[]),(i=e._zod.deferred)==null||i.push(()=>{e._zod.run=e._zod.parse});else{const s=(u,d,c)=>{let f=Ee(u),p;for(const h of d){if(h._zod.def.when){if(!h._zod.def.when(u))continue}else if(f)continue;const m=u.issues.length,g=h._zod.check(u);if(g instanceof Promise&&(c==null?void 0:c.async)===!1)throw new Ie;if(p||g instanceof Promise)p=(p??Promise.resolve()).then(async()=>{await g,u.issues.length!==m&&(f||(f=Ee(u,m)))});else{if(u.issues.length===m)continue;f||(f=Ee(u,m))}}return p?p.then(()=>u):u},a=(u,d,c)=>{if(Ee(u))return u.aborted=!0,u;const f=s(d,o,c);if(f instanceof Promise){if(c.async===!1)throw new Ie;return f.then(p=>e._zod.parse(p,c))}return e._zod.parse(f,c)};e._zod.run=(u,d)=>{if(d.skipChecks)return e._zod.parse(u,d);if(d.direction==="backward"){const f=e._zod.parse({value:u.value,issues:[]},{...d,skipChecks:!0});return f instanceof Promise?f.then(p=>a(p,u,d)):a(f,u,d)}const c=e._zod.parse(u,d);if(c instanceof Promise){if(d.async===!1)throw new Ie;return c.then(f=>s(f,o,d))}return s(c,o,d)}}U(e,"~standard",()=>({validate:s=>{var a;try{const u=Jf(e,s);return u.success?{value:u.data}:{issues:(a=u.error)==null?void 0:a.issues}}catch{return Of(e,s).then(d=>{var c;return d.success?{value:d.data}:{issues:(c=d.error)==null?void 0:c.issues}})}},vendor:"zod",version:1}))}),Yt=T("$ZodString",(e,t)=>{var n;V.init(e,t),e._zod.pattern=[...((n=e==null?void 0:e._zod.bag)==null?void 0:n.patterns)??[]].pop()??Ep(e._zod.bag),e._zod.parse=(o,i)=>{if(t.coerce)try{o.value=String(o.value)}catch{}return typeof o.value=="string"||o.issues.push({expected:"string",code:"invalid_type",input:o.value,inst:e}),o}}),b=T("$ZodStringFormat",(e,t)=>{dt.init(e,t),Yt.init(e,t)}),bp=T("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=ap),b.init(e,t)}),Fp=T("$ZodUUID",(e,t)=>{if(t.version){const o={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(o===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Lo(o))}else t.pattern??(t.pattern=Lo());b.init(e,t)}),Gp=T("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=up),b.init(e,t)}),Vp=T("$ZodURL",(e,t)=>{b.init(e,t),e._zod.check=n=>{try{const o=n.value.trim(),i=new URL(o);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=i.href:n.value=o;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),$p=T("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=dp()),b.init(e,t)}),zp=T("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=sp),b.init(e,t)}),qp=T("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=tp),b.init(e,t)}),Hp=T("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=np),b.init(e,t)}),Bp=T("$ZodULID",(e,t)=>{t.pattern??(t.pattern=op),b.init(e,t)}),Jp=T("$ZodXID",(e,t)=>{t.pattern??(t.pattern=ip),b.init(e,t)}),Op=T("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=rp),b.init(e,t)}),Zp=T("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Tp(t)),b.init(e,t)}),Wp=T("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=vp),b.init(e,t)}),Kp=T("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=_p(t)),b.init(e,t)}),Yp=T("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=lp),b.init(e,t)}),Xp=T("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=fp),b.init(e,t),e._zod.bag.format="ipv4"}),Qp=T("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=pp),b.init(e,t),e._zod.bag.format="ipv6",e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),jp=T("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=hp),b.init(e,t)}),eh=T("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=mp),b.init(e,t),e._zod.check=n=>{const o=n.value.split("/");try{if(o.length!==2)throw new Error;const[i,s]=o;if(!s)throw new Error;const a=Number(s);if(`${a}`!==s)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${i}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function nr(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const th=T("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=gp),b.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=n=>{nr(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function nh(e){if(!ji.test(e))return!1;const t=e.replace(/[-_]/g,o=>o==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return nr(n)}const oh=T("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=ji),b.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=n=>{nh(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),ih=T("$ZodE164",(e,t)=>{t.pattern??(t.pattern=yp),b.init(e,t)});function rh(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[o]=n;if(!o)return!1;const i=JSON.parse(atob(o));return!("typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||t&&(!("alg"in i)||i.alg!==t))}catch{return!1}}const sh=T("$ZodJWT",(e,t)=>{b.init(e,t),e._zod.check=n=>{rh(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),lh=T("$ZodUnknown",(e,t)=>{V.init(e,t),e._zod.parse=n=>n}),ah=T("$ZodNever",(e,t)=>{V.init(e,t),e._zod.parse=(n,o)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function bo(e,t,n){e.issues.length&&t.issues.push(...Ki(n,e.issues)),t.value[n]=e.value}const uh=T("$ZodArray",(e,t)=>{V.init(e,t),e._zod.parse=(n,o)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),n;n.value=Array(i.length);const s=[];for(let a=0;a<i.length;a++){const u=i[a],d=t.element._zod.run({value:u,issues:[]},o);d instanceof Promise?s.push(d.then(c=>bo(c,n,a))):bo(d,n,a)}return s.length?Promise.all(s).then(()=>n):n}});function je(e,t,n,o,i){if(e.issues.length){if(i&&!(n in o))return;t.issues.push(...Ki(n,e.issues))}e.value===void 0?n in o&&(t.value[n]=void 0):t.value[n]=e.value}function or(e){var o,i,s,a;const t=Object.keys(e.shape);for(const u of t)if(!((a=(s=(i=(o=e.shape)==null?void 0:o[u])==null?void 0:i._zod)==null?void 0:s.traits)!=null&&a.has("$ZodType")))throw new Error(`Invalid element at key "${u}": expected a Zod schema`);const n=Lf(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function ir(e,t,n,o,i,s){const a=[],u=i.keySet,d=i.catchall._zod,c=d.def.type,f=d.optout==="optional";for(const p in t){if(u.has(p))continue;if(c==="never"){a.push(p);continue}const h=d.run({value:t[p],issues:[]},o);h instanceof Promise?e.push(h.then(m=>je(m,n,p,t,f))):je(h,n,p,t,f)}return a.length&&n.issues.push({code:"unrecognized_keys",keys:a,input:t,inst:s}),e.length?Promise.all(e).then(()=>n):n}const ch=T("$ZodObject",(e,t)=>{V.init(e,t);const n=Object.getOwnPropertyDescriptor(t,"shape");if(!(n!=null&&n.get)){const u=t.shape;Object.defineProperty(t,"shape",{get:()=>{const d={...u};return Object.defineProperty(t,"shape",{value:d}),d}})}const o=Bt(()=>or(t));U(e._zod,"propValues",()=>{const u=t.shape,d={};for(const c in u){const f=u[c]._zod;if(f.values){d[c]??(d[c]=new Set);for(const p of f.values)d[c].add(p)}}return d});const i=Qe,s=t.catchall;let a;e._zod.parse=(u,d)=>{a??(a=o.value);const c=u.value;if(!i(c))return u.issues.push({expected:"object",code:"invalid_type",input:c,inst:e}),u;u.value={};const f=[],p=a.shape;for(const h of a.keys){const m=p[h],g=m._zod.optout==="optional",v=m._zod.run({value:c[h],issues:[]},d);v instanceof Promise?f.push(v.then(y=>je(y,u,h,c,g))):je(v,u,h,c,g)}return s?ir(f,c,u,d,o.value,e):f.length?Promise.all(f).then(()=>u):u}}),dh=T("$ZodObjectJIT",(e,t)=>{ch.init(e,t);const n=e._zod.parse,o=Bt(()=>or(t)),i=h=>{var C;const m=new Up(["shape","payload","ctx"]),g=o.value,v=I=>{const _=Uo(I);return`shape[${_}]._zod.run({ value: input[${_}], issues: [] }, ctx)`};m.write("const input = payload.value;");const y=Object.create(null);let E=0;for(const I of g.keys)y[I]=`key_${E++}`;m.write("const newResult = {};");for(const I of g.keys){const _=y[I],R=Uo(I),M=h[I],L=((C=M==null?void 0:M._zod)==null?void 0:C.optout)==="optional";m.write(`const ${_} = ${v(I)};`),L?m.write(`
        if (${_}.issues.length) {
          if (${R} in input) {
            payload.issues = payload.issues.concat(${_}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${R}, ...iss.path] : [${R}]
            })));
          }
        }
        
        if (${_}.value === undefined) {
          if (${R} in input) {
            newResult[${R}] = undefined;
          }
        } else {
          newResult[${R}] = ${_}.value;
        }
        
      `):m.write(`
        if (${_}.issues.length) {
          payload.issues = payload.issues.concat(${_}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${R}, ...iss.path] : [${R}]
          })));
        }
        
        if (${_}.value === undefined) {
          if (${R} in input) {
            newResult[${R}] = undefined;
          }
        } else {
          newResult[${R}] = ${_}.value;
        }
        
      `)}m.write("payload.value = newResult;"),m.write("return payload;");const S=m.compile();return(I,_)=>S(h,I,_)};let s;const a=Qe,u=!Ji.jitless,c=u&&Df.value,f=t.catchall;let p;e._zod.parse=(h,m)=>{p??(p=o.value);const g=h.value;return a(g)?u&&c&&(m==null?void 0:m.async)===!1&&m.jitless!==!0?(s||(s=i(t.shape)),h=s(h,m),f?ir([],g,h,m,p,e):h):n(h,m):(h.issues.push({expected:"object",code:"invalid_type",input:g,inst:e}),h)}});function Fo(e,t,n,o){for(const s of e)if(s.issues.length===0)return t.value=s.value,t;const i=e.filter(s=>!Ee(s));return i.length===1?(t.value=i[0].value,i[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(s=>s.issues.map(a=>pe(a,o,fe())))}),t)}const fh=T("$ZodUnion",(e,t)=>{V.init(e,t),U(e._zod,"optin",()=>t.options.some(i=>i._zod.optin==="optional")?"optional":void 0),U(e._zod,"optout",()=>t.options.some(i=>i._zod.optout==="optional")?"optional":void 0),U(e._zod,"values",()=>{if(t.options.every(i=>i._zod.values))return new Set(t.options.flatMap(i=>Array.from(i._zod.values)))}),U(e._zod,"pattern",()=>{if(t.options.every(i=>i._zod.pattern)){const i=t.options.map(s=>s._zod.pattern);return new RegExp(`^(${i.map(s=>Ot(s.source)).join("|")})$`)}});const n=t.options.length===1,o=t.options[0]._zod.run;e._zod.parse=(i,s)=>{if(n)return o(i,s);let a=!1;const u=[];for(const d of t.options){const c=d._zod.run({value:i.value,issues:[]},s);if(c instanceof Promise)u.push(c),a=!0;else{if(c.issues.length===0)return c;u.push(c)}}return a?Promise.all(u).then(d=>Fo(d,i,e,s)):Fo(u,i,e,s)}}),ph=T("$ZodIntersection",(e,t)=>{V.init(e,t),e._zod.parse=(n,o)=>{const i=n.value,s=t.left._zod.run({value:i,issues:[]},o),a=t.right._zod.run({value:i,issues:[]},o);return s instanceof Promise||a instanceof Promise?Promise.all([s,a]).then(([d,c])=>Go(n,d,c)):Go(n,s,a)}});function xt(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Ue(e)&&Ue(t)){const n=Object.keys(t),o=Object.keys(e).filter(s=>n.indexOf(s)!==-1),i={...e,...t};for(const s of o){const a=xt(e[s],t[s]);if(!a.valid)return{valid:!1,mergeErrorPath:[s,...a.mergeErrorPath]};i[s]=a.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let o=0;o<e.length;o++){const i=e[o],s=t[o],a=xt(i,s);if(!a.valid)return{valid:!1,mergeErrorPath:[o,...a.mergeErrorPath]};n.push(a.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Go(e,t,n){const o=new Map;let i;for(const u of t.issues)if(u.code==="unrecognized_keys"){i??(i=u);for(const d of u.keys)o.has(d)||o.set(d,{}),o.get(d).l=!0}else e.issues.push(u);for(const u of n.issues)if(u.code==="unrecognized_keys")for(const d of u.keys)o.has(d)||o.set(d,{}),o.get(d).r=!0;else e.issues.push(u);const s=[...o].filter(([,u])=>u.l&&u.r).map(([u])=>u);if(s.length&&i&&e.issues.push({...i,keys:s}),Ee(e))return e;const a=xt(t.value,n.value);if(!a.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(a.mergeErrorPath)}`);return e.value=a.data,e}const hh=T("$ZodEnum",(e,t)=>{V.init(e,t);const n=Oi(t.entries),o=new Set(n);e._zod.values=o,e._zod.pattern=new RegExp(`^(${n.filter(i=>Uf.has(typeof i)).map(i=>typeof i=="string"?at(i):i.toString()).join("|")})$`),e._zod.parse=(i,s)=>{const a=i.value;return o.has(a)||i.issues.push({code:"invalid_value",values:n,input:a,inst:e}),i}}),mh=T("$ZodTransform",(e,t)=>{V.init(e,t),e._zod.parse=(n,o)=>{if(o.direction==="backward")throw new Bi(e.constructor.name);const i=t.transform(n.value,n);if(o.async)return(i instanceof Promise?i:Promise.resolve(i)).then(a=>(n.value=a,n));if(i instanceof Promise)throw new Ie;return n.value=i,n}});function Vo(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const rr=T("$ZodOptional",(e,t)=>{V.init(e,t),e._zod.optin="optional",e._zod.optout="optional",U(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),U(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${Ot(n.source)})?$`):void 0}),e._zod.parse=(n,o)=>{if(t.innerType._zod.optin==="optional"){const i=t.innerType._zod.run(n,o);return i instanceof Promise?i.then(s=>Vo(s,n.value)):Vo(i,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,o)}}),gh=T("$ZodExactOptional",(e,t)=>{rr.init(e,t),U(e._zod,"values",()=>t.innerType._zod.values),U(e._zod,"pattern",()=>t.innerType._zod.pattern),e._zod.parse=(n,o)=>t.innerType._zod.run(n,o)}),yh=T("$ZodNullable",(e,t)=>{V.init(e,t),U(e._zod,"optin",()=>t.innerType._zod.optin),U(e._zod,"optout",()=>t.innerType._zod.optout),U(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${Ot(n.source)}|null)$`):void 0}),U(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,o)=>n.value===null?n:t.innerType._zod.run(n,o)}),vh=T("$ZodDefault",(e,t)=>{V.init(e,t),e._zod.optin="optional",U(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,o)=>{if(o.direction==="backward")return t.innerType._zod.run(n,o);if(n.value===void 0)return n.value=t.defaultValue,n;const i=t.innerType._zod.run(n,o);return i instanceof Promise?i.then(s=>$o(s,t)):$o(i,t)}});function $o(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const _h=T("$ZodPrefault",(e,t)=>{V.init(e,t),e._zod.optin="optional",U(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,o)=>(o.direction==="backward"||n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,o))}),Th=T("$ZodNonOptional",(e,t)=>{V.init(e,t),U(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(o=>o!==void 0)):void 0}),e._zod.parse=(n,o)=>{const i=t.innerType._zod.run(n,o);return i instanceof Promise?i.then(s=>zo(s,e)):zo(i,e)}});function zo(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Eh=T("$ZodCatch",(e,t)=>{V.init(e,t),U(e._zod,"optin",()=>t.innerType._zod.optin),U(e._zod,"optout",()=>t.innerType._zod.optout),U(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,o)=>{if(o.direction==="backward")return t.innerType._zod.run(n,o);const i=t.innerType._zod.run(n,o);return i instanceof Promise?i.then(s=>(n.value=s.value,s.issues.length&&(n.value=t.catchValue({...n,error:{issues:s.issues.map(a=>pe(a,o,fe()))},input:n.value}),n.issues=[]),n)):(n.value=i.value,i.issues.length&&(n.value=t.catchValue({...n,error:{issues:i.issues.map(s=>pe(s,o,fe()))},input:n.value}),n.issues=[]),n)}}),Sh=T("$ZodPipe",(e,t)=>{V.init(e,t),U(e._zod,"values",()=>t.in._zod.values),U(e._zod,"optin",()=>t.in._zod.optin),U(e._zod,"optout",()=>t.out._zod.optout),U(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,o)=>{if(o.direction==="backward"){const s=t.out._zod.run(n,o);return s instanceof Promise?s.then(a=>qe(a,t.in,o)):qe(s,t.in,o)}const i=t.in._zod.run(n,o);return i instanceof Promise?i.then(s=>qe(s,t.out,o)):qe(i,t.out,o)}});function qe(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}const Ch=T("$ZodReadonly",(e,t)=>{V.init(e,t),U(e._zod,"propValues",()=>t.innerType._zod.propValues),U(e._zod,"values",()=>t.innerType._zod.values),U(e._zod,"optin",()=>{var n,o;return(o=(n=t.innerType)==null?void 0:n._zod)==null?void 0:o.optin}),U(e._zod,"optout",()=>{var n,o;return(o=(n=t.innerType)==null?void 0:n._zod)==null?void 0:o.optout}),e._zod.parse=(n,o)=>{if(o.direction==="backward")return t.innerType._zod.run(n,o);const i=t.innerType._zod.run(n,o);return i instanceof Promise?i.then(qo):qo(i)}});function qo(e){return e.value=Object.freeze(e.value),e}const Ih=T("$ZodCustom",(e,t)=>{oe.init(e,t),V.init(e,t),e._zod.parse=(n,o)=>n,e._zod.check=n=>{const o=n.value,i=t.fn(o);if(i instanceof Promise)return i.then(s=>Ho(s,n,o,e));Ho(i,n,o,e)}});function Ho(e,t,n,o){if(!e){const i={code:"custom",input:n,inst:o,path:[...o._zod.def.path??[]],continue:!o._zod.def.abort};o._zod.def.params&&(i.params=o._zod.def.params),t.issues.push(Le(i))}}var Bo;class Ah{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...n){const o=n[0];return this._map.set(t,o),o&&typeof o=="object"&&"id"in o&&this._idmap.set(o.id,t),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const o={...this.get(n)??{}};delete o.id;const i={...o,...this._map.get(t)};return Object.keys(i).length?i:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function wh(){return new Ah}(Bo=globalThis).__zod_globalRegistry??(Bo.__zod_globalRegistry=wh());const xe=globalThis.__zod_globalRegistry;function Rh(e,t){return new e({type:"string",...P(t)})}function Ph(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...P(t)})}function Jo(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...P(t)})}function Nh(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...P(t)})}function Mh(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...P(t)})}function kh(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...P(t)})}function xh(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...P(t)})}function Dh(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...P(t)})}function Uh(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...P(t)})}function Lh(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...P(t)})}function bh(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...P(t)})}function Fh(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...P(t)})}function Gh(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...P(t)})}function Vh(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...P(t)})}function $h(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...P(t)})}function zh(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...P(t)})}function qh(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...P(t)})}function Hh(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...P(t)})}function Bh(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...P(t)})}function Jh(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...P(t)})}function Oh(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...P(t)})}function Zh(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...P(t)})}function Wh(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...P(t)})}function Kh(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...P(t)})}function Yh(e,t){return new e({type:"string",format:"date",check:"string_format",...P(t)})}function Xh(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...P(t)})}function Qh(e,t){return new e({type:"string",format:"duration",check:"string_format",...P(t)})}function jh(e){return new e({type:"unknown"})}function em(e,t){return new e({type:"never",...P(t)})}function sr(e,t){return new Ip({check:"max_length",...P(t),maximum:e})}function et(e,t){return new Ap({check:"min_length",...P(t),minimum:e})}function lr(e,t){return new wp({check:"length_equals",...P(t),length:e})}function tm(e,t){return new Rp({check:"string_format",format:"regex",...P(t),pattern:e})}function nm(e){return new Pp({check:"string_format",format:"lowercase",...P(e)})}function om(e){return new Np({check:"string_format",format:"uppercase",...P(e)})}function im(e,t){return new Mp({check:"string_format",format:"includes",...P(t),includes:e})}function rm(e,t){return new kp({check:"string_format",format:"starts_with",...P(t),prefix:e})}function sm(e,t){return new xp({check:"string_format",format:"ends_with",...P(t),suffix:e})}function Pe(e){return new Dp({check:"overwrite",tx:e})}function lm(e){return Pe(t=>t.normalize(e))}function am(){return Pe(e=>e.trim())}function um(){return Pe(e=>e.toLowerCase())}function cm(){return Pe(e=>e.toUpperCase())}function dm(){return Pe(e=>xf(e))}function fm(e,t,n){return new e({type:"array",element:t,...P(n)})}function pm(e,t,n){return new e({type:"custom",check:"custom",fn:t,...P(n)})}function hm(e){const t=mm(n=>(n.addIssue=o=>{if(typeof o=="string")n.issues.push(Le(o,n.value,t._zod.def));else{const i=o;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=t),i.continue??(i.continue=!t._zod.def.abort),n.issues.push(Le(i))}},e(n.value,n)));return t}function mm(e,t){const n=new oe({check:"custom",...P(t)});return n._zod.check=e,n}function ar(e){let t=(e==null?void 0:e.target)??"draft-2020-12";return t==="draft-4"&&(t="draft-04"),t==="draft-7"&&(t="draft-07"),{processors:e.processors??{},metadataRegistry:(e==null?void 0:e.metadata)??xe,target:t,unrepresentable:(e==null?void 0:e.unrepresentable)??"throw",override:(e==null?void 0:e.override)??(()=>{}),io:(e==null?void 0:e.io)??"output",counter:0,seen:new Map,cycles:(e==null?void 0:e.cycles)??"ref",reused:(e==null?void 0:e.reused)??"inline",external:(e==null?void 0:e.external)??void 0}}function q(e,t,n={path:[],schemaPath:[]}){var f,p;var o;const i=e._zod.def,s=t.seen.get(e);if(s)return s.count++,n.schemaPath.includes(e)&&(s.cycle=n.path),s.schema;const a={schema:{},count:1,cycle:void 0,path:n.path};t.seen.set(e,a);const u=(p=(f=e._zod).toJSONSchema)==null?void 0:p.call(f);if(u)a.schema=u;else{const h={...n,schemaPath:[...n.schemaPath,e],path:n.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,a.schema,h);else{const g=a.schema,v=t.processors[i.type];if(!v)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${i.type}`);v(e,t,g,h)}const m=e._zod.parent;m&&(a.ref||(a.ref=m),q(m,t,h),t.seen.get(m).isParent=!0)}const d=t.metadataRegistry.get(e);return d&&Object.assign(a.schema,d),t.io==="input"&&O(e)&&(delete a.schema.examples,delete a.schema.default),t.io==="input"&&a.schema._prefault&&((o=a.schema).default??(o.default=a.schema._prefault)),delete a.schema._prefault,t.seen.get(e).schema}function ur(e,t){var a,u,d,c;const n=e.seen.get(t);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const o=new Map;for(const f of e.seen.entries()){const p=(a=e.metadataRegistry.get(f[0]))==null?void 0:a.id;if(p){const h=o.get(p);if(h&&h!==f[0])throw new Error(`Duplicate schema id "${p}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);o.set(p,f[0])}}const i=f=>{var v;const p=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const y=(v=e.external.registry.get(f[0]))==null?void 0:v.id,E=e.external.uri??(C=>C);if(y)return{ref:E(y)};const S=f[1].defId??f[1].schema.id??`schema${e.counter++}`;return f[1].defId=S,{defId:S,ref:`${E("__shared")}#/${p}/${S}`}}if(f[1]===n)return{ref:"#"};const m=`#/${p}/`,g=f[1].schema.id??`__schema${e.counter++}`;return{defId:g,ref:m+g}},s=f=>{if(f[1].schema.$ref)return;const p=f[1],{ref:h,defId:m}=i(f);p.def={...p.schema},m&&(p.defId=m);const g=p.schema;for(const v in g)delete g[v];g.$ref=h};if(e.cycles==="throw")for(const f of e.seen.entries()){const p=f[1];if(p.cycle)throw new Error(`Cycle detected: #/${(u=p.cycle)==null?void 0:u.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const f of e.seen.entries()){const p=f[1];if(t===f[0]){s(f);continue}if(e.external){const m=(d=e.external.registry.get(f[0]))==null?void 0:d.id;if(t!==f[0]&&m){s(f);continue}}if((c=e.metadataRegistry.get(f[0]))==null?void 0:c.id){s(f);continue}if(p.cycle){s(f);continue}if(p.count>1&&e.reused==="ref"){s(f);continue}}}function cr(e,t){var a,u,d;const n=e.seen.get(t);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const o=c=>{const f=e.seen.get(c);if(f.ref===null)return;const p=f.def??f.schema,h={...p},m=f.ref;if(f.ref=null,m){o(m);const v=e.seen.get(m),y=v.schema;if(y.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(p.allOf=p.allOf??[],p.allOf.push(y)):Object.assign(p,y),Object.assign(p,h),c._zod.parent===m)for(const S in p)S==="$ref"||S==="allOf"||S in h||delete p[S];if(y.$ref&&v.def)for(const S in p)S==="$ref"||S==="allOf"||S in v.def&&JSON.stringify(p[S])===JSON.stringify(v.def[S])&&delete p[S]}const g=c._zod.parent;if(g&&g!==m){o(g);const v=e.seen.get(g);if(v!=null&&v.schema.$ref&&(p.$ref=v.schema.$ref,v.def))for(const y in p)y==="$ref"||y==="allOf"||y in v.def&&JSON.stringify(p[y])===JSON.stringify(v.def[y])&&delete p[y]}e.override({zodSchema:c,jsonSchema:p,path:f.path??[]})};for(const c of[...e.seen.entries()].reverse())o(c[0]);const i={};if(e.target==="draft-2020-12"?i.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?i.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?i.$schema="http://json-schema.org/draft-04/schema#":e.target,(a=e.external)!=null&&a.uri){const c=(u=e.external.registry.get(t))==null?void 0:u.id;if(!c)throw new Error("Schema is missing an `id` property");i.$id=e.external.uri(c)}Object.assign(i,n.def??n.schema);const s=((d=e.external)==null?void 0:d.defs)??{};for(const c of e.seen.entries()){const f=c[1];f.def&&f.defId&&(s[f.defId]=f.def)}e.external||Object.keys(s).length>0&&(e.target==="draft-2020-12"?i.$defs=s:i.definitions=s);try{const c=JSON.parse(JSON.stringify(i));return Object.defineProperty(c,"~standard",{value:{...t["~standard"],jsonSchema:{input:tt(t,"input",e.processors),output:tt(t,"output",e.processors)}},enumerable:!1,writable:!1}),c}catch{throw new Error("Error converting schema to JSON.")}}function O(e,t){const n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);const o=e._zod.def;if(o.type==="transform")return!0;if(o.type==="array")return O(o.element,n);if(o.type==="set")return O(o.valueType,n);if(o.type==="lazy")return O(o.getter(),n);if(o.type==="promise"||o.type==="optional"||o.type==="nonoptional"||o.type==="nullable"||o.type==="readonly"||o.type==="default"||o.type==="prefault")return O(o.innerType,n);if(o.type==="intersection")return O(o.left,n)||O(o.right,n);if(o.type==="record"||o.type==="map")return O(o.keyType,n)||O(o.valueType,n);if(o.type==="pipe")return O(o.in,n)||O(o.out,n);if(o.type==="object"){for(const i in o.shape)if(O(o.shape[i],n))return!0;return!1}if(o.type==="union"){for(const i of o.options)if(O(i,n))return!0;return!1}if(o.type==="tuple"){for(const i of o.items)if(O(i,n))return!0;return!!(o.rest&&O(o.rest,n))}return!1}const gm=(e,t={})=>n=>{const o=ar({...n,processors:t});return q(e,o),ur(o,e),cr(o,e)},tt=(e,t,n={})=>o=>{const{libraryOptions:i,target:s}=o??{},a=ar({...i??{},target:s,io:t,processors:n});return q(e,a),ur(a,e),cr(a,e)},ym={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},vm=(e,t,n,o)=>{const i=n;i.type="string";const{minimum:s,maximum:a,format:u,patterns:d,contentEncoding:c}=e._zod.bag;if(typeof s=="number"&&(i.minLength=s),typeof a=="number"&&(i.maxLength=a),u&&(i.format=ym[u]??u,i.format===""&&delete i.format,u==="time"&&delete i.format),c&&(i.contentEncoding=c),d&&d.size>0){const f=[...d];f.length===1?i.pattern=f[0].source:f.length>1&&(i.allOf=[...f.map(p=>({...t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0"?{type:"string"}:{},pattern:p.source}))])}},_m=(e,t,n,o)=>{n.not={}},Tm=(e,t,n,o)=>{},Em=(e,t,n,o)=>{const i=e._zod.def,s=Oi(i.entries);s.every(a=>typeof a=="number")&&(n.type="number"),s.every(a=>typeof a=="string")&&(n.type="string"),n.enum=s},Sm=(e,t,n,o)=>{if(t.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},Cm=(e,t,n,o)=>{if(t.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},Im=(e,t,n,o)=>{const i=n,s=e._zod.def,{minimum:a,maximum:u}=e._zod.bag;typeof a=="number"&&(i.minItems=a),typeof u=="number"&&(i.maxItems=u),i.type="array",i.items=q(s.element,t,{...o,path:[...o.path,"items"]})},Am=(e,t,n,o)=>{var c;const i=n,s=e._zod.def;i.type="object",i.properties={};const a=s.shape;for(const f in a)i.properties[f]=q(a[f],t,{...o,path:[...o.path,"properties",f]});const u=new Set(Object.keys(a)),d=new Set([...u].filter(f=>{const p=s.shape[f]._zod;return t.io==="input"?p.optin===void 0:p.optout===void 0}));d.size>0&&(i.required=Array.from(d)),((c=s.catchall)==null?void 0:c._zod.def.type)==="never"?i.additionalProperties=!1:s.catchall?s.catchall&&(i.additionalProperties=q(s.catchall,t,{...o,path:[...o.path,"additionalProperties"]})):t.io==="output"&&(i.additionalProperties=!1)},wm=(e,t,n,o)=>{const i=e._zod.def,s=i.inclusive===!1,a=i.options.map((u,d)=>q(u,t,{...o,path:[...o.path,s?"oneOf":"anyOf",d]}));s?n.oneOf=a:n.anyOf=a},Rm=(e,t,n,o)=>{const i=e._zod.def,s=q(i.left,t,{...o,path:[...o.path,"allOf",0]}),a=q(i.right,t,{...o,path:[...o.path,"allOf",1]}),u=c=>"allOf"in c&&Object.keys(c).length===1,d=[...u(s)?s.allOf:[s],...u(a)?a.allOf:[a]];n.allOf=d},Pm=(e,t,n,o)=>{const i=e._zod.def,s=q(i.innerType,t,o),a=t.seen.get(e);t.target==="openapi-3.0"?(a.ref=i.innerType,n.nullable=!0):n.anyOf=[s,{type:"null"}]},Nm=(e,t,n,o)=>{const i=e._zod.def;q(i.innerType,t,o);const s=t.seen.get(e);s.ref=i.innerType},Mm=(e,t,n,o)=>{const i=e._zod.def;q(i.innerType,t,o);const s=t.seen.get(e);s.ref=i.innerType,n.default=JSON.parse(JSON.stringify(i.defaultValue))},km=(e,t,n,o)=>{const i=e._zod.def;q(i.innerType,t,o);const s=t.seen.get(e);s.ref=i.innerType,t.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(i.defaultValue)))},xm=(e,t,n,o)=>{const i=e._zod.def;q(i.innerType,t,o);const s=t.seen.get(e);s.ref=i.innerType;let a;try{a=i.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=a},Dm=(e,t,n,o)=>{const i=e._zod.def,s=t.io==="input"?i.in._zod.def.type==="transform"?i.out:i.in:i.out;q(s,t,o);const a=t.seen.get(e);a.ref=s},Um=(e,t,n,o)=>{const i=e._zod.def;q(i.innerType,t,o);const s=t.seen.get(e);s.ref=i.innerType,n.readOnly=!0},dr=(e,t,n,o)=>{const i=e._zod.def;q(i.innerType,t,o);const s=t.seen.get(e);s.ref=i.innerType},Lm=T("ZodISODateTime",(e,t)=>{Zp.init(e,t),F.init(e,t)});function bm(e){return Kh(Lm,e)}const Fm=T("ZodISODate",(e,t)=>{Wp.init(e,t),F.init(e,t)});function Gm(e){return Yh(Fm,e)}const Vm=T("ZodISOTime",(e,t)=>{Kp.init(e,t),F.init(e,t)});function $m(e){return Xh(Vm,e)}const zm=T("ZodISODuration",(e,t)=>{Yp.init(e,t),F.init(e,t)});function qm(e){return Qh(zm,e)}const Hm=(e,t)=>{Xi.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>Bf(e,n)},flatten:{value:n=>Hf(e,n)},addIssue:{value:n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,kt,2)}},addIssues:{value:n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,kt,2)}},isEmpty:{get(){return e.issues.length===0}}})},j=T("ZodError",Hm,{Parent:Error}),Bm=Wt(j),Jm=Kt(j),Om=ut(j),Zm=ct(j),Wm=Zf(j),Km=Wf(j),Ym=Kf(j),Xm=Yf(j),Qm=Xf(j),jm=Qf(j),eg=jf(j),tg=ep(j),$=T("ZodType",(e,t)=>(V.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:tt(e,"input"),output:tt(e,"output")}}),e.toJSONSchema=gm(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(ue(t,{checks:[...t.checks??[],...n.map(o=>typeof o=="function"?{_zod:{check:o,def:{check:"custom"},onattach:[]}}:o)]}),{parent:!0}),e.with=e.check,e.clone=(n,o)=>ce(e,n,o),e.brand=()=>e,e.register=((n,o)=>(n.add(e,o),e)),e.parse=(n,o)=>Bm(e,n,o,{callee:e.parse}),e.safeParse=(n,o)=>Om(e,n,o),e.parseAsync=async(n,o)=>Jm(e,n,o,{callee:e.parseAsync}),e.safeParseAsync=async(n,o)=>Zm(e,n,o),e.spa=e.safeParseAsync,e.encode=(n,o)=>Wm(e,n,o),e.decode=(n,o)=>Km(e,n,o),e.encodeAsync=async(n,o)=>Ym(e,n,o),e.decodeAsync=async(n,o)=>Xm(e,n,o),e.safeEncode=(n,o)=>Qm(e,n,o),e.safeDecode=(n,o)=>jm(e,n,o),e.safeEncodeAsync=async(n,o)=>eg(e,n,o),e.safeDecodeAsync=async(n,o)=>tg(e,n,o),e.refine=(n,o)=>e.check(Zg(n,o)),e.superRefine=n=>e.check(Wg(n)),e.overwrite=n=>e.check(Pe(n)),e.optional=()=>Ko(e),e.exactOptional=()=>Ug(e),e.nullable=()=>Yo(e),e.nullish=()=>Ko(Yo(e)),e.nonoptional=n=>$g(e,n),e.array=()=>pr(e),e.or=n=>Rg([e,n]),e.and=n=>Ng(e,n),e.transform=n=>Xo(e,xg(n)),e.default=n=>Fg(e,n),e.prefault=n=>Vg(e,n),e.catch=n=>qg(e,n),e.pipe=n=>Xo(e,n),e.readonly=()=>Jg(e),e.describe=n=>{const o=e.clone();return xe.add(o,{description:n}),o},Object.defineProperty(e,"description",{get(){var n;return(n=xe.get(e))==null?void 0:n.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return xe.get(e);const o=e.clone();return xe.add(o,n[0]),o},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=n=>n(e),e)),fr=T("_ZodString",(e,t)=>{Yt.init(e,t),$.init(e,t),e._zod.processJSONSchema=(o,i,s)=>vm(e,o,i);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...o)=>e.check(tm(...o)),e.includes=(...o)=>e.check(im(...o)),e.startsWith=(...o)=>e.check(rm(...o)),e.endsWith=(...o)=>e.check(sm(...o)),e.min=(...o)=>e.check(et(...o)),e.max=(...o)=>e.check(sr(...o)),e.length=(...o)=>e.check(lr(...o)),e.nonempty=(...o)=>e.check(et(1,...o)),e.lowercase=o=>e.check(nm(o)),e.uppercase=o=>e.check(om(o)),e.trim=()=>e.check(am()),e.normalize=(...o)=>e.check(lm(...o)),e.toLowerCase=()=>e.check(um()),e.toUpperCase=()=>e.check(cm()),e.slugify=()=>e.check(dm())}),ng=T("ZodString",(e,t)=>{Yt.init(e,t),fr.init(e,t),e.email=n=>e.check(Ph(og,n)),e.url=n=>e.check(Dh(ig,n)),e.jwt=n=>e.check(Wh(_g,n)),e.emoji=n=>e.check(Uh(rg,n)),e.guid=n=>e.check(Jo(Zo,n)),e.uuid=n=>e.check(Nh(He,n)),e.uuidv4=n=>e.check(Mh(He,n)),e.uuidv6=n=>e.check(kh(He,n)),e.uuidv7=n=>e.check(xh(He,n)),e.nanoid=n=>e.check(Lh(sg,n)),e.guid=n=>e.check(Jo(Zo,n)),e.cuid=n=>e.check(bh(lg,n)),e.cuid2=n=>e.check(Fh(ag,n)),e.ulid=n=>e.check(Gh(ug,n)),e.base64=n=>e.check(Jh(gg,n)),e.base64url=n=>e.check(Oh(yg,n)),e.xid=n=>e.check(Vh(cg,n)),e.ksuid=n=>e.check($h(dg,n)),e.ipv4=n=>e.check(zh(fg,n)),e.ipv6=n=>e.check(qh(pg,n)),e.cidrv4=n=>e.check(Hh(hg,n)),e.cidrv6=n=>e.check(Bh(mg,n)),e.e164=n=>e.check(Zh(vg,n)),e.datetime=n=>e.check(bm(n)),e.date=n=>e.check(Gm(n)),e.time=n=>e.check($m(n)),e.duration=n=>e.check(qm(n))});function Oo(e){return Rh(ng,e)}const F=T("ZodStringFormat",(e,t)=>{b.init(e,t),fr.init(e,t)}),og=T("ZodEmail",(e,t)=>{Gp.init(e,t),F.init(e,t)}),Zo=T("ZodGUID",(e,t)=>{bp.init(e,t),F.init(e,t)}),He=T("ZodUUID",(e,t)=>{Fp.init(e,t),F.init(e,t)}),ig=T("ZodURL",(e,t)=>{Vp.init(e,t),F.init(e,t)}),rg=T("ZodEmoji",(e,t)=>{$p.init(e,t),F.init(e,t)}),sg=T("ZodNanoID",(e,t)=>{zp.init(e,t),F.init(e,t)}),lg=T("ZodCUID",(e,t)=>{qp.init(e,t),F.init(e,t)}),ag=T("ZodCUID2",(e,t)=>{Hp.init(e,t),F.init(e,t)}),ug=T("ZodULID",(e,t)=>{Bp.init(e,t),F.init(e,t)}),cg=T("ZodXID",(e,t)=>{Jp.init(e,t),F.init(e,t)}),dg=T("ZodKSUID",(e,t)=>{Op.init(e,t),F.init(e,t)}),fg=T("ZodIPv4",(e,t)=>{Xp.init(e,t),F.init(e,t)}),pg=T("ZodIPv6",(e,t)=>{Qp.init(e,t),F.init(e,t)}),hg=T("ZodCIDRv4",(e,t)=>{jp.init(e,t),F.init(e,t)}),mg=T("ZodCIDRv6",(e,t)=>{eh.init(e,t),F.init(e,t)}),gg=T("ZodBase64",(e,t)=>{th.init(e,t),F.init(e,t)}),yg=T("ZodBase64URL",(e,t)=>{oh.init(e,t),F.init(e,t)}),vg=T("ZodE164",(e,t)=>{ih.init(e,t),F.init(e,t)}),_g=T("ZodJWT",(e,t)=>{sh.init(e,t),F.init(e,t)}),Tg=T("ZodUnknown",(e,t)=>{lh.init(e,t),$.init(e,t),e._zod.processJSONSchema=(n,o,i)=>Tm()});function Wo(){return jh(Tg)}const Eg=T("ZodNever",(e,t)=>{ah.init(e,t),$.init(e,t),e._zod.processJSONSchema=(n,o,i)=>_m(e,n,o)});function Sg(e){return em(Eg,e)}const Cg=T("ZodArray",(e,t)=>{uh.init(e,t),$.init(e,t),e._zod.processJSONSchema=(n,o,i)=>Im(e,n,o,i),e.element=t.element,e.min=(n,o)=>e.check(et(n,o)),e.nonempty=n=>e.check(et(1,n)),e.max=(n,o)=>e.check(sr(n,o)),e.length=(n,o)=>e.check(lr(n,o)),e.unwrap=()=>e.element});function pr(e,t){return fm(Cg,e,t)}const Ig=T("ZodObject",(e,t)=>{dh.init(e,t),$.init(e,t),e._zod.processJSONSchema=(n,o,i)=>Am(e,n,o,i),U(e,"shape",()=>t.shape),e.keyof=()=>Mg(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Wo()}),e.loose=()=>e.clone({...e._zod.def,catchall:Wo()}),e.strict=()=>e.clone({...e._zod.def,catchall:Sg()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>Gf(e,n),e.safeExtend=n=>Vf(e,n),e.merge=n=>$f(e,n),e.pick=n=>bf(e,n),e.omit=n=>Ff(e,n),e.partial=(...n)=>zf(hr,e,n[0]),e.required=(...n)=>qf(mr,e,n[0])});function Ag(e,t){const n={type:"object",shape:e??{},...P(t)};return new Ig(n)}const wg=T("ZodUnion",(e,t)=>{fh.init(e,t),$.init(e,t),e._zod.processJSONSchema=(n,o,i)=>wm(e,n,o,i),e.options=t.options});function Rg(e,t){return new wg({type:"union",options:e,...P(t)})}const Pg=T("ZodIntersection",(e,t)=>{ph.init(e,t),$.init(e,t),e._zod.processJSONSchema=(n,o,i)=>Rm(e,n,o,i)});function Ng(e,t){return new Pg({type:"intersection",left:e,right:t})}const Dt=T("ZodEnum",(e,t)=>{hh.init(e,t),$.init(e,t),e._zod.processJSONSchema=(o,i,s)=>Em(e,o,i),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(o,i)=>{const s={};for(const a of o)if(n.has(a))s[a]=t.entries[a];else throw new Error(`Key ${a} not found in enum`);return new Dt({...t,checks:[],...P(i),entries:s})},e.exclude=(o,i)=>{const s={...t.entries};for(const a of o)if(n.has(a))delete s[a];else throw new Error(`Key ${a} not found in enum`);return new Dt({...t,checks:[],...P(i),entries:s})}});function Mg(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(o=>[o,o])):e;return new Dt({type:"enum",entries:n,...P(t)})}const kg=T("ZodTransform",(e,t)=>{mh.init(e,t),$.init(e,t),e._zod.processJSONSchema=(n,o,i)=>Cm(e,n),e._zod.parse=(n,o)=>{if(o.direction==="backward")throw new Bi(e.constructor.name);n.addIssue=s=>{if(typeof s=="string")n.issues.push(Le(s,n.value,t));else{const a=s;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=n.value),a.inst??(a.inst=e),n.issues.push(Le(a))}};const i=t.transform(n.value,n);return i instanceof Promise?i.then(s=>(n.value=s,n)):(n.value=i,n)}});function xg(e){return new kg({type:"transform",transform:e})}const hr=T("ZodOptional",(e,t)=>{rr.init(e,t),$.init(e,t),e._zod.processJSONSchema=(n,o,i)=>dr(e,n,o,i),e.unwrap=()=>e._zod.def.innerType});function Ko(e){return new hr({type:"optional",innerType:e})}const Dg=T("ZodExactOptional",(e,t)=>{gh.init(e,t),$.init(e,t),e._zod.processJSONSchema=(n,o,i)=>dr(e,n,o,i),e.unwrap=()=>e._zod.def.innerType});function Ug(e){return new Dg({type:"optional",innerType:e})}const Lg=T("ZodNullable",(e,t)=>{yh.init(e,t),$.init(e,t),e._zod.processJSONSchema=(n,o,i)=>Pm(e,n,o,i),e.unwrap=()=>e._zod.def.innerType});function Yo(e){return new Lg({type:"nullable",innerType:e})}const bg=T("ZodDefault",(e,t)=>{vh.init(e,t),$.init(e,t),e._zod.processJSONSchema=(n,o,i)=>Mm(e,n,o,i),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Fg(e,t){return new bg({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Wi(t)}})}const Gg=T("ZodPrefault",(e,t)=>{_h.init(e,t),$.init(e,t),e._zod.processJSONSchema=(n,o,i)=>km(e,n,o,i),e.unwrap=()=>e._zod.def.innerType});function Vg(e,t){return new Gg({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Wi(t)}})}const mr=T("ZodNonOptional",(e,t)=>{Th.init(e,t),$.init(e,t),e._zod.processJSONSchema=(n,o,i)=>Nm(e,n,o,i),e.unwrap=()=>e._zod.def.innerType});function $g(e,t){return new mr({type:"nonoptional",innerType:e,...P(t)})}const zg=T("ZodCatch",(e,t)=>{Eh.init(e,t),$.init(e,t),e._zod.processJSONSchema=(n,o,i)=>xm(e,n,o,i),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function qg(e,t){return new zg({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Hg=T("ZodPipe",(e,t)=>{Sh.init(e,t),$.init(e,t),e._zod.processJSONSchema=(n,o,i)=>Dm(e,n,o,i),e.in=t.in,e.out=t.out});function Xo(e,t){return new Hg({type:"pipe",in:e,out:t})}const Bg=T("ZodReadonly",(e,t)=>{Ch.init(e,t),$.init(e,t),e._zod.processJSONSchema=(n,o,i)=>Um(e,n,o,i),e.unwrap=()=>e._zod.def.innerType});function Jg(e){return new Bg({type:"readonly",innerType:e})}const Og=T("ZodCustom",(e,t)=>{Ih.init(e,t),$.init(e,t),e._zod.processJSONSchema=(n,o,i)=>Sm(e,n)});function Zg(e,t={}){return pm(Og,e,t)}function Wg(e){return hm(e)}const Kg=Ag({summary:Oo(),steps:pr(Oo())});class Yg{constructor(){this.ai=new kf({apiKey:""})}async ruminate(t){try{const n=await this.ai.models.generateContent({model:"gemini-2.0-flash-exp",contents:` " "       . : "  .   ..   ..   ".
                  .
         : ${t}`,config:{responseMimeType:"application/json",responseSchema:{type:Y.OBJECT,properties:{summary:{type:Y.STRING,description:"    ."},steps:{type:Y.ARRAY,items:{type:Y.STRING},description:"    ."}},required:["summary","steps"]}}}),o=JSON.parse(n.text||"{}"),i=Kg.safeParse(o);if(!i.success)throw console.error("Validation failed",i.error),new Error("Invalid AI response format");return i.data}catch(n){throw console.error("Gemini Service Error",n),n}}}const Xg=new Yg,Qg=e=>Xg.ruminate(e),jg=()=>{const[e,t]=ye.useState(""),[n,o]=ye.useState(!1),[i,s]=ye.useState(""),[a,u]=ye.useState(null),[d,c]=ye.useState(()=>{try{const v=localStorage.getItem("boma_rumination_history");return v?JSON.parse(v):[]}catch{return[]}}),[f,p]=ye.useState(!1);return{input:e,setInput:t,loading:n,error:i,setError:s,result:a,history:d,ruminate:async()=>{if(!e.trim()){s("    (    )");return}s(""),o(!0);try{const v=await Qg(e);u(v);const E=[{query:e,result:v},...d].slice(0,5);c(E),localStorage.setItem("boma_rumination_history",JSON.stringify(E))}catch{s("     .   .")}finally{o(!1)}},loadHistoryItem:v=>{t(v.query),u(v.result)},isListening:f,startListening:()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const v=window.webkitSpeechRecognition||window.SpeechRecognition,y=new v;y.lang="ar-SA",y.continuous=!1,y.interimResults=!1,y.onstart=()=>p(!0),y.onend=()=>p(!1),y.onerror=()=>{p(!1),s("  ")},y.onresult=E=>{const S=E.results[0][0].transcript;t(C=>C?`${C} ${S}`:S)},y.start()}else s("    ")}}},ny=()=>{const{input:e,setInput:t,loading:n,error:o,setError:i,result:s,history:a,ruminate:u,loadHistoryItem:d,isListening:c,startListening:f}=jg();return k.jsxs("div",{className:`bg-black border border-yellow-500/50 p-10 md:p-20 rounded-lg shadow-[0_0_60px_rgba(0,0,0,1)] relative text-right ${n?"animate-scan":""}`,children:[k.jsx("div",{className:"absolute -top-3 -right-3 bg-yellow-400 text-black px-4 py-1 font-mono text-[9px] font-black uppercase tracking-tighter",children:"Boma_Logic_v2.0"}),k.jsxs("div",{className:"flex flex-col md:flex-row-reverse md:items-center gap-10 mb-14 mt-6",children:[k.jsx("div",{className:"bg-yellow-400 p-5 rounded-full text-black flex-shrink-0 w-20 h-20 flex items-center justify-center shadow-2xl shadow-yellow-400/10",children:k.jsx("i",{className:"fa-solid fa-brain text-4xl"})}),k.jsxs("div",{children:[k.jsx("h2",{className:"text-4xl md:text-5xl font-heading font-black uppercase tracking-tighter text-yellow-400 leading-none mb-4",children:"  "}),k.jsx("p",{className:"text-zinc-500 font-mono text-[10px] tracking-widest uppercase",children:":   //   "})]})]}),k.jsxs("div",{className:"relative group mb-10",children:[k.jsx("textarea",{value:e,onChange:p=>{t(p.target.value),o&&i("")},placeholder:"    ...",className:`w-full h-56 bg-zinc-900/30 border ${o?"border-red-500":"border-zinc-800"} rounded-lg p-8 text-yellow-50 font-mono focus:outline-none focus:border-yellow-400/50 transition-all resize-none placeholder-zinc-800 text-base text-right leading-relaxed`}),k.jsx("div",{className:"absolute bottom-4 left-6 text-zinc-800 font-mono text-[9px] select-none",children:"NODE_ID: BM-CORE"}),k.jsx("button",{onClick:f,className:`absolute top-4 left-4 w-10 h-10 rounded-full flex items-center justify-center transition-all ${c?"bg-red-500 animate-pulse text-white":"bg-zinc-800 text-zinc-400 hover:bg-yellow-400 hover:text-black"}`,title:" ",children:k.jsx("i",{className:`fa-solid ${c?"fa-microphone-lines":"fa-microphone"}`})}),o&&k.jsxs("div",{className:"absolute -bottom-8 right-0 text-red-500 font-bold text-xs flex items-center gap-2",children:[k.jsx("i",{className:"fa-solid fa-triangle-exclamation"})," ",o]})]}),k.jsx("button",{onClick:u,disabled:n,className:"w-full py-6 bg-yellow-400 hover:bg-white text-black font-black uppercase tracking-widest rounded-none transition-all flex items-center justify-center gap-6 text-lg group disabled:opacity-50 disabled:cursor-not-allowed",children:n?k.jsxs(k.Fragment,{children:[k.jsx("i",{className:"fa-solid fa-circle-notch animate-spin text-xl"}),"  ..."]}):k.jsxs(k.Fragment,{children:["   ",k.jsx("i",{className:"fa-solid fa-bolt text-xl group-hover:scale-110 transition-transform"})]})}),s&&k.jsx("div",{className:"mt-20 animate-in fade-in zoom-in-95 duration-1000",children:k.jsxs("div",{className:"p-12 bg-zinc-900/40 border-t-2 border-yellow-400 rounded-sm",children:[k.jsxs("div",{className:"flex items-center gap-3 mb-10 text-yellow-400 font-mono text-[10px] uppercase tracking-widest justify-end",children:["  ",k.jsx("span",{className:"w-1.5 h-1.5 bg-yellow-400 rounded-full animate-pulse"})]}),k.jsxs("div",{className:"mb-14",children:[k.jsxs("h3",{className:"text-2xl font-heading font-black mb-6 text-white uppercase border-b border-zinc-800 pb-4 flex items-center gap-4 justify-end",children:["  ",k.jsx("i",{className:"fa-solid fa-microchip text-yellow-400 text-xl"})]}),k.jsx("p",{className:"text-zinc-400 leading-relaxed text-lg font-light",children:s.summary})]}),k.jsxs("div",{children:[k.jsxs("h3",{className:"text-2xl font-heading font-black mb-6 text-white uppercase border-b border-zinc-800 pb-4 flex items-center gap-4 justify-end",children:["  ",k.jsx("i",{className:"fa-solid fa-list-check text-yellow-400 text-xl"})]}),k.jsx("div",{className:"grid gap-4",children:s.steps.map((p,h)=>k.jsxs("div",{className:"flex gap-8 p-6 bg-black/20 border border-zinc-900 hover:border-yellow-400/20 transition-all flex-row-reverse group",children:[k.jsxs("span",{className:"text-yellow-400 font-mono font-black text-xl opacity-20 group-hover:opacity-100 transition-opacity",children:["0",h+1]}),k.jsx("span",{className:"text-zinc-400 font-medium text-right flex-1 leading-relaxed",children:p})]},h))})]})]})}),a.length>0&&k.jsxs("div",{className:"mt-16 pt-10 border-t border-zinc-900",children:[k.jsx("h4",{className:"text-zinc-500 font-mono text-xs uppercase tracking-widest mb-6",children:"   // LOCAL_STORAGE"}),k.jsx("div",{className:"flex flex-wrap gap-3 justify-end",children:a.map((p,h)=>k.jsxs("button",{onClick:()=>d(p),className:"px-4 py-2 bg-zinc-900 border border-zinc-800 rounded-sm text-zinc-400 hover:text-yellow-400 hover:border-yellow-400 transition-all font-mono text-[10px] max-w-[200px] truncate",children:[p.query.substring(0,30),"..."]},h))})]})]})};export{ny as default};
